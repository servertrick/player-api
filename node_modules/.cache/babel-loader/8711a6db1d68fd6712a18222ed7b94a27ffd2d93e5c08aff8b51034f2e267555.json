{"ast":null,"code":"function _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nimport React, { forwardRef, useCallback, useContext, useEffect, useRef, useState } from 'react';\nimport { setFocusWithoutScroll } from '../../utils';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { CheckBox } from '../CheckBox';\nimport { InfiniteScroll } from '../InfiniteScroll';\nimport { Keyboard } from '../Keyboard';\nimport { Text } from '../Text';\nimport { TextInput } from '../TextInput';\nimport { SelectionSummary } from './SelectionSummary';\nimport { StyledContainer, OptionsContainer, SelectOption } from '../Select/StyledSelect';\nimport { applyKey, getOptionLabel, getOptionValue, useDisabled, getOptionIndex, arrayIncludes, inertTrueValue } from '../Select/utils';\nimport { EmptySearchOption } from '../Select/EmptySearchOption';\nimport { MessageContext } from '../../contexts/MessageContext';\nimport { useThemeValue } from '../../utils/useThemeValue';\nvar SelectMultipleContainer = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var _theme$selectMultiple2;\n  var allOptions = _ref.allOptions,\n    _ref$children = _ref.children,\n    children = _ref$children === void 0 ? null : _ref$children,\n    disabledProp = _ref.disabled,\n    disabledKey = _ref.disabledKey,\n    dropHeight = _ref.dropHeight,\n    _ref$emptySearchMessa = _ref.emptySearchMessage,\n    emptySearchMessage = _ref$emptySearchMessa === void 0 ? 'No matches found' : _ref$emptySearchMessa,\n    help = _ref.help,\n    icon = _ref.icon,\n    id = _ref.id,\n    labelKey = _ref.labelKey,\n    limit = _ref.limit,\n    messages = _ref.messages,\n    onChange = _ref.onChange,\n    onClose = _ref.onClose,\n    onKeyDown = _ref.onKeyDown,\n    onMore = _ref.onMore,\n    onSearch = _ref.onSearch,\n    optionIndexesInValue = _ref.optionIndexesInValue,\n    options = _ref.options,\n    _ref$replace = _ref.replace,\n    replace = _ref$replace === void 0 ? true : _ref$replace,\n    searchPlaceholder = _ref.searchPlaceholder,\n    search = _ref.search,\n    setSearch = _ref.setSearch,\n    usingKeyboard = _ref.usingKeyboard,\n    _ref$value = _ref.value,\n    value = _ref$value === void 0 ? [] : _ref$value,\n    valueKey = _ref.valueKey,\n    showSelectedInline = _ref.showSelectedInline;\n  var _useThemeValue = useThemeValue(),\n    theme = _useThemeValue.theme;\n  // the currently active option based on keyboard navigation\n  // or mouse hover, -1 means no active option\n  var _useState = useState(-1),\n    activeIndex = _useState[0],\n    setActiveIndex = _useState[1];\n  var _useState2 = useState(usingKeyboard),\n    keyboardNavigation = _useState2[0],\n    setKeyboardNavigation = _useState2[1];\n  var _useContext = useContext(MessageContext),\n    format = _useContext.format;\n  var searchRef = useRef();\n  var optionsRef = useRef();\n  var _useState3 = useState(disabledProp),\n    disabled = _useState3[0],\n    setDisabled = _useState3[1];\n  // the node of the currently active option, as activeIndex changes\n  // this is updated too and the useEffect below ensures the\n  // active option remains in keyboard focus since we're\n  // following roving tab index pattern\n  var activeRef = useRef();\n  var _useState4 = useState(),\n    showA11yLimit = _useState4[0],\n    setShowA11yLimit = _useState4[1];\n  var clearRef = useRef();\n  var isDisabled = useDisabled(disabled, disabledKey, options, valueKey || labelKey);\n\n  // for keyboard/screenreader, keep the active option in focus\n  useEffect(function () {\n    var _activeRef$current;\n    if (activeIndex) (_activeRef$current = activeRef.current) == null || _activeRef$current.focus();\n  }, [activeIndex]);\n\n  // set initial focus\n  useEffect(function () {\n    // need to wait for Drop to be ready\n    var timer = setTimeout(function () {\n      var clearButton = clearRef.current;\n      if (clearButton && clearButton.focus) {\n        setFocusWithoutScroll(clearButton);\n      } else if (searchRef && searchRef.current) {\n        var searchInput = searchRef.current;\n        if (searchInput && searchInput.focus) {\n          setFocusWithoutScroll(searchInput);\n        }\n      } else if (activeRef.current) {\n        setFocusWithoutScroll(activeRef.current);\n      } else if (optionsRef.current) {\n        setActiveIndex(0);\n      }\n    }, 100); // Drop should be open after 100ms\n    return function () {\n      return clearTimeout(timer);\n    };\n  }, []);\n  useEffect(function () {\n    var optionsNode = optionsRef.current;\n    if (optionsNode != null && optionsNode.children) {\n      var optionNode = optionsNode.children[activeIndex];\n      if (optionNode) optionNode.focus();\n    }\n  }, [activeIndex]);\n  var isSelected = useCallback(function (index) {\n    var result;\n    var optionVal = getOptionValue(index, options, valueKey || labelKey);\n    if (value) {\n      if (value.length === 0) {\n        result = false;\n      } else if (typeof value[0] !== 'object') {\n        result = value.indexOf(optionVal) !== -1;\n      } else if (valueKey) {\n        result = value.some(function (valueItem) {\n          var valueValue = typeof valueKey === 'function' ? valueKey(valueItem) : valueItem[valueKey];\n          return valueValue === optionVal;\n        });\n      }\n    }\n    return result;\n  }, [value, valueKey, options, labelKey]);\n  var selectOption = useCallback(function (index) {\n    return function (event) {\n      if (onChange) {\n        var nextOptionIndexesInValue = optionIndexesInValue.slice(0);\n        var allOptionsIndex = getOptionIndex(allOptions, options[index], valueKey || labelKey);\n        var valueIndex = optionIndexesInValue.indexOf(allOptionsIndex);\n        if (valueIndex === -1 && (!limit || (value == null ? void 0 : value.length) < limit)) {\n          nextOptionIndexesInValue.push(allOptionsIndex);\n        } else {\n          nextOptionIndexesInValue.splice(valueIndex, 1);\n        }\n        var nextValue = nextOptionIndexesInValue.map(function (i) {\n          return valueKey && valueKey.reduce ? applyKey(allOptions[i], valueKey) : allOptions[i];\n        });\n        var nextSelected = nextOptionIndexesInValue;\n        onChange(event, {\n          option: options[index],\n          value: nextValue,\n          selected: nextSelected\n        });\n      }\n    };\n  }, [labelKey, limit, onChange, optionIndexesInValue, options, allOptions, valueKey, value]);\n  var onNextOption = useCallback(function (event) {\n    event.preventDefault();\n    var nextActiveIndex = activeIndex + 1;\n    // checking activeIndex > -1 ensures arrow keys don't\n    // move focus when select all/clear all button or search input\n    // are focused\n    if (nextActiveIndex !== (options == null ? void 0 : options.length) && activeIndex > -1) {\n      setActiveIndex(nextActiveIndex);\n      setKeyboardNavigation(true);\n    }\n  }, [activeIndex, options]);\n  var onPreviousOption = useCallback(function (event) {\n    event.preventDefault();\n    var nextActiveIndex = activeIndex - 1;\n\n    // checking activeIndex > -1 ensures arrow keys don't\n    // move focus when select all/clear all button or search input\n    // are focused\n    if (activeIndex > -1) {\n      setActiveIndex(Math.max(nextActiveIndex, 0));\n      setKeyboardNavigation(true);\n    }\n  }, [activeIndex]);\n  var onKeyDownOption = useCallback(function (event) {\n    if (!onSearch) {\n      var nextActiveIndex = options.findIndex(function (e) {\n        var label;\n        if (typeof e === 'object') {\n          label = e.label || applyKey(e, labelKey);\n        } else {\n          label = e;\n        }\n        return typeof label === 'string' && label.charAt(0).toLowerCase() === event.key.toLowerCase();\n      });\n      if (nextActiveIndex >= 0) {\n        event.preventDefault();\n        setActiveIndex(nextActiveIndex);\n        setKeyboardNavigation(true);\n      }\n    }\n    if (onKeyDown) {\n      onKeyDown(event);\n    }\n  }, [onKeyDown, options, onSearch, labelKey]);\n  var onActiveOption = useCallback(function (index) {\n    return function () {\n      if (!keyboardNavigation) setActiveIndex(index);\n    };\n  }, [keyboardNavigation]);\n  var onSelectOption = useCallback(function (event) {\n    if (!isDisabled(activeIndex) && activeIndex >= 0 && activeIndex < (options == null ? void 0 : options.length)) {\n      event.preventDefault(); // prevent submitting forms\n      selectOption(activeIndex)(event);\n    }\n  }, [activeIndex, selectOption, options, isDisabled]);\n  var customSearchInput = theme.select.searchInput;\n  var SelectTextInput = customSearchInput || TextInput;\n  var selectOptionsStyle = theme.select.options ? _extends({}, theme.select.options.box, theme.select.options.container) : {};\n\n  // handle when limit is reached\n  useEffect(function () {\n    var originallyDisabled = function originallyDisabled(index) {\n      var option = allOptions[index];\n      var result;\n      if (disabledKey) {\n        result = applyKey(option, disabledKey);\n      } else if (Array.isArray(disabledProp)) {\n        if (typeof disabledProp[0] === 'number') {\n          result = disabledProp.indexOf(index) !== -1;\n        } else {\n          result = getOptionIndex(disabledProp, getOptionValue(index, options, valueKey || labelKey), valueKey || labelKey) !== -1;\n        }\n      }\n      return result;\n    };\n    if (value && limit) {\n      if (value.length === limit) {\n        var newDisabled = [].concat(disabledProp);\n        // disable everything that is not selected\n        for (var i = 0; i < (options == null ? void 0 : options.length); i += 1) {\n          if (!isSelected(i) && !originallyDisabled(i)) {\n            newDisabled.push(options[i]);\n          }\n        }\n        if (usingKeyboard) setShowA11yLimit('Selected. Maximum selection limit reached.');\n        setDisabled(newDisabled);\n      } else {\n        if (usingKeyboard) setShowA11yLimit(undefined);\n        setDisabled(disabledProp);\n      }\n    }\n  }, [isSelected, value, limit, disabledProp, allOptions, disabledKey, labelKey, options, usingKeyboard, valueKey]);\n\n  // reset showA11yLimit after announcement is read\n  useEffect(function () {\n    if (showA11yLimit !== undefined) {\n      setTimeout(function () {\n        setShowA11yLimit(undefined);\n      }, 2000); // value chosen based on length of a11yLimit message\n    }\n  }, [showA11yLimit]);\n  var summaryContent = /*#__PURE__*/React.createElement(SelectionSummary, {\n    allOptions: allOptions,\n    clearRef: clearRef,\n    disabled: disabled,\n    disabledKey: disabledKey,\n    isSelected: isSelected,\n    labelKey: labelKey,\n    limit: limit,\n    messages: messages,\n    onChange: onChange,\n    onMore: onMore,\n    options: options,\n    search: search,\n    setActiveIndex: setActiveIndex,\n    showSelectedInline: showSelectedInline,\n    value: value,\n    valueKey: valueKey\n  });\n  var helpContent;\n  if (help) {\n    var _theme$selectMultiple;\n    if (typeof help === 'string') helpContent = /*#__PURE__*/React.createElement(Box, {\n      flex: false,\n      pad: (_theme$selectMultiple = theme.selectMultiple) == null || (_theme$selectMultiple = _theme$selectMultiple.help) == null || (_theme$selectMultiple = _theme$selectMultiple.container) == null ? void 0 : _theme$selectMultiple.pad\n    }, /*#__PURE__*/React.createElement(Text, {\n      size: \"small\"\n    }, help));else helpContent = /*#__PURE__*/React.createElement(Box, {\n      flex: false\n    }, help);\n  }\n  if (showSelectedInline) summaryContent = /*#__PURE__*/React.createElement(Box, {\n    direction: \"row\",\n    justify: \"between\",\n    flex: false\n  }, summaryContent, /*#__PURE__*/React.createElement(Box, null, /*#__PURE__*/React.createElement(Button, {\n    fill: \"vertical\",\n    onClick: onClose,\n    a11yTitle: \"Close Select\"\n  }, icon)));\n  return /*#__PURE__*/React.createElement(Keyboard, {\n    onEnter: onSelectOption,\n    onSpace: onSelectOption,\n    onUp: onPreviousOption,\n    onDown: onNextOption,\n    onKeyDown: onKeyDownOption,\n    onEsc: onClose\n  }, /*#__PURE__*/React.createElement(StyledContainer, {\n    ref: ref,\n    id: id ? id + \"__select-drop\" : undefined,\n    dropHeight: dropHeight,\n    a11yTitle: format({\n      id: 'selectMultiple.selectDrop',\n      messages: messages\n    })\n  }, summaryContent, onSearch && /*#__PURE__*/React.createElement(Box, {\n    pad: !customSearchInput ? (_theme$selectMultiple2 = theme.selectMultiple) == null || (_theme$selectMultiple2 = _theme$selectMultiple2.search) == null ? void 0 : _theme$selectMultiple2.pad : undefined,\n    flex: false\n  }, /*#__PURE__*/React.createElement(Keyboard, {\n    onEnter: function onEnter(event) {\n      onNextOption(event);\n    }\n  }, /*#__PURE__*/React.createElement(SelectTextInput, {\n    a11yTitle: format({\n      id: 'selectMultiple.search',\n      messages: messages\n    }),\n    focusIndicator: !customSearchInput,\n    size: \"small\",\n    ref: searchRef,\n    type: \"search\",\n    value: search || '',\n    placeholder: searchPlaceholder,\n    onChange: function onChange(event) {\n      var nextSearch = event.target.value;\n      setSearch(nextSearch);\n      setActiveIndex(-1);\n      onSearch(nextSearch);\n    },\n    onFocus: function onFocus() {\n      return setActiveIndex(-1);\n    }\n  }))), helpContent, (options == null ? void 0 : options.length) > 0 ? /*#__PURE__*/React.createElement(OptionsContainer, {\n    role: \"listbox\",\n    tabIndex: \"-1\",\n    ref: optionsRef,\n    \"aria-multiselectable\": true,\n    onMouseMove: function onMouseMove() {\n      return setKeyboardNavigation(false);\n    },\n    selectMultiple: true // internal prop\n  }, /*#__PURE__*/React.createElement(InfiniteScroll, {\n    items: options,\n    step: theme.select.step,\n    onMore: onMore,\n    replace: replace,\n    show: activeIndex !== -1 ? activeIndex : undefined\n  }, function (option, index, optionRef) {\n    var optionDisabled = isDisabled(index);\n    var optionSelected = value ? arrayIncludes(value, valueKey && valueKey.reduce ? applyKey(option, valueKey) : option, valueKey || labelKey) : false;\n    var optionActive = activeIndex === index;\n    var optionLabel = getOptionLabel(index, options, labelKey || valueKey);\n\n    // Determine whether the label is done as a child or\n    // as an option Button kind property.\n    var child;\n    var textComponent = false;\n    if (children) {\n      child = children(option, index, options, {\n        active: optionActive,\n        disabled: optionDisabled,\n        selected: optionSelected\n      });\n      if (typeof child === 'string' || child.props && child.props.children && typeof child.props.children === 'string') textComponent = true;\n    } else {\n      var _theme$selectMultiple3;\n      child = /*#__PURE__*/React.createElement(CheckBox, {\n        label: /*#__PURE__*/React.createElement(Box, {\n          alignSelf: \"center\",\n          width: \"100%\",\n          align: \"start\"\n        }, optionLabel),\n        pad: (_theme$selectMultiple3 = theme.selectMultiple) == null || (_theme$selectMultiple3 = _theme$selectMultiple3.option) == null ? void 0 : _theme$selectMultiple3.pad,\n        tabIndex: \"-1\",\n        checked: optionSelected,\n        disabled: optionDisabled,\n        inert: inertTrueValue,\n        containerProps: {\n          // in Firefox when we have inert set, the checkbox\n          // click event gets swallowed by the checkbox.\n          // We need the click event to go the the button\n          // around the checkbox so we use pointerEvents =\n          // none. For code clarity we decided an inline\n          // style made sense here.\n          style: {\n            pointerEvents: 'none'\n          }\n        }\n      });\n    }\n    if (!children && search) {\n      var searchText = search.toLowerCase();\n      if (typeof optionLabel === 'string' && optionLabel.toLowerCase().indexOf(searchText) >= 0) {\n        var _theme$selectMultiple4;\n        // code to bold search term in matching options\n        var boldIndex = optionLabel.toLowerCase().indexOf(searchText);\n        var childBeginning = optionLabel.substring(0, boldIndex);\n        var childBold = optionLabel.substring(boldIndex, boldIndex + searchText.length);\n        childBold = /*#__PURE__*/React.createElement(\"b\", null, childBold);\n        var childEnd = optionLabel.substring(boldIndex + searchText.length);\n        child = /*#__PURE__*/React.createElement(CheckBox, {\n          label: /*#__PURE__*/React.createElement(Box, {\n            alignSelf: \"center\",\n            width: \"100%\",\n            align: \"start\",\n            direction: \"row\"\n          }, /*#__PURE__*/React.createElement(Text, null, childBeginning, childBold, childEnd)),\n          pad: (_theme$selectMultiple4 = theme.selectMultiple) == null || (_theme$selectMultiple4 = _theme$selectMultiple4.option) == null ? void 0 : _theme$selectMultiple4.pad,\n          tabIndex: \"-1\",\n          checked: optionSelected,\n          disabled: optionDisabled,\n          inert: inertTrueValue,\n          containerProps: {\n            // in Firefox when we have inert set, the checkbox\n            // click event gets swallowed by the checkbox.\n            // We need the click event to go the the button\n            // around the checkbox so we use pointerEvents =\n            // none. For code clarity we decided an inline\n            // style made sense here.\n            style: {\n              pointerEvents: 'none'\n            }\n          }\n        });\n      }\n    }\n\n    // if we have a child, turn on plain, and hoverIndicator\n    return /*#__PURE__*/React.createElement(SelectOption, {\n      a11yTitle: format({\n        id: optionSelected ? 'selectMultiple.optionSelected' : 'selectMultiple.optionNotSelected',\n        messages: messages,\n        values: {\n          optionLabel: optionLabel\n        }\n      })\n      // lint isn't flagging this but we shouldn't use index\n      // as a key see no-array-index-key lint rule\n      ,\n\n      key: index\n      // merge optionRef and activeRef\n      ,\n\n      ref: function ref(node) {\n        // eslint-disable-next-line no-param-reassign\n        if (optionRef) optionRef.current = node;\n        if (optionActive) activeRef.current = node;\n      },\n      tabIndex: optionSelected || activeIndex === index ||\n      // when nothing is selected and entering listbox\n      // first option should be focused\n      value.length === 0 && activeIndex === -1 && index === 0 ? '0' : '-1',\n      role: \"option\",\n      id: \"option\" + index,\n      \"aria-setsize\": options.length,\n      \"aria-posinset\": index + 1,\n      \"aria-selected\": optionSelected,\n      focusIndicator: usingKeyboard,\n      \"aria-disabled\": optionDisabled || undefined,\n      plain: !child ? undefined : true,\n      align: \"start\",\n      kind: !child ? 'option' : undefined,\n      active: optionActive,\n      selected: optionSelected,\n      onMouseOver: !optionDisabled ? onActiveOption(index) : undefined,\n      onClick: !optionDisabled ? selectOption(index) : undefined,\n      onFocus: function onFocus() {\n        return setActiveIndex(index);\n      },\n      textComponent: textComponent\n    }, child);\n  })) : /*#__PURE__*/React.createElement(EmptySearchOption, {\n    emptySearchMessage: emptySearchMessage,\n    selectOptionsStyle: selectOptionsStyle,\n    theme: theme\n  }), usingKeyboard && showA11yLimit && /*#__PURE__*/React.createElement(Box, {\n    height: \"0px\",\n    width: \"0px\",\n    overflow: \"hidden\"\n    // announce when we reach the limit of items\n    // that can be selected\n    ,\n\n    \"aria-live\": \"assertive\",\n    role: \"alert\"\n  }, showA11yLimit)));\n});\nexport { SelectMultipleContainer };","map":{"version":3,"names":["_extends","Object","assign","bind","n","e","arguments","length","t","r","hasOwnProperty","call","apply","React","forwardRef","useCallback","useContext","useEffect","useRef","useState","setFocusWithoutScroll","Box","Button","CheckBox","InfiniteScroll","Keyboard","Text","TextInput","SelectionSummary","StyledContainer","OptionsContainer","SelectOption","applyKey","getOptionLabel","getOptionValue","useDisabled","getOptionIndex","arrayIncludes","inertTrueValue","EmptySearchOption","MessageContext","useThemeValue","SelectMultipleContainer","_ref","ref","_theme$selectMultiple2","allOptions","_ref$children","children","disabledProp","disabled","disabledKey","dropHeight","_ref$emptySearchMessa","emptySearchMessage","help","icon","id","labelKey","limit","messages","onChange","onClose","onKeyDown","onMore","onSearch","optionIndexesInValue","options","_ref$replace","replace","searchPlaceholder","search","setSearch","usingKeyboard","_ref$value","value","valueKey","showSelectedInline","_useThemeValue","theme","_useState","activeIndex","setActiveIndex","_useState2","keyboardNavigation","setKeyboardNavigation","_useContext","format","searchRef","optionsRef","_useState3","setDisabled","activeRef","_useState4","showA11yLimit","setShowA11yLimit","clearRef","isDisabled","_activeRef$current","current","focus","timer","setTimeout","clearButton","searchInput","clearTimeout","optionsNode","optionNode","isSelected","index","result","optionVal","indexOf","some","valueItem","valueValue","selectOption","event","nextOptionIndexesInValue","slice","allOptionsIndex","valueIndex","push","splice","nextValue","map","i","reduce","nextSelected","option","selected","onNextOption","preventDefault","nextActiveIndex","onPreviousOption","Math","max","onKeyDownOption","findIndex","label","charAt","toLowerCase","key","onActiveOption","onSelectOption","customSearchInput","select","SelectTextInput","selectOptionsStyle","box","container","originallyDisabled","Array","isArray","newDisabled","concat","undefined","summaryContent","createElement","helpContent","_theme$selectMultiple","flex","pad","selectMultiple","size","direction","justify","fill","onClick","a11yTitle","onEnter","onSpace","onUp","onDown","onEsc","focusIndicator","type","placeholder","nextSearch","target","onFocus","role","tabIndex","onMouseMove","items","step","show","optionRef","optionDisabled","optionSelected","optionActive","optionLabel","child","textComponent","active","props","_theme$selectMultiple3","alignSelf","width","align","checked","inert","containerProps","style","pointerEvents","searchText","_theme$selectMultiple4","boldIndex","childBeginning","substring","childBold","childEnd","values","node","plain","kind","onMouseOver","height","overflow"],"sources":["C:/Users/michaejo/Documents/GitRepos/player-api/node_modules/grommet/es6/components/SelectMultiple/SelectMultipleContainer.js"],"sourcesContent":["function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport React, { forwardRef, useCallback, useContext, useEffect, useRef, useState } from 'react';\nimport { setFocusWithoutScroll } from '../../utils';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { CheckBox } from '../CheckBox';\nimport { InfiniteScroll } from '../InfiniteScroll';\nimport { Keyboard } from '../Keyboard';\nimport { Text } from '../Text';\nimport { TextInput } from '../TextInput';\nimport { SelectionSummary } from './SelectionSummary';\nimport { StyledContainer, OptionsContainer, SelectOption } from '../Select/StyledSelect';\nimport { applyKey, getOptionLabel, getOptionValue, useDisabled, getOptionIndex, arrayIncludes, inertTrueValue } from '../Select/utils';\nimport { EmptySearchOption } from '../Select/EmptySearchOption';\nimport { MessageContext } from '../../contexts/MessageContext';\nimport { useThemeValue } from '../../utils/useThemeValue';\nvar SelectMultipleContainer = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var _theme$selectMultiple2;\n  var allOptions = _ref.allOptions,\n    _ref$children = _ref.children,\n    children = _ref$children === void 0 ? null : _ref$children,\n    disabledProp = _ref.disabled,\n    disabledKey = _ref.disabledKey,\n    dropHeight = _ref.dropHeight,\n    _ref$emptySearchMessa = _ref.emptySearchMessage,\n    emptySearchMessage = _ref$emptySearchMessa === void 0 ? 'No matches found' : _ref$emptySearchMessa,\n    help = _ref.help,\n    icon = _ref.icon,\n    id = _ref.id,\n    labelKey = _ref.labelKey,\n    limit = _ref.limit,\n    messages = _ref.messages,\n    onChange = _ref.onChange,\n    onClose = _ref.onClose,\n    onKeyDown = _ref.onKeyDown,\n    onMore = _ref.onMore,\n    onSearch = _ref.onSearch,\n    optionIndexesInValue = _ref.optionIndexesInValue,\n    options = _ref.options,\n    _ref$replace = _ref.replace,\n    replace = _ref$replace === void 0 ? true : _ref$replace,\n    searchPlaceholder = _ref.searchPlaceholder,\n    search = _ref.search,\n    setSearch = _ref.setSearch,\n    usingKeyboard = _ref.usingKeyboard,\n    _ref$value = _ref.value,\n    value = _ref$value === void 0 ? [] : _ref$value,\n    valueKey = _ref.valueKey,\n    showSelectedInline = _ref.showSelectedInline;\n  var _useThemeValue = useThemeValue(),\n    theme = _useThemeValue.theme;\n  // the currently active option based on keyboard navigation\n  // or mouse hover, -1 means no active option\n  var _useState = useState(-1),\n    activeIndex = _useState[0],\n    setActiveIndex = _useState[1];\n  var _useState2 = useState(usingKeyboard),\n    keyboardNavigation = _useState2[0],\n    setKeyboardNavigation = _useState2[1];\n  var _useContext = useContext(MessageContext),\n    format = _useContext.format;\n  var searchRef = useRef();\n  var optionsRef = useRef();\n  var _useState3 = useState(disabledProp),\n    disabled = _useState3[0],\n    setDisabled = _useState3[1];\n  // the node of the currently active option, as activeIndex changes\n  // this is updated too and the useEffect below ensures the\n  // active option remains in keyboard focus since we're\n  // following roving tab index pattern\n  var activeRef = useRef();\n  var _useState4 = useState(),\n    showA11yLimit = _useState4[0],\n    setShowA11yLimit = _useState4[1];\n  var clearRef = useRef();\n  var isDisabled = useDisabled(disabled, disabledKey, options, valueKey || labelKey);\n\n  // for keyboard/screenreader, keep the active option in focus\n  useEffect(function () {\n    var _activeRef$current;\n    if (activeIndex) (_activeRef$current = activeRef.current) == null || _activeRef$current.focus();\n  }, [activeIndex]);\n\n  // set initial focus\n  useEffect(function () {\n    // need to wait for Drop to be ready\n    var timer = setTimeout(function () {\n      var clearButton = clearRef.current;\n      if (clearButton && clearButton.focus) {\n        setFocusWithoutScroll(clearButton);\n      } else if (searchRef && searchRef.current) {\n        var searchInput = searchRef.current;\n        if (searchInput && searchInput.focus) {\n          setFocusWithoutScroll(searchInput);\n        }\n      } else if (activeRef.current) {\n        setFocusWithoutScroll(activeRef.current);\n      } else if (optionsRef.current) {\n        setActiveIndex(0);\n      }\n    }, 100); // Drop should be open after 100ms\n    return function () {\n      return clearTimeout(timer);\n    };\n  }, []);\n  useEffect(function () {\n    var optionsNode = optionsRef.current;\n    if (optionsNode != null && optionsNode.children) {\n      var optionNode = optionsNode.children[activeIndex];\n      if (optionNode) optionNode.focus();\n    }\n  }, [activeIndex]);\n  var isSelected = useCallback(function (index) {\n    var result;\n    var optionVal = getOptionValue(index, options, valueKey || labelKey);\n    if (value) {\n      if (value.length === 0) {\n        result = false;\n      } else if (typeof value[0] !== 'object') {\n        result = value.indexOf(optionVal) !== -1;\n      } else if (valueKey) {\n        result = value.some(function (valueItem) {\n          var valueValue = typeof valueKey === 'function' ? valueKey(valueItem) : valueItem[valueKey];\n          return valueValue === optionVal;\n        });\n      }\n    }\n    return result;\n  }, [value, valueKey, options, labelKey]);\n  var selectOption = useCallback(function (index) {\n    return function (event) {\n      if (onChange) {\n        var nextOptionIndexesInValue = optionIndexesInValue.slice(0);\n        var allOptionsIndex = getOptionIndex(allOptions, options[index], valueKey || labelKey);\n        var valueIndex = optionIndexesInValue.indexOf(allOptionsIndex);\n        if (valueIndex === -1 && (!limit || (value == null ? void 0 : value.length) < limit)) {\n          nextOptionIndexesInValue.push(allOptionsIndex);\n        } else {\n          nextOptionIndexesInValue.splice(valueIndex, 1);\n        }\n        var nextValue = nextOptionIndexesInValue.map(function (i) {\n          return valueKey && valueKey.reduce ? applyKey(allOptions[i], valueKey) : allOptions[i];\n        });\n        var nextSelected = nextOptionIndexesInValue;\n        onChange(event, {\n          option: options[index],\n          value: nextValue,\n          selected: nextSelected\n        });\n      }\n    };\n  }, [labelKey, limit, onChange, optionIndexesInValue, options, allOptions, valueKey, value]);\n  var onNextOption = useCallback(function (event) {\n    event.preventDefault();\n    var nextActiveIndex = activeIndex + 1;\n    // checking activeIndex > -1 ensures arrow keys don't\n    // move focus when select all/clear all button or search input\n    // are focused\n    if (nextActiveIndex !== (options == null ? void 0 : options.length) && activeIndex > -1) {\n      setActiveIndex(nextActiveIndex);\n      setKeyboardNavigation(true);\n    }\n  }, [activeIndex, options]);\n  var onPreviousOption = useCallback(function (event) {\n    event.preventDefault();\n    var nextActiveIndex = activeIndex - 1;\n\n    // checking activeIndex > -1 ensures arrow keys don't\n    // move focus when select all/clear all button or search input\n    // are focused\n    if (activeIndex > -1) {\n      setActiveIndex(Math.max(nextActiveIndex, 0));\n      setKeyboardNavigation(true);\n    }\n  }, [activeIndex]);\n  var onKeyDownOption = useCallback(function (event) {\n    if (!onSearch) {\n      var nextActiveIndex = options.findIndex(function (e) {\n        var label;\n        if (typeof e === 'object') {\n          label = e.label || applyKey(e, labelKey);\n        } else {\n          label = e;\n        }\n        return typeof label === 'string' && label.charAt(0).toLowerCase() === event.key.toLowerCase();\n      });\n      if (nextActiveIndex >= 0) {\n        event.preventDefault();\n        setActiveIndex(nextActiveIndex);\n        setKeyboardNavigation(true);\n      }\n    }\n    if (onKeyDown) {\n      onKeyDown(event);\n    }\n  }, [onKeyDown, options, onSearch, labelKey]);\n  var onActiveOption = useCallback(function (index) {\n    return function () {\n      if (!keyboardNavigation) setActiveIndex(index);\n    };\n  }, [keyboardNavigation]);\n  var onSelectOption = useCallback(function (event) {\n    if (!isDisabled(activeIndex) && activeIndex >= 0 && activeIndex < (options == null ? void 0 : options.length)) {\n      event.preventDefault(); // prevent submitting forms\n      selectOption(activeIndex)(event);\n    }\n  }, [activeIndex, selectOption, options, isDisabled]);\n  var customSearchInput = theme.select.searchInput;\n  var SelectTextInput = customSearchInput || TextInput;\n  var selectOptionsStyle = theme.select.options ? _extends({}, theme.select.options.box, theme.select.options.container) : {};\n\n  // handle when limit is reached\n  useEffect(function () {\n    var originallyDisabled = function originallyDisabled(index) {\n      var option = allOptions[index];\n      var result;\n      if (disabledKey) {\n        result = applyKey(option, disabledKey);\n      } else if (Array.isArray(disabledProp)) {\n        if (typeof disabledProp[0] === 'number') {\n          result = disabledProp.indexOf(index) !== -1;\n        } else {\n          result = getOptionIndex(disabledProp, getOptionValue(index, options, valueKey || labelKey), valueKey || labelKey) !== -1;\n        }\n      }\n      return result;\n    };\n    if (value && limit) {\n      if (value.length === limit) {\n        var newDisabled = [].concat(disabledProp);\n        // disable everything that is not selected\n        for (var i = 0; i < (options == null ? void 0 : options.length); i += 1) {\n          if (!isSelected(i) && !originallyDisabled(i)) {\n            newDisabled.push(options[i]);\n          }\n        }\n        if (usingKeyboard) setShowA11yLimit('Selected. Maximum selection limit reached.');\n        setDisabled(newDisabled);\n      } else {\n        if (usingKeyboard) setShowA11yLimit(undefined);\n        setDisabled(disabledProp);\n      }\n    }\n  }, [isSelected, value, limit, disabledProp, allOptions, disabledKey, labelKey, options, usingKeyboard, valueKey]);\n\n  // reset showA11yLimit after announcement is read\n  useEffect(function () {\n    if (showA11yLimit !== undefined) {\n      setTimeout(function () {\n        setShowA11yLimit(undefined);\n      }, 2000); // value chosen based on length of a11yLimit message\n    }\n  }, [showA11yLimit]);\n  var summaryContent = /*#__PURE__*/React.createElement(SelectionSummary, {\n    allOptions: allOptions,\n    clearRef: clearRef,\n    disabled: disabled,\n    disabledKey: disabledKey,\n    isSelected: isSelected,\n    labelKey: labelKey,\n    limit: limit,\n    messages: messages,\n    onChange: onChange,\n    onMore: onMore,\n    options: options,\n    search: search,\n    setActiveIndex: setActiveIndex,\n    showSelectedInline: showSelectedInline,\n    value: value,\n    valueKey: valueKey\n  });\n  var helpContent;\n  if (help) {\n    var _theme$selectMultiple;\n    if (typeof help === 'string') helpContent = /*#__PURE__*/React.createElement(Box, {\n      flex: false,\n      pad: (_theme$selectMultiple = theme.selectMultiple) == null || (_theme$selectMultiple = _theme$selectMultiple.help) == null || (_theme$selectMultiple = _theme$selectMultiple.container) == null ? void 0 : _theme$selectMultiple.pad\n    }, /*#__PURE__*/React.createElement(Text, {\n      size: \"small\"\n    }, help));else helpContent = /*#__PURE__*/React.createElement(Box, {\n      flex: false\n    }, help);\n  }\n  if (showSelectedInline) summaryContent = /*#__PURE__*/React.createElement(Box, {\n    direction: \"row\",\n    justify: \"between\",\n    flex: false\n  }, summaryContent, /*#__PURE__*/React.createElement(Box, null, /*#__PURE__*/React.createElement(Button, {\n    fill: \"vertical\",\n    onClick: onClose,\n    a11yTitle: \"Close Select\"\n  }, icon)));\n  return /*#__PURE__*/React.createElement(Keyboard, {\n    onEnter: onSelectOption,\n    onSpace: onSelectOption,\n    onUp: onPreviousOption,\n    onDown: onNextOption,\n    onKeyDown: onKeyDownOption,\n    onEsc: onClose\n  }, /*#__PURE__*/React.createElement(StyledContainer, {\n    ref: ref,\n    id: id ? id + \"__select-drop\" : undefined,\n    dropHeight: dropHeight,\n    a11yTitle: format({\n      id: 'selectMultiple.selectDrop',\n      messages: messages\n    })\n  }, summaryContent, onSearch && /*#__PURE__*/React.createElement(Box, {\n    pad: !customSearchInput ? (_theme$selectMultiple2 = theme.selectMultiple) == null || (_theme$selectMultiple2 = _theme$selectMultiple2.search) == null ? void 0 : _theme$selectMultiple2.pad : undefined,\n    flex: false\n  }, /*#__PURE__*/React.createElement(Keyboard, {\n    onEnter: function onEnter(event) {\n      onNextOption(event);\n    }\n  }, /*#__PURE__*/React.createElement(SelectTextInput, {\n    a11yTitle: format({\n      id: 'selectMultiple.search',\n      messages: messages\n    }),\n    focusIndicator: !customSearchInput,\n    size: \"small\",\n    ref: searchRef,\n    type: \"search\",\n    value: search || '',\n    placeholder: searchPlaceholder,\n    onChange: function onChange(event) {\n      var nextSearch = event.target.value;\n      setSearch(nextSearch);\n      setActiveIndex(-1);\n      onSearch(nextSearch);\n    },\n    onFocus: function onFocus() {\n      return setActiveIndex(-1);\n    }\n  }))), helpContent, (options == null ? void 0 : options.length) > 0 ? /*#__PURE__*/React.createElement(OptionsContainer, {\n    role: \"listbox\",\n    tabIndex: \"-1\",\n    ref: optionsRef,\n    \"aria-multiselectable\": true,\n    onMouseMove: function onMouseMove() {\n      return setKeyboardNavigation(false);\n    },\n    selectMultiple: true // internal prop\n  }, /*#__PURE__*/React.createElement(InfiniteScroll, {\n    items: options,\n    step: theme.select.step,\n    onMore: onMore,\n    replace: replace,\n    show: activeIndex !== -1 ? activeIndex : undefined\n  }, function (option, index, optionRef) {\n    var optionDisabled = isDisabled(index);\n    var optionSelected = value ? arrayIncludes(value, valueKey && valueKey.reduce ? applyKey(option, valueKey) : option, valueKey || labelKey) : false;\n    var optionActive = activeIndex === index;\n    var optionLabel = getOptionLabel(index, options, labelKey || valueKey);\n\n    // Determine whether the label is done as a child or\n    // as an option Button kind property.\n    var child;\n    var textComponent = false;\n    if (children) {\n      child = children(option, index, options, {\n        active: optionActive,\n        disabled: optionDisabled,\n        selected: optionSelected\n      });\n      if (typeof child === 'string' || child.props && child.props.children && typeof child.props.children === 'string') textComponent = true;\n    } else {\n      var _theme$selectMultiple3;\n      child = /*#__PURE__*/React.createElement(CheckBox, {\n        label: /*#__PURE__*/React.createElement(Box, {\n          alignSelf: \"center\",\n          width: \"100%\",\n          align: \"start\"\n        }, optionLabel),\n        pad: (_theme$selectMultiple3 = theme.selectMultiple) == null || (_theme$selectMultiple3 = _theme$selectMultiple3.option) == null ? void 0 : _theme$selectMultiple3.pad,\n        tabIndex: \"-1\",\n        checked: optionSelected,\n        disabled: optionDisabled,\n        inert: inertTrueValue,\n        containerProps: {\n          // in Firefox when we have inert set, the checkbox\n          // click event gets swallowed by the checkbox.\n          // We need the click event to go the the button\n          // around the checkbox so we use pointerEvents =\n          // none. For code clarity we decided an inline\n          // style made sense here.\n          style: {\n            pointerEvents: 'none'\n          }\n        }\n      });\n    }\n    if (!children && search) {\n      var searchText = search.toLowerCase();\n      if (typeof optionLabel === 'string' && optionLabel.toLowerCase().indexOf(searchText) >= 0) {\n        var _theme$selectMultiple4;\n        // code to bold search term in matching options\n        var boldIndex = optionLabel.toLowerCase().indexOf(searchText);\n        var childBeginning = optionLabel.substring(0, boldIndex);\n        var childBold = optionLabel.substring(boldIndex, boldIndex + searchText.length);\n        childBold = /*#__PURE__*/React.createElement(\"b\", null, childBold);\n        var childEnd = optionLabel.substring(boldIndex + searchText.length);\n        child = /*#__PURE__*/React.createElement(CheckBox, {\n          label: /*#__PURE__*/React.createElement(Box, {\n            alignSelf: \"center\",\n            width: \"100%\",\n            align: \"start\",\n            direction: \"row\"\n          }, /*#__PURE__*/React.createElement(Text, null, childBeginning, childBold, childEnd)),\n          pad: (_theme$selectMultiple4 = theme.selectMultiple) == null || (_theme$selectMultiple4 = _theme$selectMultiple4.option) == null ? void 0 : _theme$selectMultiple4.pad,\n          tabIndex: \"-1\",\n          checked: optionSelected,\n          disabled: optionDisabled,\n          inert: inertTrueValue,\n          containerProps: {\n            // in Firefox when we have inert set, the checkbox\n            // click event gets swallowed by the checkbox.\n            // We need the click event to go the the button\n            // around the checkbox so we use pointerEvents =\n            // none. For code clarity we decided an inline\n            // style made sense here.\n            style: {\n              pointerEvents: 'none'\n            }\n          }\n        });\n      }\n    }\n\n    // if we have a child, turn on plain, and hoverIndicator\n    return /*#__PURE__*/React.createElement(SelectOption, {\n      a11yTitle: format({\n        id: optionSelected ? 'selectMultiple.optionSelected' : 'selectMultiple.optionNotSelected',\n        messages: messages,\n        values: {\n          optionLabel: optionLabel\n        }\n      })\n      // lint isn't flagging this but we shouldn't use index\n      // as a key see no-array-index-key lint rule\n      ,\n      key: index\n      // merge optionRef and activeRef\n      ,\n      ref: function ref(node) {\n        // eslint-disable-next-line no-param-reassign\n        if (optionRef) optionRef.current = node;\n        if (optionActive) activeRef.current = node;\n      },\n      tabIndex: optionSelected || activeIndex === index ||\n      // when nothing is selected and entering listbox\n      // first option should be focused\n      value.length === 0 && activeIndex === -1 && index === 0 ? '0' : '-1',\n      role: \"option\",\n      id: \"option\" + index,\n      \"aria-setsize\": options.length,\n      \"aria-posinset\": index + 1,\n      \"aria-selected\": optionSelected,\n      focusIndicator: usingKeyboard,\n      \"aria-disabled\": optionDisabled || undefined,\n      plain: !child ? undefined : true,\n      align: \"start\",\n      kind: !child ? 'option' : undefined,\n      active: optionActive,\n      selected: optionSelected,\n      onMouseOver: !optionDisabled ? onActiveOption(index) : undefined,\n      onClick: !optionDisabled ? selectOption(index) : undefined,\n      onFocus: function onFocus() {\n        return setActiveIndex(index);\n      },\n      textComponent: textComponent\n    }, child);\n  })) : /*#__PURE__*/React.createElement(EmptySearchOption, {\n    emptySearchMessage: emptySearchMessage,\n    selectOptionsStyle: selectOptionsStyle,\n    theme: theme\n  }), usingKeyboard && showA11yLimit && /*#__PURE__*/React.createElement(Box, {\n    height: \"0px\",\n    width: \"0px\",\n    overflow: \"hidden\"\n    // announce when we reach the limit of items\n    // that can be selected\n    ,\n    \"aria-live\": \"assertive\",\n    role: \"alert\"\n  }, showA11yLimit)));\n});\nexport { SelectMultipleContainer };"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}