{"ast":null,"code":"// TODO: share with DataTable, List, Cards, etc.\nvar _datumValue = function datumValue(datum, property) {\n  if (!property) return undefined;\n  var parts = property.split('.');\n  if (parts.length === 1) return datum[property];\n  if (!datum[parts[0]]) return undefined;\n  return _datumValue(datum[parts[0]], parts.slice(1).join('.'));\n};\n\n// This is where we filter the data internally, when the caller doesn't\n// provide an onView.\nexport var filter = function filter(data, view, properties) {\n  var _view$sort, _view$sort2;\n  // from https://stackoverflow.com/a/6300266/8513067\n  var searchExp = view != null && view.search ? new RegExp(view.search.replace(/[#-.]|[[-^]|[?|{}]/g, '\\\\$&'), 'i') : undefined;\n  var searchProperties;\n  if (searchExp && properties) {\n    // if we know where we want to search, look there\n    searchProperties = Object.keys(properties).filter(function (k) {\n      var _properties$k;\n      return !(((_properties$k = properties[k]) == null ? void 0 : _properties$k.search) === false);\n    });\n    // if none specified, look in all defined properties\n    if (searchProperties.length === 0) searchProperties = Object.keys(properties);\n  }\n  var filteredData = data.filter(function (datum) {\n    var matched = true;\n\n    // check whether it matches any search\n    if (searchExp) {\n      var searchWith = function searchWith(property) {\n        var value = _datumValue(datum, property);\n        if (value === undefined) return false;\n        return searchExp.test(value);\n      };\n      if (searchProperties) matched = searchProperties.some(searchWith);else matched = Object.keys(datum).some(searchWith);\n    }\n\n    // check whether it matches any specific values\n    if (matched && view != null && view.properties) {\n      // if any properties don't match, overall not matched\n      matched = !Object.keys(view.properties).some(function (property) {\n        // returning true means it doesn't match the filter,\n        var filterValue = view.properties[property];\n        var value = _datumValue(datum, property);\n\n        // range case\n        if (typeof (filterValue == null ? void 0 : filterValue.min) === 'number' || typeof (filterValue == null ? void 0 : filterValue.max) === 'number') return typeof value !== 'number' || value < filterValue.min || value > filterValue.max;\n\n        // options case\n        if (Array.isArray(filterValue)) {\n          return !filterValue.some(function (f) {\n            // f may be an object with form {label: __, value: __}\n            var isObject = typeof f === 'object';\n            // match f within data value array using .includes()\n            if (Array.isArray(value)) {\n              return isObject ? value.includes(f == null ? void 0 : f.value) : value.includes(f);\n            }\n            // match f with data value using ===\n            return isObject ? (f == null ? void 0 : f.value) === value : f === value;\n          });\n        }\n\n        // presence case\n        if (typeof filterValue === 'boolean') return filterValue === !value;\n\n        // not sure, keep it\n        return false;\n      });\n    }\n    return matched;\n  });\n  if (view != null && (_view$sort = view.sort) != null && _view$sort.property || view != null && (_view$sort2 = view.sort) != null && _view$sort2.direction) {\n    var _view$sort3 = view.sort,\n      property = _view$sort3.property,\n      direction = _view$sort3.direction;\n    var prop = property || filteredData.length && Object.keys(filteredData[0])[0];\n    var sortDesc = direction === 'desc'; // default to asc\n    var before = sortDesc ? -1 : 1;\n    var after = sortDesc ? 1 : -1;\n    filteredData.sort(function (d1, d2) {\n      var d1Val = _datumValue(d1, prop);\n      var d2Val = _datumValue(d2, prop);\n      // sort strings via locale case insensitive\n      if (typeof d1Val === 'string' && typeof d2Val === 'string' || typeof d1Val === 'string' && !d2Val || typeof d2Val === 'string' && !d1Val) {\n        var sortResult = (d1Val || '').localeCompare(d2Val || '', undefined, {\n          sensitivity: 'base'\n        });\n        return sortDesc ? -sortResult : sortResult;\n      }\n      // numbers are easier to sort\n      if (d1Val > d2Val) return before;\n      if (d1Val < d2Val) return after;\n      return 0;\n    });\n  }\n  var pagedData;\n  if (view != null && view.step) {\n    var _view$page;\n    var start = view.step * (((_view$page = view == null ? void 0 : view.page) != null ? _view$page : 1) - 1);\n    pagedData = filteredData.slice(start, start + view.step);\n  }\n  return {\n    unfilteredData: data,\n    data: pagedData || filteredData,\n    total: data.length,\n    filteredTotal: filteredData.length\n  };\n};","map":{"version":3,"names":["_datumValue","datumValue","datum","property","undefined","parts","split","length","slice","join","filter","data","view","properties","_view$sort","_view$sort2","searchExp","search","RegExp","replace","searchProperties","Object","keys","k","_properties$k","filteredData","matched","searchWith","value","test","some","filterValue","min","max","Array","isArray","f","isObject","includes","sort","direction","_view$sort3","prop","sortDesc","before","after","d1","d2","d1Val","d2Val","sortResult","localeCompare","sensitivity","pagedData","step","_view$page","start","page","unfilteredData","total","filteredTotal"],"sources":["C:/Users/michaejo/Documents/GitRepos/player-api/node_modules/grommet/es6/components/Data/filter.js"],"sourcesContent":["// TODO: share with DataTable, List, Cards, etc.\nvar _datumValue = function datumValue(datum, property) {\n  if (!property) return undefined;\n  var parts = property.split('.');\n  if (parts.length === 1) return datum[property];\n  if (!datum[parts[0]]) return undefined;\n  return _datumValue(datum[parts[0]], parts.slice(1).join('.'));\n};\n\n// This is where we filter the data internally, when the caller doesn't\n// provide an onView.\nexport var filter = function filter(data, view, properties) {\n  var _view$sort, _view$sort2;\n  // from https://stackoverflow.com/a/6300266/8513067\n  var searchExp = view != null && view.search ? new RegExp(view.search.replace(/[#-.]|[[-^]|[?|{}]/g, '\\\\$&'), 'i') : undefined;\n  var searchProperties;\n  if (searchExp && properties) {\n    // if we know where we want to search, look there\n    searchProperties = Object.keys(properties).filter(function (k) {\n      var _properties$k;\n      return !(((_properties$k = properties[k]) == null ? void 0 : _properties$k.search) === false);\n    });\n    // if none specified, look in all defined properties\n    if (searchProperties.length === 0) searchProperties = Object.keys(properties);\n  }\n  var filteredData = data.filter(function (datum) {\n    var matched = true;\n\n    // check whether it matches any search\n    if (searchExp) {\n      var searchWith = function searchWith(property) {\n        var value = _datumValue(datum, property);\n        if (value === undefined) return false;\n        return searchExp.test(value);\n      };\n      if (searchProperties) matched = searchProperties.some(searchWith);else matched = Object.keys(datum).some(searchWith);\n    }\n\n    // check whether it matches any specific values\n    if (matched && view != null && view.properties) {\n      // if any properties don't match, overall not matched\n      matched = !Object.keys(view.properties).some(function (property) {\n        // returning true means it doesn't match the filter,\n        var filterValue = view.properties[property];\n        var value = _datumValue(datum, property);\n\n        // range case\n        if (typeof (filterValue == null ? void 0 : filterValue.min) === 'number' || typeof (filterValue == null ? void 0 : filterValue.max) === 'number') return typeof value !== 'number' || value < filterValue.min || value > filterValue.max;\n\n        // options case\n        if (Array.isArray(filterValue)) {\n          return !filterValue.some(function (f) {\n            // f may be an object with form {label: __, value: __}\n            var isObject = typeof f === 'object';\n            // match f within data value array using .includes()\n            if (Array.isArray(value)) {\n              return isObject ? value.includes(f == null ? void 0 : f.value) : value.includes(f);\n            }\n            // match f with data value using ===\n            return isObject ? (f == null ? void 0 : f.value) === value : f === value;\n          });\n        }\n\n        // presence case\n        if (typeof filterValue === 'boolean') return filterValue === !value;\n\n        // not sure, keep it\n        return false;\n      });\n    }\n    return matched;\n  });\n  if (view != null && (_view$sort = view.sort) != null && _view$sort.property || view != null && (_view$sort2 = view.sort) != null && _view$sort2.direction) {\n    var _view$sort3 = view.sort,\n      property = _view$sort3.property,\n      direction = _view$sort3.direction;\n    var prop = property || filteredData.length && Object.keys(filteredData[0])[0];\n    var sortDesc = direction === 'desc'; // default to asc\n    var before = sortDesc ? -1 : 1;\n    var after = sortDesc ? 1 : -1;\n    filteredData.sort(function (d1, d2) {\n      var d1Val = _datumValue(d1, prop);\n      var d2Val = _datumValue(d2, prop);\n      // sort strings via locale case insensitive\n      if (typeof d1Val === 'string' && typeof d2Val === 'string' || typeof d1Val === 'string' && !d2Val || typeof d2Val === 'string' && !d1Val) {\n        var sortResult = (d1Val || '').localeCompare(d2Val || '', undefined, {\n          sensitivity: 'base'\n        });\n        return sortDesc ? -sortResult : sortResult;\n      }\n      // numbers are easier to sort\n      if (d1Val > d2Val) return before;\n      if (d1Val < d2Val) return after;\n      return 0;\n    });\n  }\n  var pagedData;\n  if (view != null && view.step) {\n    var _view$page;\n    var start = view.step * (((_view$page = view == null ? void 0 : view.page) != null ? _view$page : 1) - 1);\n    pagedData = filteredData.slice(start, start + view.step);\n  }\n  return {\n    unfilteredData: data,\n    data: pagedData || filteredData,\n    total: data.length,\n    filteredTotal: filteredData.length\n  };\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}