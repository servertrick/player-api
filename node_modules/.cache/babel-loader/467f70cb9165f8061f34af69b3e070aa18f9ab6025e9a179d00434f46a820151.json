{"ast":null,"code":"var _excluded = [\"a11yTitle\", \"aria-label\", \"aria-labelledby\", \"alignSelf\", \"children\", \"defaultValue\", \"disabled\", \"disabledKey\", \"dropAlign\", \"dropHeight\", \"dropProps\", \"dropTarget\", \"emptySearchMessage\", \"focusIndicator\", \"gridArea\", \"help\", \"id\", \"icon\", \"labelKey\", \"limit\", \"margin\", \"messages\", \"name\", \"onBlur\", \"onChange\", \"onClick\", \"onClose\", \"onFocus\", \"onKeyDown\", \"onMore\", \"onOpen\", \"onSearch\", \"open\", \"options\", \"placeholder\", \"plain\", \"replace\", \"searchPlaceholder\", \"size\", \"sortSelectedOnClose\", \"value\", \"valueKey\", \"valueLabel\", \"showSelectedInline\", \"width\"];\nfunction _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nfunction _objectWithoutPropertiesLoose(r, e) {\n  if (null == r) return {};\n  var t = {};\n  for (var n in r) if ({}.hasOwnProperty.call(r, n)) {\n    if (-1 !== e.indexOf(n)) continue;\n    t[n] = r[n];\n  }\n  return t;\n}\nimport React, { forwardRef, isValidElement, useCallback, useContext, useMemo, useState, useRef, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { controlBorderStyle, useKeyboard, useForwardedRef } from '../../utils';\nimport { Box } from '../Box';\nimport { DropButton } from '../DropButton';\nimport { Keyboard } from '../Keyboard';\nimport { FormContext } from '../Form/FormContext';\nimport { SelectMultipleValue } from './SelectMultipleValue';\nimport { SelectMultipleContainer } from './SelectMultipleContainer';\nimport { HiddenInput, SelectTextInput, StyledSelectDropButton } from '../Select/StyledSelect';\nimport { applyKey, getNormalizedValue, changeEvent, getSelectIcon, getIconColor, getDisplayLabelKey, arrayIncludes, inertTrueValue, selectInputId } from '../Select/utils';\nimport { DefaultSelectTextInput } from '../Select/DefaultSelectTextInput';\nimport { MessageContext } from '../../contexts/MessageContext';\nimport { SelectMultiplePropTypes } from './propTypes';\nimport { useThemeValue } from '../../utils/useThemeValue';\nvar StyledSelectBox = styled(Box).withConfig({\n  displayName: \"SelectMultiple__StyledSelectBox\",\n  componentId: \"sc-18zwyth-0\"\n})([\"\", \";\", \";\", \";\"], function (props) {\n  return !props.plainSelect && controlBorderStyle;\n}, function (props) {\n  var _props$theme$select;\n  return (_props$theme$select = props.theme.select) == null || (_props$theme$select = _props$theme$select.control) == null ? void 0 : _props$theme$select.extend;\n}, function (props) {\n  var _props$theme$select$c;\n  return props.open && ((_props$theme$select$c = props.theme.select.control) == null ? void 0 : _props$theme$select$c.open);\n});\nvar SelectMultiple = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var a11yTitle = _ref.a11yTitle,\n    ariaLabel = _ref['aria-label'],\n    ariaLabelledByProp = _ref['aria-labelledby'],\n    alignSelf = _ref.alignSelf,\n    children = _ref.children,\n    defaultValue = _ref.defaultValue,\n    disabled = _ref.disabled,\n    disabledKey = _ref.disabledKey,\n    dropAlignProp = _ref.dropAlign,\n    dropHeight = _ref.dropHeight,\n    dropProps = _ref.dropProps,\n    dropTarget = _ref.dropTarget,\n    emptySearchMessage = _ref.emptySearchMessage,\n    focusIndicator = _ref.focusIndicator,\n    gridArea = _ref.gridArea,\n    help = _ref.help,\n    id = _ref.id,\n    icon = _ref.icon,\n    labelKey = _ref.labelKey,\n    limit = _ref.limit,\n    margin = _ref.margin,\n    messages = _ref.messages,\n    name = _ref.name,\n    onBlur = _ref.onBlur,\n    onChange = _ref.onChange,\n    onClick = _ref.onClick,\n    onClose = _ref.onClose,\n    onFocus = _ref.onFocus,\n    onKeyDown = _ref.onKeyDown,\n    onMore = _ref.onMore,\n    onOpen = _ref.onOpen,\n    onSearch = _ref.onSearch,\n    openProp = _ref.open,\n    optionsProp = _ref.options,\n    placeholder = _ref.placeholder,\n    plain = _ref.plain,\n    replace = _ref.replace,\n    searchPlaceholder = _ref.searchPlaceholder,\n    size = _ref.size,\n    _ref$sortSelectedOnCl = _ref.sortSelectedOnClose,\n    sortSelectedOnClose = _ref$sortSelectedOnCl === void 0 ? true : _ref$sortSelectedOnCl,\n    valueProp = _ref.value,\n    valueKey = _ref.valueKey,\n    valueLabel = _ref.valueLabel,\n    _ref$showSelectedInli = _ref.showSelectedInline,\n    showSelectedInline = _ref$showSelectedInli === void 0 ? false : _ref$showSelectedInli,\n    width = _ref.width,\n    rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n  var _useThemeValue = useThemeValue(),\n    theme = _useThemeValue.theme,\n    passThemeFlag = _useThemeValue.passThemeFlag;\n  var inputRef = useRef();\n  var formContext = useContext(FormContext);\n  var _useContext = useContext(MessageContext),\n    format = _useContext.format;\n  var selectBoxRef = useRef();\n  var dropButtonRef = useForwardedRef(ref);\n  var usingKeyboard = useKeyboard();\n  var formFieldData = formContext == null ? void 0 : formContext.useFormField({});\n  var dropAlign = useMemo(function () {\n    return dropAlignProp || (showSelectedInline ? {\n      top: 'top',\n      right: 'right',\n      left: 'left'\n    } : {\n      top: 'bottom',\n      left: 'left'\n    });\n  }, [dropAlignProp, showSelectedInline]);\n\n  // value is used for what we receive in valueProp and the basis for\n  // what we send with onChange\n  // When 'valueKey' sets 'reduce', the value(s) here should match\n  // what the 'valueKey' would return for the corresponding\n  // selected option object.\n  // Otherwise, the value(s) should match the selected options.\n\n  var _formContext$useFormI = formContext.useFormInput({\n      name: name,\n      value: valueProp,\n      initialValue: defaultValue || ''\n    }),\n    value = _formContext$useFormI[0],\n    setValue = _formContext$useFormI[1];\n  var _useState = useState(),\n    ariaLabelledBy = _useState[0],\n    setAriaLabelledBy = _useState[1];\n  useEffect(function () {\n    if (formFieldData != null && formFieldData.inForm && id && !ariaLabel && !placeholder) {\n      var labelElement = document.getElementById(\"grommet-\" + id + \"__input__label\");\n      if (labelElement) {\n        setAriaLabelledBy(\"grommet-\" + id + \"__input__label \" + id);\n      }\n    }\n  }, [formFieldData == null ? void 0 : formFieldData.inForm, id, ariaLabel, placeholder]);\n\n  // normalizedValue is the value mapped with any valueKey applied\n  // When the options array contains objects, this property indicates how\n  // to retrieve the value of each option.\n  // If a string is provided, it is used as the key to retrieve a\n  // property of an option object.\n  // If a function is provided, it is called with the option and should\n  // return the value.\n  // If reduce is true, this value will be used for the 'value'\n  // delivered via 'onChange'.\n  var normalizedValue = useMemo(function () {\n    return getNormalizedValue(value, valueKey);\n  }, [value, valueKey]);\n  // search input value\n  var _useState2 = useState(),\n    search = _useState2[0],\n    setSearch = _useState2[1];\n  // All select option indices and values\n  var _useState3 = useState(optionsProp),\n    allOptions = _useState3[0],\n    setAllOptions = _useState3[1];\n  var _useState4 = useState(),\n    orderedOptions = _useState4[0],\n    setOrderedOptions = _useState4[1];\n  // Track changes to options property, except when options are being\n  // updated due to search activity. Allows option's initial index value\n  // to be referenced when filtered by search.\n  useEffect(function () {\n    if (!search) setAllOptions(optionsProp);\n  }, [optionsProp, search]);\n  useEffect(function () {\n    if (search && optionsProp && optionsProp.length > 0) {\n      var additionalOptions = [].concat(allOptions);\n      optionsProp.forEach(function (i) {\n        return !additionalOptions.some(function (j) {\n          return typeof i === 'object' ? applyKey(i, valueKey) === applyKey(j, valueKey) : i === j;\n        }) && additionalOptions.push(i);\n      });\n      if (allOptions.length !== additionalOptions.length) setAllOptions(additionalOptions);\n    }\n  }, [allOptions, optionsProp, search, valueKey]);\n  useEffect(function () {\n    if (sortSelectedOnClose) setOrderedOptions(optionsProp);\n  }, [optionsProp, sortSelectedOnClose]);\n\n  // the option indexes present in the value\n  var optionIndexesInValue = useMemo(function () {\n    var result = [];\n    if (!Array.isArray(normalizedValue)) {\n      return result;\n    }\n    normalizedValue.forEach(function (v) {\n      var index = allOptions.map(function (option) {\n        return applyKey(option, valueKey);\n      }).indexOf(v);\n      if (index !== -1) result.push(index);\n    });\n    return result;\n  }, [allOptions, valueKey, normalizedValue]);\n  var _useState5 = useState(openProp),\n    open = _useState5[0],\n    setOpen = _useState5[1];\n  useEffect(function () {\n    return setOpen(openProp);\n  }, [openProp]);\n  var onRequestOpen = useCallback(function () {\n    if (open) return;\n    setOpen(true);\n    if (onOpen) onOpen();\n  }, [onOpen, open]);\n\n  // On drop close if sortSelectedOnClose is true, sort options so that\n  // selected options appear first, followed by unselected options.\n  useEffect(function () {\n    if (sortSelectedOnClose && value && !open) {\n      var selectedOptions = optionsProp.filter(function (option) {\n        return arrayIncludes(value, valueKey && valueKey.reduce ? applyKey(option, valueKey) : option, valueKey || labelKey);\n      });\n      var unselectedOptions = optionsProp.filter(function (i) {\n        return !arrayIncludes(selectedOptions, i, valueKey || labelKey);\n      });\n      var nextOrderedOptions = selectedOptions.concat(unselectedOptions);\n      setOrderedOptions(nextOrderedOptions);\n    }\n  }, [labelKey, open, sortSelectedOnClose, optionsProp, value, valueKey]);\n  var onRequestClose = useCallback(function () {\n    setOpen(false);\n    if (onClose) onClose();\n    setSearch();\n  }, [onClose]);\n  var triggerChangeEvent = useCallback(function (nextValue) {\n    return changeEvent(inputRef, nextValue);\n  }, []);\n  var onSelectChange = useCallback(function (event, _ref2) {\n    var option = _ref2.option,\n      nextValue = _ref2.value;\n    // nextValue must not be of type object to set value directly on the\n    // input. if it is an object, then the user has not provided necessary\n    // props to reduce object option\n    if (typeof nextValue !== 'object' && nextValue !== event.target.value && inputRef.current) {\n      // select registers changing option as a click event or keydown.\n      // when in a form, we need to programatically trigger a change\n      // event in order for the change event to be registered upstream\n      // necessary for change validation in form\n      triggerChangeEvent(nextValue);\n    }\n    setValue(nextValue);\n    if (onChange) {\n      event.persist();\n      var adjustedEvent;\n      // support for native event used by Preact\n      if (event instanceof Event) {\n        adjustedEvent = new event.constructor(event.type, event);\n        Object.defineProperties(adjustedEvent, {\n          target: {\n            value: inputRef.current\n          },\n          value: {\n            value: nextValue\n          },\n          option: {\n            value: option\n          }\n        });\n      } else {\n        adjustedEvent = event;\n        adjustedEvent.target = inputRef.current;\n        adjustedEvent.value = nextValue;\n        adjustedEvent.option = option;\n      }\n      onChange(adjustedEvent);\n    }\n  }, [onChange, setValue, triggerChangeEvent]);\n  var SelectIcon = getSelectIcon(icon, theme, open);\n\n  // element to show, trumps inputValue\n  var selectValue = useMemo(function () {\n    var result;\n    if (valueLabel) {\n      result = value && valueLabel instanceof Function ? valueLabel(value) : valueLabel;\n    } else if ((value == null ? void 0 : value.length) > 0 && showSelectedInline) {\n      result = /*#__PURE__*/React.createElement(SelectMultipleValue, {\n        allOptions: allOptions,\n        disabled: disabled,\n        disabledKey: disabledKey,\n        dropButtonRef: dropButtonRef,\n        labelKey: labelKey,\n        messages: messages,\n        onRequestOpen: onRequestOpen,\n        onSelectChange: onSelectChange,\n        theme: theme,\n        value: value,\n        valueKey: valueKey\n      }, children);\n    }\n    return result;\n  }, [allOptions, children, disabled, disabledKey, dropButtonRef, labelKey, messages, onRequestOpen, onSelectChange, showSelectedInline, theme, value, valueKey, valueLabel]);\n  var displayLabelKey = useMemo(function () {\n    return getDisplayLabelKey(labelKey, allOptions, optionIndexesInValue, selectValue);\n  }, [labelKey, allOptions, optionIndexesInValue, selectValue]);\n\n  // text to show\n  // When the options array contains objects, this property indicates how\n  // to retrieve the value of each option.\n  // If a string is provided, it is used as the key to retrieve a\n  // property of an option object.\n  // If a function is provided, it is called with the option and should\n  // return the value.\n  // If reduce is true, this value will be used for the 'value'\n  // delivered via 'onChange'.\n  var inputValue = useMemo(function () {\n    if (!selectValue) {\n      if (optionIndexesInValue.length === 0) return '';\n      if (optionIndexesInValue.length === 1) return applyKey(allOptions[optionIndexesInValue[0]], labelKey);\n      // keeping messages.multiple for backwards compatibility\n      if (messages != null && messages.multiple && !messages.summarizedValue) {\n        return format({\n          id: 'select.multiple',\n          messages: messages\n        });\n      }\n      return format({\n        id: 'selectMultiple.summarizedValue',\n        messages: messages,\n        values: {\n          selected: optionIndexesInValue.length,\n          total: allOptions.length\n        }\n      });\n    }\n    return undefined;\n  }, [selectValue, optionIndexesInValue, allOptions, labelKey, format, messages]);\n  var iconColor = getIconColor(theme);\n  var displaySelectIcon = SelectIcon && /*#__PURE__*/React.createElement(Box, {\n    alignSelf: \"center\",\n    margin: theme.select.icons.margin,\n    width: {\n      min: 'auto'\n    }\n  }, /*#__PURE__*/isValidElement(SelectIcon) ? SelectIcon : /*#__PURE__*/React.createElement(SelectIcon, {\n    color: iconColor,\n    size: size\n  }));\n  var dropContent = /*#__PURE__*/React.createElement(SelectMultipleContainer, {\n    allOptions: allOptions,\n    disabled: disabled,\n    disabledKey: disabledKey,\n    dropHeight: dropHeight,\n    emptySearchMessage: emptySearchMessage,\n    help: help,\n    icon: displaySelectIcon,\n    id: id,\n    labelKey: labelKey,\n    limit: limit,\n    messages: messages,\n    onChange: onSelectChange,\n    onClose: onRequestClose,\n    onKeyDown: onKeyDown,\n    onMore: onMore,\n    onSearch: onSearch,\n    options: orderedOptions || optionsProp,\n    optionIndexesInValue: optionIndexesInValue,\n    replace: replace,\n    searchPlaceholder: searchPlaceholder,\n    search: search,\n    setSearch: setSearch,\n    usingKeyboard: usingKeyboard,\n    value: value,\n    valueKey: valueKey,\n    showSelectedInline: showSelectedInline\n  }, children);\n  var dropButtonProps = {\n    ref: dropButtonRef,\n    a11yTitle: (ariaLabel || a11yTitle || placeholder || format({\n      id: 'selectMultiple.open',\n      messages: messages\n    })) + \". \" + format({\n      id: 'selectMultiple.selected',\n      values: {\n        selected: (value == null ? void 0 : value.length) || 0,\n        total: allOptions.length\n      }\n    }),\n    'aria-expanded': Boolean(open),\n    'aria-haspopup': 'listbox',\n    id: id,\n    disabled: disabled === true || undefined,\n    open: open,\n    focusIndicator: focusIndicator,\n    onFocus: onFocus,\n    onBlur: onBlur,\n    gridArea: gridArea,\n    margin: margin,\n    onOpen: onRequestOpen,\n    onClose: onRequestClose,\n    onClick: onClick,\n    plainSelect: plain,\n    plain: plain,\n    // Button should be plain\n    dropProps: dropProps,\n    dropContent: dropContent,\n    theme: theme\n  };\n  return /*#__PURE__*/React.createElement(Keyboard, {\n    onDown: onRequestOpen,\n    onUp: onRequestOpen\n  }, showSelectedInline ? /*#__PURE__*/React.createElement(StyledSelectBox, _extends({\n    disabled: disabled === true || undefined,\n    alignSelf: alignSelf,\n    direction: \"row\",\n    alignContent: \"start\",\n    background: theme.select.background,\n    ref: selectBoxRef,\n    flex: false,\n    plainSelect: plain,\n    width: width\n  }, passThemeFlag), /*#__PURE__*/React.createElement(Box, {\n    width: \"100%\"\n  }, /*#__PURE__*/React.createElement(DropButton, _extends({\n    fill: \"horizontal\",\n    alignSelf: \"start\"\n  }, dropButtonProps, {\n    dropAlign: dropAlign,\n    dropTarget: dropTarget || selectBoxRef.current\n  }), selectValue || displayLabelKey ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Box, {\n    direction: \"row\"\n  }, /*#__PURE__*/React.createElement(SelectTextInput, _extends({\n    a11yTitle: ariaLabel || a11yTitle,\n    defaultCursor: disabled === true || undefined,\n    focusIndicator: false,\n    id: id ? selectInputId(id) : undefined,\n    inert: inertTrueValue,\n    name: name,\n    width: \"100%\"\n  }, rest, {\n    tabIndex: \"-1\",\n    type: \"text\",\n    placeholder: !value || (value == null ? void 0 : value.length) === 0 ? placeholder || selectValue || displayLabelKey : format({\n      id: onMore ? 'selectMultiple.selected' : 'selectMultiple.selectedOfTotal',\n      messages: messages,\n      values: _extends({\n        selected: (value == null ? void 0 : value.length) || 0\n      }, !onMore ? {\n        total: allOptions.length\n      } : {})\n    }),\n    plain: true,\n    readOnly: true,\n    value: \"\",\n    theme: theme\n  })), displaySelectIcon), /*#__PURE__*/React.createElement(HiddenInput, {\n    type: \"text\",\n    name: name,\n    id: id ? selectInputId(id) : undefined,\n    inert: inertTrueValue,\n    value: inputValue,\n    ref: inputRef,\n    readOnly: true\n  })) : /*#__PURE__*/React.createElement(Box, {\n    direction: \"row\"\n  }, /*#__PURE__*/React.createElement(DefaultSelectTextInput, _extends({\n    a11yTitle: ariaLabel || a11yTitle,\n    disabled: disabled,\n    id: id,\n    inert: inertTrueValue,\n    name: name,\n    ref: inputRef,\n    placeholder: placeholder || 'Select',\n    value: inputValue,\n    size: size,\n    theme: theme\n  }, rest)), displaySelectIcon)), !open && (value == null ? void 0 : value.length) > 0 && (selectValue || displayLabelKey))) : /*#__PURE__*/React.createElement(Box, {\n    width: width\n  }, /*#__PURE__*/React.createElement(StyledSelectDropButton, _extends({}, dropButtonProps, {\n    dropAlign: dropAlign,\n    dropTarget: dropTarget,\n    alignSelf: alignSelf,\n    tabIndex: \"0\",\n    \"aria-labelledby\": ariaLabelledByProp || ariaLabelledBy\n  }), /*#__PURE__*/React.createElement(Box, {\n    align: \"center\",\n    direction: \"row\",\n    justify: \"between\",\n    background: theme.select.background\n  }, /*#__PURE__*/React.createElement(Box, {\n    direction: \"row\",\n    flex: true,\n    basis: \"auto\"\n  }, selectValue || displayLabelKey ? /*#__PURE__*/React.createElement(React.Fragment, null, selectValue || displayLabelKey, /*#__PURE__*/React.createElement(HiddenInput, {\n    type: \"text\",\n    name: name,\n    id: id ? selectInputId(id) : undefined,\n    inert: inertTrueValue,\n    value: inputValue,\n    ref: inputRef,\n    readOnly: true\n  })) : /*#__PURE__*/React.createElement(DefaultSelectTextInput, _extends({\n    a11yTitle: ariaLabel || a11yTitle,\n    disabled: disabled,\n    id: id,\n    inert: inertTrueValue,\n    name: name,\n    ref: inputRef,\n    placeholder: placeholder,\n    value: inputValue,\n    size: size,\n    theme: theme\n  }, rest))), displaySelectIcon))));\n});\nSelectMultiple.displayName = 'SelectMultiple';\nSelectMultiple.propTypes = SelectMultiplePropTypes;\nexport { SelectMultiple };","map":{"version":3,"names":["_excluded","_extends","Object","assign","bind","n","e","arguments","length","t","r","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","indexOf","React","forwardRef","isValidElement","useCallback","useContext","useMemo","useState","useRef","useEffect","styled","controlBorderStyle","useKeyboard","useForwardedRef","Box","DropButton","Keyboard","FormContext","SelectMultipleValue","SelectMultipleContainer","HiddenInput","SelectTextInput","StyledSelectDropButton","applyKey","getNormalizedValue","changeEvent","getSelectIcon","getIconColor","getDisplayLabelKey","arrayIncludes","inertTrueValue","selectInputId","DefaultSelectTextInput","MessageContext","SelectMultiplePropTypes","useThemeValue","StyledSelectBox","withConfig","displayName","componentId","props","plainSelect","_props$theme$select","theme","select","control","extend","_props$theme$select$c","open","SelectMultiple","_ref","ref","a11yTitle","ariaLabel","ariaLabelledByProp","alignSelf","children","defaultValue","disabled","disabledKey","dropAlignProp","dropAlign","dropHeight","dropProps","dropTarget","emptySearchMessage","focusIndicator","gridArea","help","id","icon","labelKey","limit","margin","messages","name","onBlur","onChange","onClick","onClose","onFocus","onKeyDown","onMore","onOpen","onSearch","openProp","optionsProp","options","placeholder","plain","replace","searchPlaceholder","size","_ref$sortSelectedOnCl","sortSelectedOnClose","valueProp","value","valueKey","valueLabel","_ref$showSelectedInli","showSelectedInline","width","rest","_useThemeValue","passThemeFlag","inputRef","formContext","_useContext","format","selectBoxRef","dropButtonRef","usingKeyboard","formFieldData","useFormField","top","right","left","_formContext$useFormI","useFormInput","initialValue","setValue","_useState","ariaLabelledBy","setAriaLabelledBy","inForm","labelElement","document","getElementById","normalizedValue","_useState2","search","setSearch","_useState3","allOptions","setAllOptions","_useState4","orderedOptions","setOrderedOptions","additionalOptions","concat","forEach","i","some","j","push","optionIndexesInValue","result","Array","isArray","v","index","map","option","_useState5","setOpen","onRequestOpen","selectedOptions","filter","reduce","unselectedOptions","nextOrderedOptions","onRequestClose","triggerChangeEvent","nextValue","onSelectChange","event","_ref2","target","current","persist","adjustedEvent","Event","constructor","type","defineProperties","SelectIcon","selectValue","Function","createElement","displayLabelKey","inputValue","multiple","summarizedValue","values","selected","total","undefined","iconColor","displaySelectIcon","icons","min","color","dropContent","dropButtonProps","Boolean","onDown","onUp","direction","alignContent","background","flex","fill","Fragment","defaultCursor","inert","tabIndex","readOnly","align","justify","basis","propTypes"],"sources":["C:/Users/michaejo/Documents/GitRepos/player-api/node_modules/grommet/es6/components/SelectMultiple/SelectMultiple.js"],"sourcesContent":["var _excluded = [\"a11yTitle\", \"aria-label\", \"aria-labelledby\", \"alignSelf\", \"children\", \"defaultValue\", \"disabled\", \"disabledKey\", \"dropAlign\", \"dropHeight\", \"dropProps\", \"dropTarget\", \"emptySearchMessage\", \"focusIndicator\", \"gridArea\", \"help\", \"id\", \"icon\", \"labelKey\", \"limit\", \"margin\", \"messages\", \"name\", \"onBlur\", \"onChange\", \"onClick\", \"onClose\", \"onFocus\", \"onKeyDown\", \"onMore\", \"onOpen\", \"onSearch\", \"open\", \"options\", \"placeholder\", \"plain\", \"replace\", \"searchPlaceholder\", \"size\", \"sortSelectedOnClose\", \"value\", \"valueKey\", \"valueLabel\", \"showSelectedInline\", \"width\"];\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nfunction _objectWithoutPropertiesLoose(r, e) { if (null == r) return {}; var t = {}; for (var n in r) if ({}.hasOwnProperty.call(r, n)) { if (-1 !== e.indexOf(n)) continue; t[n] = r[n]; } return t; }\nimport React, { forwardRef, isValidElement, useCallback, useContext, useMemo, useState, useRef, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { controlBorderStyle, useKeyboard, useForwardedRef } from '../../utils';\nimport { Box } from '../Box';\nimport { DropButton } from '../DropButton';\nimport { Keyboard } from '../Keyboard';\nimport { FormContext } from '../Form/FormContext';\nimport { SelectMultipleValue } from './SelectMultipleValue';\nimport { SelectMultipleContainer } from './SelectMultipleContainer';\nimport { HiddenInput, SelectTextInput, StyledSelectDropButton } from '../Select/StyledSelect';\nimport { applyKey, getNormalizedValue, changeEvent, getSelectIcon, getIconColor, getDisplayLabelKey, arrayIncludes, inertTrueValue, selectInputId } from '../Select/utils';\nimport { DefaultSelectTextInput } from '../Select/DefaultSelectTextInput';\nimport { MessageContext } from '../../contexts/MessageContext';\nimport { SelectMultiplePropTypes } from './propTypes';\nimport { useThemeValue } from '../../utils/useThemeValue';\nvar StyledSelectBox = styled(Box).withConfig({\n  displayName: \"SelectMultiple__StyledSelectBox\",\n  componentId: \"sc-18zwyth-0\"\n})([\"\", \";\", \";\", \";\"], function (props) {\n  return !props.plainSelect && controlBorderStyle;\n}, function (props) {\n  var _props$theme$select;\n  return (_props$theme$select = props.theme.select) == null || (_props$theme$select = _props$theme$select.control) == null ? void 0 : _props$theme$select.extend;\n}, function (props) {\n  var _props$theme$select$c;\n  return props.open && ((_props$theme$select$c = props.theme.select.control) == null ? void 0 : _props$theme$select$c.open);\n});\nvar SelectMultiple = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var a11yTitle = _ref.a11yTitle,\n    ariaLabel = _ref['aria-label'],\n    ariaLabelledByProp = _ref['aria-labelledby'],\n    alignSelf = _ref.alignSelf,\n    children = _ref.children,\n    defaultValue = _ref.defaultValue,\n    disabled = _ref.disabled,\n    disabledKey = _ref.disabledKey,\n    dropAlignProp = _ref.dropAlign,\n    dropHeight = _ref.dropHeight,\n    dropProps = _ref.dropProps,\n    dropTarget = _ref.dropTarget,\n    emptySearchMessage = _ref.emptySearchMessage,\n    focusIndicator = _ref.focusIndicator,\n    gridArea = _ref.gridArea,\n    help = _ref.help,\n    id = _ref.id,\n    icon = _ref.icon,\n    labelKey = _ref.labelKey,\n    limit = _ref.limit,\n    margin = _ref.margin,\n    messages = _ref.messages,\n    name = _ref.name,\n    onBlur = _ref.onBlur,\n    onChange = _ref.onChange,\n    onClick = _ref.onClick,\n    onClose = _ref.onClose,\n    onFocus = _ref.onFocus,\n    onKeyDown = _ref.onKeyDown,\n    onMore = _ref.onMore,\n    onOpen = _ref.onOpen,\n    onSearch = _ref.onSearch,\n    openProp = _ref.open,\n    optionsProp = _ref.options,\n    placeholder = _ref.placeholder,\n    plain = _ref.plain,\n    replace = _ref.replace,\n    searchPlaceholder = _ref.searchPlaceholder,\n    size = _ref.size,\n    _ref$sortSelectedOnCl = _ref.sortSelectedOnClose,\n    sortSelectedOnClose = _ref$sortSelectedOnCl === void 0 ? true : _ref$sortSelectedOnCl,\n    valueProp = _ref.value,\n    valueKey = _ref.valueKey,\n    valueLabel = _ref.valueLabel,\n    _ref$showSelectedInli = _ref.showSelectedInline,\n    showSelectedInline = _ref$showSelectedInli === void 0 ? false : _ref$showSelectedInli,\n    width = _ref.width,\n    rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n  var _useThemeValue = useThemeValue(),\n    theme = _useThemeValue.theme,\n    passThemeFlag = _useThemeValue.passThemeFlag;\n  var inputRef = useRef();\n  var formContext = useContext(FormContext);\n  var _useContext = useContext(MessageContext),\n    format = _useContext.format;\n  var selectBoxRef = useRef();\n  var dropButtonRef = useForwardedRef(ref);\n  var usingKeyboard = useKeyboard();\n  var formFieldData = formContext == null ? void 0 : formContext.useFormField({});\n  var dropAlign = useMemo(function () {\n    return dropAlignProp || (showSelectedInline ? {\n      top: 'top',\n      right: 'right',\n      left: 'left'\n    } : {\n      top: 'bottom',\n      left: 'left'\n    });\n  }, [dropAlignProp, showSelectedInline]);\n\n  // value is used for what we receive in valueProp and the basis for\n  // what we send with onChange\n  // When 'valueKey' sets 'reduce', the value(s) here should match\n  // what the 'valueKey' would return for the corresponding\n  // selected option object.\n  // Otherwise, the value(s) should match the selected options.\n\n  var _formContext$useFormI = formContext.useFormInput({\n      name: name,\n      value: valueProp,\n      initialValue: defaultValue || ''\n    }),\n    value = _formContext$useFormI[0],\n    setValue = _formContext$useFormI[1];\n  var _useState = useState(),\n    ariaLabelledBy = _useState[0],\n    setAriaLabelledBy = _useState[1];\n  useEffect(function () {\n    if (formFieldData != null && formFieldData.inForm && id && !ariaLabel && !placeholder) {\n      var labelElement = document.getElementById(\"grommet-\" + id + \"__input__label\");\n      if (labelElement) {\n        setAriaLabelledBy(\"grommet-\" + id + \"__input__label \" + id);\n      }\n    }\n  }, [formFieldData == null ? void 0 : formFieldData.inForm, id, ariaLabel, placeholder]);\n\n  // normalizedValue is the value mapped with any valueKey applied\n  // When the options array contains objects, this property indicates how\n  // to retrieve the value of each option.\n  // If a string is provided, it is used as the key to retrieve a\n  // property of an option object.\n  // If a function is provided, it is called with the option and should\n  // return the value.\n  // If reduce is true, this value will be used for the 'value'\n  // delivered via 'onChange'.\n  var normalizedValue = useMemo(function () {\n    return getNormalizedValue(value, valueKey);\n  }, [value, valueKey]);\n  // search input value\n  var _useState2 = useState(),\n    search = _useState2[0],\n    setSearch = _useState2[1];\n  // All select option indices and values\n  var _useState3 = useState(optionsProp),\n    allOptions = _useState3[0],\n    setAllOptions = _useState3[1];\n  var _useState4 = useState(),\n    orderedOptions = _useState4[0],\n    setOrderedOptions = _useState4[1];\n  // Track changes to options property, except when options are being\n  // updated due to search activity. Allows option's initial index value\n  // to be referenced when filtered by search.\n  useEffect(function () {\n    if (!search) setAllOptions(optionsProp);\n  }, [optionsProp, search]);\n  useEffect(function () {\n    if (search && optionsProp && optionsProp.length > 0) {\n      var additionalOptions = [].concat(allOptions);\n      optionsProp.forEach(function (i) {\n        return !additionalOptions.some(function (j) {\n          return typeof i === 'object' ? applyKey(i, valueKey) === applyKey(j, valueKey) : i === j;\n        }) && additionalOptions.push(i);\n      });\n      if (allOptions.length !== additionalOptions.length) setAllOptions(additionalOptions);\n    }\n  }, [allOptions, optionsProp, search, valueKey]);\n  useEffect(function () {\n    if (sortSelectedOnClose) setOrderedOptions(optionsProp);\n  }, [optionsProp, sortSelectedOnClose]);\n\n  // the option indexes present in the value\n  var optionIndexesInValue = useMemo(function () {\n    var result = [];\n    if (!Array.isArray(normalizedValue)) {\n      return result;\n    }\n    normalizedValue.forEach(function (v) {\n      var index = allOptions.map(function (option) {\n        return applyKey(option, valueKey);\n      }).indexOf(v);\n      if (index !== -1) result.push(index);\n    });\n    return result;\n  }, [allOptions, valueKey, normalizedValue]);\n  var _useState5 = useState(openProp),\n    open = _useState5[0],\n    setOpen = _useState5[1];\n  useEffect(function () {\n    return setOpen(openProp);\n  }, [openProp]);\n  var onRequestOpen = useCallback(function () {\n    if (open) return;\n    setOpen(true);\n    if (onOpen) onOpen();\n  }, [onOpen, open]);\n\n  // On drop close if sortSelectedOnClose is true, sort options so that\n  // selected options appear first, followed by unselected options.\n  useEffect(function () {\n    if (sortSelectedOnClose && value && !open) {\n      var selectedOptions = optionsProp.filter(function (option) {\n        return arrayIncludes(value, valueKey && valueKey.reduce ? applyKey(option, valueKey) : option, valueKey || labelKey);\n      });\n      var unselectedOptions = optionsProp.filter(function (i) {\n        return !arrayIncludes(selectedOptions, i, valueKey || labelKey);\n      });\n      var nextOrderedOptions = selectedOptions.concat(unselectedOptions);\n      setOrderedOptions(nextOrderedOptions);\n    }\n  }, [labelKey, open, sortSelectedOnClose, optionsProp, value, valueKey]);\n  var onRequestClose = useCallback(function () {\n    setOpen(false);\n    if (onClose) onClose();\n    setSearch();\n  }, [onClose]);\n  var triggerChangeEvent = useCallback(function (nextValue) {\n    return changeEvent(inputRef, nextValue);\n  }, []);\n  var onSelectChange = useCallback(function (event, _ref2) {\n    var option = _ref2.option,\n      nextValue = _ref2.value;\n    // nextValue must not be of type object to set value directly on the\n    // input. if it is an object, then the user has not provided necessary\n    // props to reduce object option\n    if (typeof nextValue !== 'object' && nextValue !== event.target.value && inputRef.current) {\n      // select registers changing option as a click event or keydown.\n      // when in a form, we need to programatically trigger a change\n      // event in order for the change event to be registered upstream\n      // necessary for change validation in form\n      triggerChangeEvent(nextValue);\n    }\n    setValue(nextValue);\n    if (onChange) {\n      event.persist();\n      var adjustedEvent;\n      // support for native event used by Preact\n      if (event instanceof Event) {\n        adjustedEvent = new event.constructor(event.type, event);\n        Object.defineProperties(adjustedEvent, {\n          target: {\n            value: inputRef.current\n          },\n          value: {\n            value: nextValue\n          },\n          option: {\n            value: option\n          }\n        });\n      } else {\n        adjustedEvent = event;\n        adjustedEvent.target = inputRef.current;\n        adjustedEvent.value = nextValue;\n        adjustedEvent.option = option;\n      }\n      onChange(adjustedEvent);\n    }\n  }, [onChange, setValue, triggerChangeEvent]);\n  var SelectIcon = getSelectIcon(icon, theme, open);\n\n  // element to show, trumps inputValue\n  var selectValue = useMemo(function () {\n    var result;\n    if (valueLabel) {\n      result = value && valueLabel instanceof Function ? valueLabel(value) : valueLabel;\n    } else if ((value == null ? void 0 : value.length) > 0 && showSelectedInline) {\n      result = /*#__PURE__*/React.createElement(SelectMultipleValue, {\n        allOptions: allOptions,\n        disabled: disabled,\n        disabledKey: disabledKey,\n        dropButtonRef: dropButtonRef,\n        labelKey: labelKey,\n        messages: messages,\n        onRequestOpen: onRequestOpen,\n        onSelectChange: onSelectChange,\n        theme: theme,\n        value: value,\n        valueKey: valueKey\n      }, children);\n    }\n    return result;\n  }, [allOptions, children, disabled, disabledKey, dropButtonRef, labelKey, messages, onRequestOpen, onSelectChange, showSelectedInline, theme, value, valueKey, valueLabel]);\n  var displayLabelKey = useMemo(function () {\n    return getDisplayLabelKey(labelKey, allOptions, optionIndexesInValue, selectValue);\n  }, [labelKey, allOptions, optionIndexesInValue, selectValue]);\n\n  // text to show\n  // When the options array contains objects, this property indicates how\n  // to retrieve the value of each option.\n  // If a string is provided, it is used as the key to retrieve a\n  // property of an option object.\n  // If a function is provided, it is called with the option and should\n  // return the value.\n  // If reduce is true, this value will be used for the 'value'\n  // delivered via 'onChange'.\n  var inputValue = useMemo(function () {\n    if (!selectValue) {\n      if (optionIndexesInValue.length === 0) return '';\n      if (optionIndexesInValue.length === 1) return applyKey(allOptions[optionIndexesInValue[0]], labelKey);\n      // keeping messages.multiple for backwards compatibility\n      if (messages != null && messages.multiple && !messages.summarizedValue) {\n        return format({\n          id: 'select.multiple',\n          messages: messages\n        });\n      }\n      return format({\n        id: 'selectMultiple.summarizedValue',\n        messages: messages,\n        values: {\n          selected: optionIndexesInValue.length,\n          total: allOptions.length\n        }\n      });\n    }\n    return undefined;\n  }, [selectValue, optionIndexesInValue, allOptions, labelKey, format, messages]);\n  var iconColor = getIconColor(theme);\n  var displaySelectIcon = SelectIcon && /*#__PURE__*/React.createElement(Box, {\n    alignSelf: \"center\",\n    margin: theme.select.icons.margin,\n    width: {\n      min: 'auto'\n    }\n  }, /*#__PURE__*/isValidElement(SelectIcon) ? SelectIcon : /*#__PURE__*/React.createElement(SelectIcon, {\n    color: iconColor,\n    size: size\n  }));\n  var dropContent = /*#__PURE__*/React.createElement(SelectMultipleContainer, {\n    allOptions: allOptions,\n    disabled: disabled,\n    disabledKey: disabledKey,\n    dropHeight: dropHeight,\n    emptySearchMessage: emptySearchMessage,\n    help: help,\n    icon: displaySelectIcon,\n    id: id,\n    labelKey: labelKey,\n    limit: limit,\n    messages: messages,\n    onChange: onSelectChange,\n    onClose: onRequestClose,\n    onKeyDown: onKeyDown,\n    onMore: onMore,\n    onSearch: onSearch,\n    options: orderedOptions || optionsProp,\n    optionIndexesInValue: optionIndexesInValue,\n    replace: replace,\n    searchPlaceholder: searchPlaceholder,\n    search: search,\n    setSearch: setSearch,\n    usingKeyboard: usingKeyboard,\n    value: value,\n    valueKey: valueKey,\n    showSelectedInline: showSelectedInline\n  }, children);\n  var dropButtonProps = {\n    ref: dropButtonRef,\n    a11yTitle: (ariaLabel || a11yTitle || placeholder || format({\n      id: 'selectMultiple.open',\n      messages: messages\n    })) + \". \" + format({\n      id: 'selectMultiple.selected',\n      values: {\n        selected: (value == null ? void 0 : value.length) || 0,\n        total: allOptions.length\n      }\n    }),\n    'aria-expanded': Boolean(open),\n    'aria-haspopup': 'listbox',\n    id: id,\n    disabled: disabled === true || undefined,\n    open: open,\n    focusIndicator: focusIndicator,\n    onFocus: onFocus,\n    onBlur: onBlur,\n    gridArea: gridArea,\n    margin: margin,\n    onOpen: onRequestOpen,\n    onClose: onRequestClose,\n    onClick: onClick,\n    plainSelect: plain,\n    plain: plain,\n    // Button should be plain\n    dropProps: dropProps,\n    dropContent: dropContent,\n    theme: theme\n  };\n  return /*#__PURE__*/React.createElement(Keyboard, {\n    onDown: onRequestOpen,\n    onUp: onRequestOpen\n  }, showSelectedInline ? /*#__PURE__*/React.createElement(StyledSelectBox, _extends({\n    disabled: disabled === true || undefined,\n    alignSelf: alignSelf,\n    direction: \"row\",\n    alignContent: \"start\",\n    background: theme.select.background,\n    ref: selectBoxRef,\n    flex: false,\n    plainSelect: plain,\n    width: width\n  }, passThemeFlag), /*#__PURE__*/React.createElement(Box, {\n    width: \"100%\"\n  }, /*#__PURE__*/React.createElement(DropButton, _extends({\n    fill: \"horizontal\",\n    alignSelf: \"start\"\n  }, dropButtonProps, {\n    dropAlign: dropAlign,\n    dropTarget: dropTarget || selectBoxRef.current\n  }), selectValue || displayLabelKey ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Box, {\n    direction: \"row\"\n  }, /*#__PURE__*/React.createElement(SelectTextInput, _extends({\n    a11yTitle: ariaLabel || a11yTitle,\n    defaultCursor: disabled === true || undefined,\n    focusIndicator: false,\n    id: id ? selectInputId(id) : undefined,\n    inert: inertTrueValue,\n    name: name,\n    width: \"100%\"\n  }, rest, {\n    tabIndex: \"-1\",\n    type: \"text\",\n    placeholder: !value || (value == null ? void 0 : value.length) === 0 ? placeholder || selectValue || displayLabelKey : format({\n      id: onMore ? 'selectMultiple.selected' : 'selectMultiple.selectedOfTotal',\n      messages: messages,\n      values: _extends({\n        selected: (value == null ? void 0 : value.length) || 0\n      }, !onMore ? {\n        total: allOptions.length\n      } : {})\n    }),\n    plain: true,\n    readOnly: true,\n    value: \"\",\n    theme: theme\n  })), displaySelectIcon), /*#__PURE__*/React.createElement(HiddenInput, {\n    type: \"text\",\n    name: name,\n    id: id ? selectInputId(id) : undefined,\n    inert: inertTrueValue,\n    value: inputValue,\n    ref: inputRef,\n    readOnly: true\n  })) : /*#__PURE__*/React.createElement(Box, {\n    direction: \"row\"\n  }, /*#__PURE__*/React.createElement(DefaultSelectTextInput, _extends({\n    a11yTitle: ariaLabel || a11yTitle,\n    disabled: disabled,\n    id: id,\n    inert: inertTrueValue,\n    name: name,\n    ref: inputRef,\n    placeholder: placeholder || 'Select',\n    value: inputValue,\n    size: size,\n    theme: theme\n  }, rest)), displaySelectIcon)), !open && (value == null ? void 0 : value.length) > 0 && (selectValue || displayLabelKey))) : /*#__PURE__*/React.createElement(Box, {\n    width: width\n  }, /*#__PURE__*/React.createElement(StyledSelectDropButton, _extends({}, dropButtonProps, {\n    dropAlign: dropAlign,\n    dropTarget: dropTarget,\n    alignSelf: alignSelf,\n    tabIndex: \"0\",\n    \"aria-labelledby\": ariaLabelledByProp || ariaLabelledBy\n  }), /*#__PURE__*/React.createElement(Box, {\n    align: \"center\",\n    direction: \"row\",\n    justify: \"between\",\n    background: theme.select.background\n  }, /*#__PURE__*/React.createElement(Box, {\n    direction: \"row\",\n    flex: true,\n    basis: \"auto\"\n  }, selectValue || displayLabelKey ? /*#__PURE__*/React.createElement(React.Fragment, null, selectValue || displayLabelKey, /*#__PURE__*/React.createElement(HiddenInput, {\n    type: \"text\",\n    name: name,\n    id: id ? selectInputId(id) : undefined,\n    inert: inertTrueValue,\n    value: inputValue,\n    ref: inputRef,\n    readOnly: true\n  })) : /*#__PURE__*/React.createElement(DefaultSelectTextInput, _extends({\n    a11yTitle: ariaLabel || a11yTitle,\n    disabled: disabled,\n    id: id,\n    inert: inertTrueValue,\n    name: name,\n    ref: inputRef,\n    placeholder: placeholder,\n    value: inputValue,\n    size: size,\n    theme: theme\n  }, rest))), displaySelectIcon))));\n});\nSelectMultiple.displayName = 'SelectMultiple';\nSelectMultiple.propTypes = SelectMultiplePropTypes;\nexport { SelectMultiple };"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}