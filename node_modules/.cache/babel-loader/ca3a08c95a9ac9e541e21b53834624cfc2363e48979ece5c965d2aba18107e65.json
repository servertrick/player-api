{"ast":null,"code":"import React, { useCallback, useContext, useEffect, useRef } from 'react';\nexport var AnalyticsContext = /*#__PURE__*/React.createContext(function () {});\nexport var useAnalytics = function useAnalytics() {\n  return useContext(AnalyticsContext);\n};\nexport var AnalyticsProvider = function AnalyticsProvider(_ref) {\n  var onAnalytics = _ref.onAnalytics,\n    children = _ref.children;\n  var lastUrlRef = useRef();\n  var sendAnalytics = useCallback(function (data) {\n    return onAnalytics && onAnalytics(data);\n  }, [onAnalytics]);\n  useEffect(function () {\n    var observer;\n    if (onAnalytics) {\n      observer = new window.MutationObserver(function () {\n        var _window;\n        var url = (_window = window) == null || (_window = _window.location) == null ? void 0 : _window.href;\n        var previousUrl = lastUrlRef.current;\n        if (url !== previousUrl) {\n          lastUrlRef.current = url;\n          sendAnalytics({\n            type: 'pageView',\n            url: url,\n            previousUrl: previousUrl\n          });\n        }\n      });\n      observer.observe(document, {\n        subtree: true,\n        childList: true\n      });\n    }\n    return function () {\n      var _observer;\n      return (_observer = observer) == null ? void 0 : _observer.disconnect();\n    };\n  }, [sendAnalytics, onAnalytics]);\n  return /*#__PURE__*/React.createElement(AnalyticsContext.Provider, {\n    value: sendAnalytics\n  }, children);\n};","map":{"version":3,"names":["React","useCallback","useContext","useEffect","useRef","AnalyticsContext","createContext","useAnalytics","AnalyticsProvider","_ref","onAnalytics","children","lastUrlRef","sendAnalytics","data","observer","window","MutationObserver","_window","url","location","href","previousUrl","current","type","observe","document","subtree","childList","_observer","disconnect","createElement","Provider","value"],"sources":["C:/Users/michaejo/Documents/GitRepos/player-api/node_modules/grommet/es6/contexts/AnalyticsContext/AnalyticsContext.js"],"sourcesContent":["import React, { useCallback, useContext, useEffect, useRef } from 'react';\nexport var AnalyticsContext = /*#__PURE__*/React.createContext(function () {});\nexport var useAnalytics = function useAnalytics() {\n  return useContext(AnalyticsContext);\n};\nexport var AnalyticsProvider = function AnalyticsProvider(_ref) {\n  var onAnalytics = _ref.onAnalytics,\n    children = _ref.children;\n  var lastUrlRef = useRef();\n  var sendAnalytics = useCallback(function (data) {\n    return onAnalytics && onAnalytics(data);\n  }, [onAnalytics]);\n  useEffect(function () {\n    var observer;\n    if (onAnalytics) {\n      observer = new window.MutationObserver(function () {\n        var _window;\n        var url = (_window = window) == null || (_window = _window.location) == null ? void 0 : _window.href;\n        var previousUrl = lastUrlRef.current;\n        if (url !== previousUrl) {\n          lastUrlRef.current = url;\n          sendAnalytics({\n            type: 'pageView',\n            url: url,\n            previousUrl: previousUrl\n          });\n        }\n      });\n      observer.observe(document, {\n        subtree: true,\n        childList: true\n      });\n    }\n    return function () {\n      var _observer;\n      return (_observer = observer) == null ? void 0 : _observer.disconnect();\n    };\n  }, [sendAnalytics, onAnalytics]);\n  return /*#__PURE__*/React.createElement(AnalyticsContext.Provider, {\n    value: sendAnalytics\n  }, children);\n};"],"mappings":"AAAA,OAAOA,KAAK,IAAIC,WAAW,EAAEC,UAAU,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AACzE,OAAO,IAAIC,gBAAgB,GAAG,aAAaL,KAAK,CAACM,aAAa,CAAC,YAAY,CAAC,CAAC,CAAC;AAC9E,OAAO,IAAIC,YAAY,GAAG,SAASA,YAAYA,CAAA,EAAG;EAChD,OAAOL,UAAU,CAACG,gBAAgB,CAAC;AACrC,CAAC;AACD,OAAO,IAAIG,iBAAiB,GAAG,SAASA,iBAAiBA,CAACC,IAAI,EAAE;EAC9D,IAAIC,WAAW,GAAGD,IAAI,CAACC,WAAW;IAChCC,QAAQ,GAAGF,IAAI,CAACE,QAAQ;EAC1B,IAAIC,UAAU,GAAGR,MAAM,CAAC,CAAC;EACzB,IAAIS,aAAa,GAAGZ,WAAW,CAAC,UAAUa,IAAI,EAAE;IAC9C,OAAOJ,WAAW,IAAIA,WAAW,CAACI,IAAI,CAAC;EACzC,CAAC,EAAE,CAACJ,WAAW,CAAC,CAAC;EACjBP,SAAS,CAAC,YAAY;IACpB,IAAIY,QAAQ;IACZ,IAAIL,WAAW,EAAE;MACfK,QAAQ,GAAG,IAAIC,MAAM,CAACC,gBAAgB,CAAC,YAAY;QACjD,IAAIC,OAAO;QACX,IAAIC,GAAG,GAAG,CAACD,OAAO,GAAGF,MAAM,KAAK,IAAI,IAAI,CAACE,OAAO,GAAGA,OAAO,CAACE,QAAQ,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGF,OAAO,CAACG,IAAI;QACpG,IAAIC,WAAW,GAAGV,UAAU,CAACW,OAAO;QACpC,IAAIJ,GAAG,KAAKG,WAAW,EAAE;UACvBV,UAAU,CAACW,OAAO,GAAGJ,GAAG;UACxBN,aAAa,CAAC;YACZW,IAAI,EAAE,UAAU;YAChBL,GAAG,EAAEA,GAAG;YACRG,WAAW,EAAEA;UACf,CAAC,CAAC;QACJ;MACF,CAAC,CAAC;MACFP,QAAQ,CAACU,OAAO,CAACC,QAAQ,EAAE;QACzBC,OAAO,EAAE,IAAI;QACbC,SAAS,EAAE;MACb,CAAC,CAAC;IACJ;IACA,OAAO,YAAY;MACjB,IAAIC,SAAS;MACb,OAAO,CAACA,SAAS,GAAGd,QAAQ,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGc,SAAS,CAACC,UAAU,CAAC,CAAC;IACzE,CAAC;EACH,CAAC,EAAE,CAACjB,aAAa,EAAEH,WAAW,CAAC,CAAC;EAChC,OAAO,aAAaV,KAAK,CAAC+B,aAAa,CAAC1B,gBAAgB,CAAC2B,QAAQ,EAAE;IACjEC,KAAK,EAAEpB;EACT,CAAC,EAAEF,QAAQ,CAAC;AACd,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}