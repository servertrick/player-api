{"ast":null,"code":"var _excluded = [\"alignSelf\", \"autoPlay\", \"children\", \"controls\", \"gridArea\", \"loop\", \"margin\", \"messages\", \"mute\", \"onDurationChange\", \"onEnded\", \"onPause\", \"onPlay\", \"onTimeUpdate\", \"onVolumeChange\", \"skipInterval\"];\nfunction _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nfunction _objectWithoutPropertiesLoose(r, e) {\n  if (null == r) return {};\n  var t = {};\n  for (var n in r) if ({}.hasOwnProperty.call(r, n)) {\n    if (-1 !== e.indexOf(n)) continue;\n    t[n] = r[n];\n  }\n  return t;\n}\nimport React, { forwardRef, useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport { useLayoutEffect } from '../../utils/use-isomorphic-layout-effect';\nimport { AnnounceContext } from '../../contexts/AnnounceContext';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { Menu } from '../Menu';\nimport { Meter } from '../Meter';\nimport { Stack } from '../Stack';\nimport { Text } from '../Text';\nimport { Keyboard } from '../Keyboard';\nimport { containsFocus, useForwardedRef } from '../../utils';\nimport { StyledVideo, StyledVideoContainer, StyledVideoControls, StyledVideoScrubber } from './StyledVideo';\nimport { MessageContext } from '../../contexts/MessageContext';\nimport { VideoPropTypes } from './propTypes';\nimport { useThemeValue } from '../../utils/useThemeValue';\n\n// Split the volume control into 6 segments. Empirically determined.\nvar VOLUME_STEP = 0.166667;\nvar formatTime = function formatTime(time) {\n  var minutes = Math.trunc(time / 60);\n  if (minutes < 10) {\n    minutes = \"0\" + minutes;\n  }\n  var seconds = Math.round(time) % 60;\n  if (seconds < 10) {\n    seconds = \"0\" + seconds;\n  }\n  return minutes + \":\" + seconds;\n};\nvar Video = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var alignSelf = _ref.alignSelf,\n    autoPlay = _ref.autoPlay,\n    children = _ref.children,\n    controlsProp = _ref.controls,\n    gridArea = _ref.gridArea,\n    loop = _ref.loop,\n    margin = _ref.margin,\n    messages = _ref.messages,\n    mute = _ref.mute,\n    _onDurationChange = _ref.onDurationChange,\n    _onEnded = _ref.onEnded,\n    _onPause = _ref.onPause,\n    _onPlay = _ref.onPlay,\n    _onTimeUpdate = _ref.onTimeUpdate,\n    _onVolumeChange = _ref.onVolumeChange,\n    skipInterval = _ref.skipInterval,\n    rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n  var _useThemeValue = useThemeValue(),\n    theme = _useThemeValue.theme,\n    passThemeFlag = _useThemeValue.passThemeFlag;\n  var _useContext = useContext(MessageContext),\n    format = _useContext.format;\n  var announce = useContext(AnnounceContext);\n  var _useState = useState([]),\n    captions = _useState[0],\n    setCaptions = _useState[1];\n  var _useState2 = useState(),\n    currentTime = _useState2[0],\n    setCurrentTime = _useState2[1];\n  var _useState3 = useState(),\n    duration = _useState3[0],\n    setDuration = _useState3[1];\n  var _useState4 = useState(),\n    percentagePlayed = _useState4[0],\n    setPercentagePlayed = _useState4[1];\n  var _useState5 = useState(false),\n    playing = _useState5[0],\n    setPlaying = _useState5[1];\n  var _useState6 = useState(false),\n    announceAudioDescription = _useState6[0],\n    setAnnounceAudioDescription = _useState6[1];\n  var _useState7 = useState(),\n    scrubTime = _useState7[0],\n    setScrubTime = _useState7[1];\n  var _useState8 = useState(),\n    volume = _useState8[0],\n    setVolume = _useState8[1];\n  var _useState9 = useState(false),\n    hasPlayed = _useState9[0],\n    setHasPlayed = _useState9[1];\n  var _useState0 = useState(),\n    interacting = _useState0[0],\n    setInteracting = _useState0[1];\n  var _useState1 = useState(),\n    height = _useState1[0],\n    setHeight = _useState1[1];\n  var _useState10 = useState(),\n    width = _useState10[0],\n    setWidth = _useState10[1];\n  var containerRef = useRef();\n  var scrubberRef = useRef();\n  var videoRef = useForwardedRef(ref);\n  var controls = useMemo(function () {\n    var result;\n    if (typeof controlsProp === 'string' || typeof controlsProp === 'boolean') {\n      result = {\n        items: ['volume', 'fullScreen'],\n        position: controlsProp\n      };\n    } else {\n      result = {\n        items: (controlsProp == null ? void 0 : controlsProp.items) || ['volume', 'fullScreen'],\n        position: (controlsProp == null ? void 0 : controlsProp.position) || 'over'\n      };\n    }\n    return result;\n  }, [controlsProp]);\n\n  // mute if needed\n  useEffect(function () {\n    var video = videoRef.current;\n    if (video && mute) video.muted = true;\n  }, [mute, videoRef]);\n\n  // when the video is first rendered, set state from it where needed\n  useEffect(function () {\n    var video = videoRef.current;\n    if (video) {\n      // hide all captioning to start with\n      var textTracks = video.textTracks;\n      for (var i = 0; i < textTracks.length; i += 1) {\n        textTracks[i].mode = 'hidden';\n      }\n      setCurrentTime(video.currentTime);\n      setPercentagePlayed(video.currentTime / video.duration * 100);\n      setVolume(videoRef.current.volume);\n    }\n  }, [videoRef]);\n\n  // turn off interacting after a while\n  useEffect(function () {\n    var timer = setTimeout(function () {\n      if (interacting && !containsFocus(containerRef.current)) {\n        setInteracting(false);\n      }\n    }, 3000);\n    return function () {\n      return clearTimeout(timer);\n    };\n  }, [interacting]);\n\n  // track which audio description track is active\n  var _useState11 = useState(),\n    activeTrack = _useState11[0],\n    setActiveTrack = _useState11[1];\n  useLayoutEffect(function () {\n    var video = videoRef.current;\n    if (video) {\n      if (video.videoHeight) {\n        // set the size based on the video aspect ratio\n        var rect = video.getBoundingClientRect();\n        var ratio = rect.width / rect.height;\n        var videoRatio = video.videoWidth / video.videoHeight;\n        if (videoRatio > ratio) {\n          var nextHeight = rect.width / videoRatio;\n          if (nextHeight !== height) {\n            setHeight(nextHeight);\n            setWidth(undefined);\n          }\n        } else {\n          var nextWidth = rect.height * videoRatio;\n          if (nextWidth !== width) {\n            setHeight(undefined);\n            setWidth(nextWidth);\n          }\n        }\n      }\n\n      // remember the state of the text tracks for subsequent rendering\n      var textTracks = video.textTracks;\n      var nextCaptions = [];\n      var set = false;\n      // iterate through all of the tracks provided\n      var _loop = function _loop() {\n        var track = textTracks[i];\n        var active = track.mode === 'showing';\n        var getActiveTrack = function getActiveTrack(currentVideoTime) {\n          var nextActiveTrack;\n          for (var j = 0; j < track.cues.length; j += 1) {\n            var _track$cues$j, _track$cues$j2;\n            if (currentVideoTime > (track == null || (_track$cues$j = track.cues[j]) == null ? void 0 : _track$cues$j.startTime) && currentVideoTime < (track == null || (_track$cues$j2 = track.cues[j]) == null ? void 0 : _track$cues$j2.endTime)) {\n              var _track$cues$j3;\n              nextActiveTrack = track == null || (_track$cues$j3 = track.cues[j]) == null ? void 0 : _track$cues$j3.text;\n            }\n          }\n          return nextActiveTrack;\n        };\n\n        // track is an audio description\n        if (track.kind === 'descriptions') {\n          if (announceAudioDescription) {\n            video.ontimeupdate = function () {\n              var nextActiveTrack = getActiveTrack(video.currentTime);\n              if (activeTrack !== nextActiveTrack) {\n                if (nextActiveTrack) {\n                  announce(nextActiveTrack, 'assertive');\n                }\n                setActiveTrack(nextActiveTrack);\n              }\n            };\n          }\n        }\n\n        // otherwise treat as captions\n        else {\n          nextCaptions.push({\n            label: track.label,\n            active: active\n          });\n          if (!captions || !captions[i] || captions[i].active !== active) {\n            set = true;\n          }\n          if (set) {\n            setCaptions(nextCaptions);\n          }\n        }\n      };\n      for (var i = 0; i < textTracks.length; i += 1) {\n        _loop();\n      }\n    }\n  }, [activeTrack, announce, announceAudioDescription, captions, height, videoRef, width]);\n  var play = useCallback(function () {\n    return videoRef.current.play();\n  }, [videoRef]);\n  var pause = useCallback(function () {\n    return videoRef.current.pause();\n  }, [videoRef]);\n  var scrub = useCallback(function (event) {\n    if (scrubberRef.current) {\n      var scrubberRect = scrubberRef.current.getBoundingClientRect();\n      var percent = (event.clientX - scrubberRect.left) / scrubberRect.width;\n      setScrubTime(duration * percent);\n    }\n  }, [duration]);\n  var seek = useCallback(function (event) {\n    if (scrubberRef.current) {\n      var scrubberRect = scrubberRef.current.getBoundingClientRect();\n      var percent = (event.clientX - scrubberRect.left) / scrubberRect.width;\n      if (duration) videoRef.current.currentTime = duration * percent;\n    }\n  }, [duration, videoRef]);\n  var seekForward = useCallback(function () {\n    setInteracting(true);\n    videoRef.current.currentTime += skipInterval || theme.video.scrubber.interval;\n  }, [skipInterval, theme.video.scrubber.interval, videoRef]);\n  var seekBackward = useCallback(function () {\n    setInteracting(true);\n    videoRef.current.currentTime -= skipInterval || theme.video.scrubber.interval;\n  }, [skipInterval, theme.video.scrubber.interval, videoRef]);\n  var louder = useCallback(function () {\n    videoRef.current.volume += VOLUME_STEP;\n  }, [videoRef]);\n  var quieter = useCallback(function () {\n    videoRef.current.volume -= VOLUME_STEP;\n  }, [videoRef]);\n  var showCaptions = useCallback(function (index) {\n    var textTracks = videoRef.current.textTracks;\n    for (var i = 0; i < textTracks.length; i += 1) textTracks[i].mode = i === index ? 'showing' : 'hidden';\n  }, [videoRef]);\n  var fullscreen = useCallback(function () {\n    var video = videoRef.current;\n    if (video.requestFullscreen) {\n      video.requestFullscreen();\n    } else if (video.msRequestFullscreen) {\n      video.msRequestFullscreen();\n    } else if (video.mozRequestFullScreen) {\n      video.mozRequestFullScreen();\n    } else if (video.webkitRequestFullscreen) {\n      video.webkitRequestFullscreen();\n    } else {\n      console.warn(\"This browser doesn't support fullscreen.\");\n    }\n  }, [videoRef]);\n  var controlsElement;\n  if (controls != null && controls.position) {\n    var _controls$items, _theme$video, _theme$video2;\n    var over = controls.position === 'over';\n    var background = over ? theme.video.controls && theme.video.controls.background || {\n      color: 'background-back',\n      opacity: 'strong',\n      dark: true\n    } : undefined;\n    var iconColor = over && (theme.video.icons.color || 'text');\n    var formattedTime = formatTime(scrubTime || currentTime || duration);\n    var Icons = {\n      ClosedCaption: theme.video.icons.closedCaption,\n      Configure: theme.video.icons.configure,\n      FullScreen: theme.video.icons.fullScreen,\n      Pause: theme.video.icons.pause,\n      Play: theme.video.icons.play,\n      ReduceVolume: theme.video.icons.reduceVolume,\n      Volume: theme.video.icons.volume,\n      Description: theme.video.icons.description\n    };\n    var captionControls = captions.map(function (caption, index) {\n      return {\n        icon: caption.label ? undefined : /*#__PURE__*/React.createElement(Icons.ClosedCaption, {\n          color: iconColor\n        }),\n        label: caption.label,\n        active: caption.active,\n        a11yTitle: caption.label || format({\n          id: 'video.captions',\n          messages: messages\n        }),\n        onClick: function onClick() {\n          showCaptions(caption.active ? -1 : index);\n          var updatedCaptions = [];\n          for (var i = 0; i < captions.length; i += 1) {\n            updatedCaptions.push(captions[i]);\n            // set other captions to active=false\n            if (i !== index && updatedCaptions[i].active) updatedCaptions[i].active = false;\n            // set the currently selected captions to active\n            else if (i === index) updatedCaptions[i].active = !captions[index].active;\n          }\n          setCaptions(updatedCaptions);\n        }\n      };\n    });\n    var descriptionControls = {\n      icon: /*#__PURE__*/React.createElement(Icons.Description, {\n        color: iconColor\n      }),\n      a11yTitle: format({\n        id: 'video.audioDescriptions',\n        messages: messages\n      }),\n      active: announceAudioDescription,\n      onClick: function onClick() {\n        return setAnnounceAudioDescription(!announceAudioDescription);\n      }\n    };\n    var volumeControls = ['volume', 'reduceVolume'].map(function (control) {\n      return {\n        icon: control === 'volume' ? /*#__PURE__*/React.createElement(Icons.Volume, {\n          color: iconColor\n        }) : /*#__PURE__*/React.createElement(Icons.ReduceVolume, {\n          color: iconColor\n        }),\n        a11yTitle: format({\n          id: control === 'volume' ? 'video.volumeUp' : 'video.volumeDown',\n          messages: messages\n        }),\n        onClick: function onClick() {\n          if (volume <= 1 - VOLUME_STEP && control === 'volume') {\n            return louder();\n          }\n          if (volume >= VOLUME_STEP && control === 'reduceVolume') {\n            return quieter();\n          }\n          return undefined;\n        },\n        close: false\n      };\n    });\n    var buttonProps = {\n      captions: captionControls,\n      descriptions: descriptionControls,\n      volume: volumeControls,\n      fullScreen: {\n        icon: /*#__PURE__*/React.createElement(Icons.FullScreen, {\n          color: iconColor\n        }),\n        a11yTitle: format({\n          id: 'video.fullScreen',\n          messages: messages\n        }),\n        onClick: fullscreen\n      },\n      pause: {\n        icon: /*#__PURE__*/React.createElement(Icons.Pause, {\n          color: iconColor\n        }),\n        a11yTitle: format({\n          id: 'video.pauseButton',\n          messages: messages\n        }),\n        disabled: !playing,\n        onClick: pause\n      },\n      play: {\n        icon: /*#__PURE__*/React.createElement(Icons.Play, {\n          color: iconColor\n        }),\n        a11yTitle: format({\n          id: 'video.playButton',\n          messages: messages\n        }),\n        disabled: playing,\n        onClick: play\n      }\n    };\n    var controlsMenuItems = [];\n    (_controls$items = controls.items) == null || _controls$items.map(function (item) {\n      if (item === 'volume') {\n        volumeControls.map(function (control) {\n          return controlsMenuItems.push(control);\n        });\n        return undefined;\n      }\n      if (item === 'captions' && typeof buttonProps[item] === 'object') {\n        for (var i = 0; i < buttonProps[item].length; i += 1) controlsMenuItems.push(buttonProps[item][i]);\n        return undefined;\n      }\n      if (item === 'descriptions') {\n        controlsMenuItems.push(buttonProps[item]);\n        return undefined;\n      }\n      if (typeof item === 'string') {\n        return controlsMenuItems.push(buttonProps[item]);\n      }\n      return controlsMenuItems.push(item);\n    });\n    controlsElement = /*#__PURE__*/React.createElement(StyledVideoControls, {\n      over: over,\n      active: !hasPlayed || controls.position === 'below' || over && interacting,\n      onBlur: function onBlur() {\n        if (!containsFocus(containerRef.current)) setInteracting(false);\n      }\n    }, /*#__PURE__*/React.createElement(Box, {\n      direction: \"row\",\n      align: \"center\",\n      justify: \"between\",\n      background: background\n    }, /*#__PURE__*/React.createElement(Button, {\n      icon: playing ? /*#__PURE__*/React.createElement(Icons.Pause, {\n        color: iconColor,\n        a11yTitle: format({\n          id: 'video.pauseButton',\n          messages: messages\n        })\n      }) : /*#__PURE__*/React.createElement(Icons.Play, {\n        color: iconColor,\n        a11yTitle: format({\n          id: 'video.playButton',\n          messages: messages\n        })\n      }),\n      hoverIndicator: \"background\",\n      onClick: playing ? pause : play,\n      onFocus: function onFocus() {\n        return setInteracting(true);\n      }\n    }), /*#__PURE__*/React.createElement(Box, {\n      direction: \"row\",\n      align: \"center\",\n      flex: true\n    }, /*#__PURE__*/React.createElement(Box, {\n      flex: true\n    }, /*#__PURE__*/React.createElement(Stack, null, /*#__PURE__*/React.createElement(Meter, {\n      \"aria-label\": format({\n        id: 'video.progressMeter',\n        messages: messages\n      }),\n      background: over ? theme.video.scrubber && theme.video.scrubber.track && theme.video.scrubber.track.color || 'dark-3' : undefined,\n      size: \"full\",\n      thickness: (_theme$video = theme.video) == null || (_theme$video = _theme$video.scrubber) == null ? void 0 : _theme$video.thickness,\n      values: [{\n        value: percentagePlayed || 0\n      }]\n    }), /*#__PURE__*/React.createElement(StyledVideoScrubber, _extends({\n      \"aria-label\": format({\n        id: 'video.scrubber',\n        messages: messages\n      }),\n      ref: scrubberRef,\n      tabIndex: 0,\n      role: \"button\",\n      value: scrubTime ? Math.round(scrubTime / duration * 100) : undefined,\n      onMouseMove: scrub,\n      onMouseLeave: function onMouseLeave() {\n        return setScrubTime(undefined);\n      },\n      onClick: seek,\n      onFocus: function onFocus() {\n        return setInteracting(true);\n      }\n    }, passThemeFlag)))), /*#__PURE__*/React.createElement(Box, {\n      pad: theme == null || (_theme$video2 = theme.video) == null || (_theme$video2 = _theme$video2.time) == null || (_theme$video2 = _theme$video2.container) == null ? void 0 : _theme$video2.pad\n    }, /*#__PURE__*/React.createElement(Text, {\n      margin: \"none\"\n    }, formattedTime))), /*#__PURE__*/React.createElement(Menu, {\n      icon: /*#__PURE__*/React.createElement(Icons.Configure, {\n        color: iconColor\n      }),\n      dropAlign: {\n        bottom: 'top',\n        right: 'right'\n      },\n      dropBackground: background,\n      messages: {\n        openMenu: format({\n          id: 'video.openMenu',\n          messages: messages\n        }),\n        closeMenu: format({\n          id: 'video.closeMenu',\n          messages: messages\n        })\n      },\n      items: [].concat(controlsMenuItems),\n      onFocus: function onFocus() {\n        return setInteracting(true);\n      }\n    })));\n  }\n  var mouseEventListeners;\n  if ((controls == null ? void 0 : controls.position) === 'over') {\n    mouseEventListeners = {\n      onMouseEnter: function onMouseEnter() {\n        return setInteracting(true);\n      },\n      onMouseMove: function onMouseMove() {\n        return setInteracting(true);\n      },\n      onTouchStart: function onTouchStart() {\n        return setInteracting(true);\n      }\n    };\n  }\n  var style;\n  if (rest.fit === 'contain' && (controls == null ? void 0 : controls.position) === 'over') {\n    // constrain the size to fit the aspect ratio so the controls\n    // overlap correctly\n    if (width) {\n      style = {\n        width: width\n      };\n    } else if (height) {\n      style = {\n        height: height\n      };\n    }\n  }\n  return /*#__PURE__*/React.createElement(Keyboard, {\n    onLeft: seekBackward,\n    onRight: seekForward\n  }, /*#__PURE__*/React.createElement(StyledVideoContainer, _extends({\n    ref: containerRef\n  }, mouseEventListeners, {\n    alignSelf: alignSelf,\n    gridArea: gridArea,\n    margin: margin,\n    style: style,\n    tabIndex: \"-1\"\n  }, passThemeFlag), /*#__PURE__*/React.createElement(StyledVideo, _extends({}, passThemeFlag, rest, {\n    ref: videoRef,\n    onDurationChange: function onDurationChange(event) {\n      var video = videoRef.current;\n      setDuration(video.duration);\n      setPercentagePlayed(video.currentTime / video.duration * 100);\n      if (_onDurationChange) _onDurationChange(event);\n    },\n    onEnded: function onEnded(event) {\n      setPlaying(false);\n      if (_onEnded) _onEnded(event);\n    },\n    onPause: function onPause(event) {\n      setPlaying(false);\n      if (_onPause) _onPause(event);\n    },\n    onPlay: function onPlay(event) {\n      setPlaying(true);\n      setHasPlayed(true);\n      if (_onPlay) _onPlay(event);\n    },\n    onTimeUpdate: function onTimeUpdate(event) {\n      var video = videoRef.current;\n      setCurrentTime(video.currentTime);\n      setPercentagePlayed(video.currentTime / video.duration * 100);\n      if (_onTimeUpdate) _onTimeUpdate(event);\n    },\n    onVolumeChange: function onVolumeChange(event) {\n      setVolume(videoRef.current.volume);\n      if (_onVolumeChange) _onVolumeChange(event);\n    },\n    autoPlay: autoPlay || false,\n    loop: loop || false\n  }), children), controlsElement));\n});\nVideo.displayName = 'Video';\nVideo.propTypes = VideoPropTypes;\nexport { Video };","map":{"version":3,"names":["_excluded","_extends","Object","assign","bind","n","e","arguments","length","t","r","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","indexOf","React","forwardRef","useCallback","useContext","useEffect","useMemo","useRef","useState","useLayoutEffect","AnnounceContext","Box","Button","Menu","Meter","Stack","Text","Keyboard","containsFocus","useForwardedRef","StyledVideo","StyledVideoContainer","StyledVideoControls","StyledVideoScrubber","MessageContext","VideoPropTypes","useThemeValue","VOLUME_STEP","formatTime","time","minutes","Math","trunc","seconds","round","Video","_ref","ref","alignSelf","autoPlay","children","controlsProp","controls","gridArea","loop","margin","messages","mute","_onDurationChange","onDurationChange","_onEnded","onEnded","_onPause","onPause","_onPlay","onPlay","_onTimeUpdate","onTimeUpdate","_onVolumeChange","onVolumeChange","skipInterval","rest","_useThemeValue","theme","passThemeFlag","_useContext","format","announce","_useState","captions","setCaptions","_useState2","currentTime","setCurrentTime","_useState3","duration","setDuration","_useState4","percentagePlayed","setPercentagePlayed","_useState5","playing","setPlaying","_useState6","announceAudioDescription","setAnnounceAudioDescription","_useState7","scrubTime","setScrubTime","_useState8","volume","setVolume","_useState9","hasPlayed","setHasPlayed","_useState0","interacting","setInteracting","_useState1","height","setHeight","_useState10","width","setWidth","containerRef","scrubberRef","videoRef","result","items","position","video","current","muted","textTracks","i","mode","timer","setTimeout","clearTimeout","_useState11","activeTrack","setActiveTrack","videoHeight","rect","getBoundingClientRect","ratio","videoRatio","videoWidth","nextHeight","undefined","nextWidth","nextCaptions","set","_loop","track","active","getActiveTrack","currentVideoTime","nextActiveTrack","j","cues","_track$cues$j","_track$cues$j2","startTime","endTime","_track$cues$j3","text","kind","ontimeupdate","push","label","play","pause","scrub","event","scrubberRect","percent","clientX","left","seek","seekForward","scrubber","interval","seekBackward","louder","quieter","showCaptions","index","fullscreen","requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","console","warn","controlsElement","_controls$items","_theme$video","_theme$video2","over","background","color","opacity","dark","iconColor","icons","formattedTime","Icons","ClosedCaption","closedCaption","Configure","configure","FullScreen","fullScreen","Pause","Play","ReduceVolume","reduceVolume","Volume","Description","description","captionControls","map","caption","icon","createElement","a11yTitle","id","onClick","updatedCaptions","descriptionControls","volumeControls","control","close","buttonProps","descriptions","disabled","controlsMenuItems","item","onBlur","direction","align","justify","hoverIndicator","onFocus","flex","size","thickness","values","value","tabIndex","role","onMouseMove","onMouseLeave","pad","container","dropAlign","bottom","right","dropBackground","openMenu","closeMenu","concat","mouseEventListeners","onMouseEnter","onTouchStart","style","fit","onLeft","onRight","displayName","propTypes"],"sources":["C:/Users/michaejo/Documents/GitRepos/player-api/node_modules/grommet/es6/components/Video/Video.js"],"sourcesContent":["var _excluded = [\"alignSelf\", \"autoPlay\", \"children\", \"controls\", \"gridArea\", \"loop\", \"margin\", \"messages\", \"mute\", \"onDurationChange\", \"onEnded\", \"onPause\", \"onPlay\", \"onTimeUpdate\", \"onVolumeChange\", \"skipInterval\"];\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nfunction _objectWithoutPropertiesLoose(r, e) { if (null == r) return {}; var t = {}; for (var n in r) if ({}.hasOwnProperty.call(r, n)) { if (-1 !== e.indexOf(n)) continue; t[n] = r[n]; } return t; }\nimport React, { forwardRef, useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport { useLayoutEffect } from '../../utils/use-isomorphic-layout-effect';\nimport { AnnounceContext } from '../../contexts/AnnounceContext';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { Menu } from '../Menu';\nimport { Meter } from '../Meter';\nimport { Stack } from '../Stack';\nimport { Text } from '../Text';\nimport { Keyboard } from '../Keyboard';\nimport { containsFocus, useForwardedRef } from '../../utils';\nimport { StyledVideo, StyledVideoContainer, StyledVideoControls, StyledVideoScrubber } from './StyledVideo';\nimport { MessageContext } from '../../contexts/MessageContext';\nimport { VideoPropTypes } from './propTypes';\nimport { useThemeValue } from '../../utils/useThemeValue';\n\n// Split the volume control into 6 segments. Empirically determined.\nvar VOLUME_STEP = 0.166667;\nvar formatTime = function formatTime(time) {\n  var minutes = Math.trunc(time / 60);\n  if (minutes < 10) {\n    minutes = \"0\" + minutes;\n  }\n  var seconds = Math.round(time) % 60;\n  if (seconds < 10) {\n    seconds = \"0\" + seconds;\n  }\n  return minutes + \":\" + seconds;\n};\nvar Video = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var alignSelf = _ref.alignSelf,\n    autoPlay = _ref.autoPlay,\n    children = _ref.children,\n    controlsProp = _ref.controls,\n    gridArea = _ref.gridArea,\n    loop = _ref.loop,\n    margin = _ref.margin,\n    messages = _ref.messages,\n    mute = _ref.mute,\n    _onDurationChange = _ref.onDurationChange,\n    _onEnded = _ref.onEnded,\n    _onPause = _ref.onPause,\n    _onPlay = _ref.onPlay,\n    _onTimeUpdate = _ref.onTimeUpdate,\n    _onVolumeChange = _ref.onVolumeChange,\n    skipInterval = _ref.skipInterval,\n    rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n  var _useThemeValue = useThemeValue(),\n    theme = _useThemeValue.theme,\n    passThemeFlag = _useThemeValue.passThemeFlag;\n  var _useContext = useContext(MessageContext),\n    format = _useContext.format;\n  var announce = useContext(AnnounceContext);\n  var _useState = useState([]),\n    captions = _useState[0],\n    setCaptions = _useState[1];\n  var _useState2 = useState(),\n    currentTime = _useState2[0],\n    setCurrentTime = _useState2[1];\n  var _useState3 = useState(),\n    duration = _useState3[0],\n    setDuration = _useState3[1];\n  var _useState4 = useState(),\n    percentagePlayed = _useState4[0],\n    setPercentagePlayed = _useState4[1];\n  var _useState5 = useState(false),\n    playing = _useState5[0],\n    setPlaying = _useState5[1];\n  var _useState6 = useState(false),\n    announceAudioDescription = _useState6[0],\n    setAnnounceAudioDescription = _useState6[1];\n  var _useState7 = useState(),\n    scrubTime = _useState7[0],\n    setScrubTime = _useState7[1];\n  var _useState8 = useState(),\n    volume = _useState8[0],\n    setVolume = _useState8[1];\n  var _useState9 = useState(false),\n    hasPlayed = _useState9[0],\n    setHasPlayed = _useState9[1];\n  var _useState0 = useState(),\n    interacting = _useState0[0],\n    setInteracting = _useState0[1];\n  var _useState1 = useState(),\n    height = _useState1[0],\n    setHeight = _useState1[1];\n  var _useState10 = useState(),\n    width = _useState10[0],\n    setWidth = _useState10[1];\n  var containerRef = useRef();\n  var scrubberRef = useRef();\n  var videoRef = useForwardedRef(ref);\n  var controls = useMemo(function () {\n    var result;\n    if (typeof controlsProp === 'string' || typeof controlsProp === 'boolean') {\n      result = {\n        items: ['volume', 'fullScreen'],\n        position: controlsProp\n      };\n    } else {\n      result = {\n        items: (controlsProp == null ? void 0 : controlsProp.items) || ['volume', 'fullScreen'],\n        position: (controlsProp == null ? void 0 : controlsProp.position) || 'over'\n      };\n    }\n    return result;\n  }, [controlsProp]);\n\n  // mute if needed\n  useEffect(function () {\n    var video = videoRef.current;\n    if (video && mute) video.muted = true;\n  }, [mute, videoRef]);\n\n  // when the video is first rendered, set state from it where needed\n  useEffect(function () {\n    var video = videoRef.current;\n    if (video) {\n      // hide all captioning to start with\n      var textTracks = video.textTracks;\n      for (var i = 0; i < textTracks.length; i += 1) {\n        textTracks[i].mode = 'hidden';\n      }\n      setCurrentTime(video.currentTime);\n      setPercentagePlayed(video.currentTime / video.duration * 100);\n      setVolume(videoRef.current.volume);\n    }\n  }, [videoRef]);\n\n  // turn off interacting after a while\n  useEffect(function () {\n    var timer = setTimeout(function () {\n      if (interacting && !containsFocus(containerRef.current)) {\n        setInteracting(false);\n      }\n    }, 3000);\n    return function () {\n      return clearTimeout(timer);\n    };\n  }, [interacting]);\n\n  // track which audio description track is active\n  var _useState11 = useState(),\n    activeTrack = _useState11[0],\n    setActiveTrack = _useState11[1];\n  useLayoutEffect(function () {\n    var video = videoRef.current;\n    if (video) {\n      if (video.videoHeight) {\n        // set the size based on the video aspect ratio\n        var rect = video.getBoundingClientRect();\n        var ratio = rect.width / rect.height;\n        var videoRatio = video.videoWidth / video.videoHeight;\n        if (videoRatio > ratio) {\n          var nextHeight = rect.width / videoRatio;\n          if (nextHeight !== height) {\n            setHeight(nextHeight);\n            setWidth(undefined);\n          }\n        } else {\n          var nextWidth = rect.height * videoRatio;\n          if (nextWidth !== width) {\n            setHeight(undefined);\n            setWidth(nextWidth);\n          }\n        }\n      }\n\n      // remember the state of the text tracks for subsequent rendering\n      var textTracks = video.textTracks;\n      var nextCaptions = [];\n      var set = false;\n      // iterate through all of the tracks provided\n      var _loop = function _loop() {\n        var track = textTracks[i];\n        var active = track.mode === 'showing';\n        var getActiveTrack = function getActiveTrack(currentVideoTime) {\n          var nextActiveTrack;\n          for (var j = 0; j < track.cues.length; j += 1) {\n            var _track$cues$j, _track$cues$j2;\n            if (currentVideoTime > (track == null || (_track$cues$j = track.cues[j]) == null ? void 0 : _track$cues$j.startTime) && currentVideoTime < (track == null || (_track$cues$j2 = track.cues[j]) == null ? void 0 : _track$cues$j2.endTime)) {\n              var _track$cues$j3;\n              nextActiveTrack = track == null || (_track$cues$j3 = track.cues[j]) == null ? void 0 : _track$cues$j3.text;\n            }\n          }\n          return nextActiveTrack;\n        };\n\n        // track is an audio description\n        if (track.kind === 'descriptions') {\n          if (announceAudioDescription) {\n            video.ontimeupdate = function () {\n              var nextActiveTrack = getActiveTrack(video.currentTime);\n              if (activeTrack !== nextActiveTrack) {\n                if (nextActiveTrack) {\n                  announce(nextActiveTrack, 'assertive');\n                }\n                setActiveTrack(nextActiveTrack);\n              }\n            };\n          }\n        }\n\n        // otherwise treat as captions\n        else {\n          nextCaptions.push({\n            label: track.label,\n            active: active\n          });\n          if (!captions || !captions[i] || captions[i].active !== active) {\n            set = true;\n          }\n          if (set) {\n            setCaptions(nextCaptions);\n          }\n        }\n      };\n      for (var i = 0; i < textTracks.length; i += 1) {\n        _loop();\n      }\n    }\n  }, [activeTrack, announce, announceAudioDescription, captions, height, videoRef, width]);\n  var play = useCallback(function () {\n    return videoRef.current.play();\n  }, [videoRef]);\n  var pause = useCallback(function () {\n    return videoRef.current.pause();\n  }, [videoRef]);\n  var scrub = useCallback(function (event) {\n    if (scrubberRef.current) {\n      var scrubberRect = scrubberRef.current.getBoundingClientRect();\n      var percent = (event.clientX - scrubberRect.left) / scrubberRect.width;\n      setScrubTime(duration * percent);\n    }\n  }, [duration]);\n  var seek = useCallback(function (event) {\n    if (scrubberRef.current) {\n      var scrubberRect = scrubberRef.current.getBoundingClientRect();\n      var percent = (event.clientX - scrubberRect.left) / scrubberRect.width;\n      if (duration) videoRef.current.currentTime = duration * percent;\n    }\n  }, [duration, videoRef]);\n  var seekForward = useCallback(function () {\n    setInteracting(true);\n    videoRef.current.currentTime += skipInterval || theme.video.scrubber.interval;\n  }, [skipInterval, theme.video.scrubber.interval, videoRef]);\n  var seekBackward = useCallback(function () {\n    setInteracting(true);\n    videoRef.current.currentTime -= skipInterval || theme.video.scrubber.interval;\n  }, [skipInterval, theme.video.scrubber.interval, videoRef]);\n  var louder = useCallback(function () {\n    videoRef.current.volume += VOLUME_STEP;\n  }, [videoRef]);\n  var quieter = useCallback(function () {\n    videoRef.current.volume -= VOLUME_STEP;\n  }, [videoRef]);\n  var showCaptions = useCallback(function (index) {\n    var textTracks = videoRef.current.textTracks;\n    for (var i = 0; i < textTracks.length; i += 1) textTracks[i].mode = i === index ? 'showing' : 'hidden';\n  }, [videoRef]);\n  var fullscreen = useCallback(function () {\n    var video = videoRef.current;\n    if (video.requestFullscreen) {\n      video.requestFullscreen();\n    } else if (video.msRequestFullscreen) {\n      video.msRequestFullscreen();\n    } else if (video.mozRequestFullScreen) {\n      video.mozRequestFullScreen();\n    } else if (video.webkitRequestFullscreen) {\n      video.webkitRequestFullscreen();\n    } else {\n      console.warn(\"This browser doesn't support fullscreen.\");\n    }\n  }, [videoRef]);\n  var controlsElement;\n  if (controls != null && controls.position) {\n    var _controls$items, _theme$video, _theme$video2;\n    var over = controls.position === 'over';\n    var background = over ? theme.video.controls && theme.video.controls.background || {\n      color: 'background-back',\n      opacity: 'strong',\n      dark: true\n    } : undefined;\n    var iconColor = over && (theme.video.icons.color || 'text');\n    var formattedTime = formatTime(scrubTime || currentTime || duration);\n    var Icons = {\n      ClosedCaption: theme.video.icons.closedCaption,\n      Configure: theme.video.icons.configure,\n      FullScreen: theme.video.icons.fullScreen,\n      Pause: theme.video.icons.pause,\n      Play: theme.video.icons.play,\n      ReduceVolume: theme.video.icons.reduceVolume,\n      Volume: theme.video.icons.volume,\n      Description: theme.video.icons.description\n    };\n    var captionControls = captions.map(function (caption, index) {\n      return {\n        icon: caption.label ? undefined : /*#__PURE__*/React.createElement(Icons.ClosedCaption, {\n          color: iconColor\n        }),\n        label: caption.label,\n        active: caption.active,\n        a11yTitle: caption.label || format({\n          id: 'video.captions',\n          messages: messages\n        }),\n        onClick: function onClick() {\n          showCaptions(caption.active ? -1 : index);\n          var updatedCaptions = [];\n          for (var i = 0; i < captions.length; i += 1) {\n            updatedCaptions.push(captions[i]);\n            // set other captions to active=false\n            if (i !== index && updatedCaptions[i].active) updatedCaptions[i].active = false;\n            // set the currently selected captions to active\n            else if (i === index) updatedCaptions[i].active = !captions[index].active;\n          }\n          setCaptions(updatedCaptions);\n        }\n      };\n    });\n    var descriptionControls = {\n      icon: /*#__PURE__*/React.createElement(Icons.Description, {\n        color: iconColor\n      }),\n      a11yTitle: format({\n        id: 'video.audioDescriptions',\n        messages: messages\n      }),\n      active: announceAudioDescription,\n      onClick: function onClick() {\n        return setAnnounceAudioDescription(!announceAudioDescription);\n      }\n    };\n    var volumeControls = ['volume', 'reduceVolume'].map(function (control) {\n      return {\n        icon: control === 'volume' ? /*#__PURE__*/React.createElement(Icons.Volume, {\n          color: iconColor\n        }) : /*#__PURE__*/React.createElement(Icons.ReduceVolume, {\n          color: iconColor\n        }),\n        a11yTitle: format({\n          id: control === 'volume' ? 'video.volumeUp' : 'video.volumeDown',\n          messages: messages\n        }),\n        onClick: function onClick() {\n          if (volume <= 1 - VOLUME_STEP && control === 'volume') {\n            return louder();\n          }\n          if (volume >= VOLUME_STEP && control === 'reduceVolume') {\n            return quieter();\n          }\n          return undefined;\n        },\n        close: false\n      };\n    });\n    var buttonProps = {\n      captions: captionControls,\n      descriptions: descriptionControls,\n      volume: volumeControls,\n      fullScreen: {\n        icon: /*#__PURE__*/React.createElement(Icons.FullScreen, {\n          color: iconColor\n        }),\n        a11yTitle: format({\n          id: 'video.fullScreen',\n          messages: messages\n        }),\n        onClick: fullscreen\n      },\n      pause: {\n        icon: /*#__PURE__*/React.createElement(Icons.Pause, {\n          color: iconColor\n        }),\n        a11yTitle: format({\n          id: 'video.pauseButton',\n          messages: messages\n        }),\n        disabled: !playing,\n        onClick: pause\n      },\n      play: {\n        icon: /*#__PURE__*/React.createElement(Icons.Play, {\n          color: iconColor\n        }),\n        a11yTitle: format({\n          id: 'video.playButton',\n          messages: messages\n        }),\n        disabled: playing,\n        onClick: play\n      }\n    };\n    var controlsMenuItems = [];\n    (_controls$items = controls.items) == null || _controls$items.map(function (item) {\n      if (item === 'volume') {\n        volumeControls.map(function (control) {\n          return controlsMenuItems.push(control);\n        });\n        return undefined;\n      }\n      if (item === 'captions' && typeof buttonProps[item] === 'object') {\n        for (var i = 0; i < buttonProps[item].length; i += 1) controlsMenuItems.push(buttonProps[item][i]);\n        return undefined;\n      }\n      if (item === 'descriptions') {\n        controlsMenuItems.push(buttonProps[item]);\n        return undefined;\n      }\n      if (typeof item === 'string') {\n        return controlsMenuItems.push(buttonProps[item]);\n      }\n      return controlsMenuItems.push(item);\n    });\n    controlsElement = /*#__PURE__*/React.createElement(StyledVideoControls, {\n      over: over,\n      active: !hasPlayed || controls.position === 'below' || over && interacting,\n      onBlur: function onBlur() {\n        if (!containsFocus(containerRef.current)) setInteracting(false);\n      }\n    }, /*#__PURE__*/React.createElement(Box, {\n      direction: \"row\",\n      align: \"center\",\n      justify: \"between\",\n      background: background\n    }, /*#__PURE__*/React.createElement(Button, {\n      icon: playing ? /*#__PURE__*/React.createElement(Icons.Pause, {\n        color: iconColor,\n        a11yTitle: format({\n          id: 'video.pauseButton',\n          messages: messages\n        })\n      }) : /*#__PURE__*/React.createElement(Icons.Play, {\n        color: iconColor,\n        a11yTitle: format({\n          id: 'video.playButton',\n          messages: messages\n        })\n      }),\n      hoverIndicator: \"background\",\n      onClick: playing ? pause : play,\n      onFocus: function onFocus() {\n        return setInteracting(true);\n      }\n    }), /*#__PURE__*/React.createElement(Box, {\n      direction: \"row\",\n      align: \"center\",\n      flex: true\n    }, /*#__PURE__*/React.createElement(Box, {\n      flex: true\n    }, /*#__PURE__*/React.createElement(Stack, null, /*#__PURE__*/React.createElement(Meter, {\n      \"aria-label\": format({\n        id: 'video.progressMeter',\n        messages: messages\n      }),\n      background: over ? theme.video.scrubber && theme.video.scrubber.track && theme.video.scrubber.track.color || 'dark-3' : undefined,\n      size: \"full\",\n      thickness: (_theme$video = theme.video) == null || (_theme$video = _theme$video.scrubber) == null ? void 0 : _theme$video.thickness,\n      values: [{\n        value: percentagePlayed || 0\n      }]\n    }), /*#__PURE__*/React.createElement(StyledVideoScrubber, _extends({\n      \"aria-label\": format({\n        id: 'video.scrubber',\n        messages: messages\n      }),\n      ref: scrubberRef,\n      tabIndex: 0,\n      role: \"button\",\n      value: scrubTime ? Math.round(scrubTime / duration * 100) : undefined,\n      onMouseMove: scrub,\n      onMouseLeave: function onMouseLeave() {\n        return setScrubTime(undefined);\n      },\n      onClick: seek,\n      onFocus: function onFocus() {\n        return setInteracting(true);\n      }\n    }, passThemeFlag)))), /*#__PURE__*/React.createElement(Box, {\n      pad: theme == null || (_theme$video2 = theme.video) == null || (_theme$video2 = _theme$video2.time) == null || (_theme$video2 = _theme$video2.container) == null ? void 0 : _theme$video2.pad\n    }, /*#__PURE__*/React.createElement(Text, {\n      margin: \"none\"\n    }, formattedTime))), /*#__PURE__*/React.createElement(Menu, {\n      icon: /*#__PURE__*/React.createElement(Icons.Configure, {\n        color: iconColor\n      }),\n      dropAlign: {\n        bottom: 'top',\n        right: 'right'\n      },\n      dropBackground: background,\n      messages: {\n        openMenu: format({\n          id: 'video.openMenu',\n          messages: messages\n        }),\n        closeMenu: format({\n          id: 'video.closeMenu',\n          messages: messages\n        })\n      },\n      items: [].concat(controlsMenuItems),\n      onFocus: function onFocus() {\n        return setInteracting(true);\n      }\n    })));\n  }\n  var mouseEventListeners;\n  if ((controls == null ? void 0 : controls.position) === 'over') {\n    mouseEventListeners = {\n      onMouseEnter: function onMouseEnter() {\n        return setInteracting(true);\n      },\n      onMouseMove: function onMouseMove() {\n        return setInteracting(true);\n      },\n      onTouchStart: function onTouchStart() {\n        return setInteracting(true);\n      }\n    };\n  }\n  var style;\n  if (rest.fit === 'contain' && (controls == null ? void 0 : controls.position) === 'over') {\n    // constrain the size to fit the aspect ratio so the controls\n    // overlap correctly\n    if (width) {\n      style = {\n        width: width\n      };\n    } else if (height) {\n      style = {\n        height: height\n      };\n    }\n  }\n  return /*#__PURE__*/React.createElement(Keyboard, {\n    onLeft: seekBackward,\n    onRight: seekForward\n  }, /*#__PURE__*/React.createElement(StyledVideoContainer, _extends({\n    ref: containerRef\n  }, mouseEventListeners, {\n    alignSelf: alignSelf,\n    gridArea: gridArea,\n    margin: margin,\n    style: style,\n    tabIndex: \"-1\"\n  }, passThemeFlag), /*#__PURE__*/React.createElement(StyledVideo, _extends({}, passThemeFlag, rest, {\n    ref: videoRef,\n    onDurationChange: function onDurationChange(event) {\n      var video = videoRef.current;\n      setDuration(video.duration);\n      setPercentagePlayed(video.currentTime / video.duration * 100);\n      if (_onDurationChange) _onDurationChange(event);\n    },\n    onEnded: function onEnded(event) {\n      setPlaying(false);\n      if (_onEnded) _onEnded(event);\n    },\n    onPause: function onPause(event) {\n      setPlaying(false);\n      if (_onPause) _onPause(event);\n    },\n    onPlay: function onPlay(event) {\n      setPlaying(true);\n      setHasPlayed(true);\n      if (_onPlay) _onPlay(event);\n    },\n    onTimeUpdate: function onTimeUpdate(event) {\n      var video = videoRef.current;\n      setCurrentTime(video.currentTime);\n      setPercentagePlayed(video.currentTime / video.duration * 100);\n      if (_onTimeUpdate) _onTimeUpdate(event);\n    },\n    onVolumeChange: function onVolumeChange(event) {\n      setVolume(videoRef.current.volume);\n      if (_onVolumeChange) _onVolumeChange(event);\n    },\n    autoPlay: autoPlay || false,\n    loop: loop || false\n  }), children), controlsElement));\n});\nVideo.displayName = 'Video';\nVideo.propTypes = VideoPropTypes;\nexport { Video };"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}