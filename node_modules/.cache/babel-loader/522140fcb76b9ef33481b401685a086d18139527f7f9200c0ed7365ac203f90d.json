{"ast":null,"code":"var _excluded = [\"activeDate\", \"animate\", \"bounds\", \"children\", \"date\", \"dates\", \"daysOfWeek\", \"disabled\", \"initialFocus\", \"fill\", \"firstDayOfWeek\", \"header\", \"level\", \"locale\", \"messages\", \"onReference\", \"onSelect\", \"range\", \"reference\", \"responsive\", \"showAdjacentDays\", \"size\", \"timestamp\"],\n  _excluded2 = [\"container\"];\nfunction _objectWithoutPropertiesLoose(r, e) {\n  if (null == r) return {};\n  var t = {};\n  for (var n in r) if ({}.hasOwnProperty.call(r, n)) {\n    if (-1 !== e.indexOf(n)) continue;\n    t[n] = r[n];\n  }\n  return t;\n}\nfunction _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nimport React, { forwardRef, useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport { AnnounceContext } from '../../contexts/AnnounceContext';\nimport { MessageContext } from '../../contexts/MessageContext';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { Header } from '../Header';\nimport { Heading } from '../Heading';\nimport { Keyboard } from '../Keyboard';\nimport { Text } from '../Text';\nimport { CalendarPropTypes } from './propTypes';\nimport { StyledCalendar, StyledDay, StyledDayButton, StyledDayContainer, StyledWeek, StyledWeeks, StyledWeeksContainer } from './StyledCalendar';\nimport { addDays, addMonths, betweenDates, daysApart, endOfMonth, handleOffset, sameDayOrAfter, sameDayOrBefore, startOfMonth, subtractDays, subtractMonths, withinDates } from './utils';\nimport { setHoursWithOffset } from '../../utils/dates';\nimport { useThemeValue } from '../../utils/useThemeValue';\nvar getLocaleString = function getLocaleString(value, locale) {\n  return value == null ? void 0 : value.toLocaleDateString(locale, {\n    month: 'long',\n    day: 'numeric',\n    year: 'numeric'\n  });\n};\nvar currentlySelectedString = function currentlySelectedString(value, locale) {\n  var selected;\n  if (value instanceof Date) {\n    selected = \"Currently selected \" + getLocaleString(value, locale) + \";\";\n  } else if (value != null && value.length) {\n    selected = \"Currently selected \" + value.map(function (item) {\n      var dates;\n      if (!Array.isArray(item)) {\n        dates = \"\" + getLocaleString(item, locale);\n      } else {\n        var start = item[0] !== undefined ? getLocaleString(item[0], locale) : 'none';\n        var end = item[1] !== undefined ? getLocaleString(item[1], locale) : 'none';\n        dates = start + \" through \" + end;\n      }\n      return dates;\n    });\n  } else {\n    selected = 'No date selected';\n  }\n  return selected;\n};\n\n// calendar value may be a single date, multiple dates, a range of dates\n// supplied as ISOstrings.\nvar _normalizeInput = function normalizeInput(dateValue) {\n  var result;\n  if (dateValue instanceof Date) {\n    result = dateValue;\n  }\n  // date may be an empty string ''\n  else if (typeof dateValue === 'string' && dateValue.length) {\n    result = setHoursWithOffset(dateValue);\n  } else if (Array.isArray(dateValue)) {\n    result = dateValue.map(function (d) {\n      return _normalizeInput(d);\n    });\n  }\n  return result;\n};\nvar _normalizeOutput = function normalizeOutput(dateValue, outputFormat) {\n  var result;\n  var normalize = function normalize(value) {\n    var normalizedValue = value.toISOString();\n    if (normalizedValue && outputFormat === 'no timezone') {\n      var _handleOffset$toISOSt = handleOffset(normalizedValue).toISOString().split('T');\n      normalizedValue = _handleOffset$toISOSt[0];\n    }\n    return normalizedValue;\n  };\n  if (dateValue instanceof Date) {\n    result = normalize(dateValue);\n  } else if (typeof dateValue === 'undefined') {\n    result = undefined;\n  } else {\n    result = dateValue.map(function (d) {\n      return _normalizeOutput(d, outputFormat);\n    });\n  }\n  return result;\n};\n\n// format value to [[]] for internal functions\nvar normalizeRange = function normalizeRange(value, activeDate) {\n  var range = value;\n  if (range instanceof Date) range = activeDate === 'start' ? [[undefined, range]] : [[range, undefined]];else if (Array.isArray(range) && !Array.isArray(range[0])) range = [range];\n  return range;\n};\nvar getReference = function getReference(reference, value, activeDate) {\n  var nextReference;\n  if (value) {\n    if (Array.isArray(value)) {\n      if (value[0] instanceof Date) {\n        // if we just selected an end date, active date will be 'start'\n        // and we should set the reference to the end date\n        if (activeDate === 'start' && value[1] instanceof Date) {\n          nextReference = value[1];\n        } else {\n          nextReference = value[0];\n        }\n      } else if (Array.isArray(value[0])) {\n        // if we just selected an end date, active date will be 'start'\n        // and we should set the reference to the end date\n        if (activeDate === 'start' && value[0][1]) {\n          // eslint-disable-next-line prefer-destructuring\n          nextReference = value[0][1];\n        } else {\n          nextReference = value[0][0] ? value[0][0] : value[0][1];\n        }\n      } else {\n        nextReference = new Date();\n        nextReference.setHours(0, 0, 0, 0);\n      }\n    } else nextReference = value;\n  } else if (reference) {\n    nextReference = reference;\n  } else {\n    nextReference = new Date();\n    nextReference.setHours(0, 0, 0, 0);\n  }\n  return nextReference;\n};\nvar buildDisplayBounds = function buildDisplayBounds(reference, firstDayOfWeek) {\n  var start = new Date(reference);\n  start.setDate(1); // first of month\n\n  // In case Sunday is the first day of the month, and the user asked for Monday\n  // to be the first day of the week, then we need to include Sunday and six\n  // days prior.\n  start = start.getDay() === 0 && firstDayOfWeek === 1 ? start = subtractDays(start, 6) :\n  // beginning of week\n  start = subtractDays(start, start.getDay() - firstDayOfWeek);\n  var end = addDays(start, 7 * 5 + 7); // 5 weeks to end of week\n  return [start, end];\n};\nvar monthBounds = function monthBounds(reference) {\n  var start = new Date(reference);\n  start.setDate(1); // first of month\n  var end = endOfMonth(start);\n  return [start, end];\n};\nvar disabledCalendarPreviousMonthButton = function disabledCalendarPreviousMonthButton(date, reference, bounds) {\n  if (!bounds) return false;\n  var lastBound = new Date(bounds[1]);\n  return !sameDayOrBefore(lastBound, reference) && !betweenDates(date, bounds);\n};\nvar disabledCalendarNextMonthButton = function disabledCalendarNextMonthButton(date, reference, bounds) {\n  if (!bounds) return false;\n  var firstBound = new Date(bounds[0]);\n  return !sameDayOrAfter(firstBound, reference) && !betweenDates(date, bounds);\n};\nvar _getOutputFormat = function getOutputFormat(dates) {\n  if (typeof dates === 'string' && (dates == null ? void 0 : dates.indexOf('T')) === -1) {\n    return 'no timezone';\n  }\n  if (Array.isArray(dates)) {\n    return _getOutputFormat(dates[0]);\n  }\n  return 'date timezone';\n};\nexport { _getOutputFormat as getOutputFormat };\nvar millisecondsPerYear = 31557600000;\nvar CalendarDay = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var activeProp = _ref.activeProp,\n    children = _ref.children,\n    day = _ref.day,\n    disabledProp = _ref.disabledProp,\n    fill = _ref.fill,\n    size = _ref.size,\n    isInRange = _ref.isInRange,\n    isSelected = _ref.isSelected,\n    otherMonth = _ref.otherMonth,\n    rangePosition = _ref.rangePosition,\n    _ref$buttonProps = _ref.buttonProps,\n    buttonProps = _ref$buttonProps === void 0 ? {} : _ref$buttonProps,\n    responsive = _ref.responsive;\n  var _useThemeValue = useThemeValue(),\n    passThemeFlag = _useThemeValue.passThemeFlag;\n  return /*#__PURE__*/React.createElement(StyledDayContainer, {\n    role: \"gridcell\",\n    \"aria-selected\": isSelected,\n    inRange: isInRange,\n    isSelected: isSelected,\n    rangePosition: rangePosition,\n    sizeProp: size,\n    fillContainer: fill,\n    responsive: responsive\n  }, /*#__PURE__*/React.createElement(StyledDayButton, _extends({\n    \"aria-disabled\": disabledProp,\n    disabledProp: disabledProp,\n    fill: fill,\n    plain: true,\n    tabIndex: (activeProp == null ? void 0 : activeProp.getTime()) === (day == null ? void 0 : day.getTime()) ? 0 : -1,\n    responsive: responsive\n  }, buttonProps, {\n    ref: (activeProp == null ? void 0 : activeProp.getTime()) === (day == null ? void 0 : day.getTime()) ? ref : undefined\n  }), function (_ref2) {\n    var hover = _ref2.hover;\n    return /*#__PURE__*/React.createElement(StyledDay, _extends({\n      disabledProp: disabledProp,\n      hover: hover,\n      inRange: isInRange,\n      isSelected: isSelected,\n      otherMonth: otherMonth,\n      sizeProp: size,\n      fillContainer: fill,\n      responsive: responsive\n    }, passThemeFlag), children);\n  }));\n});\nvar CalendarCustomDay = function CalendarCustomDay(_ref3) {\n  var ariaSelected = _ref3['aria-selected'],\n    children = _ref3.children,\n    fill = _ref3.fill,\n    size = _ref3.size,\n    buttonProps = _ref3.buttonProps,\n    responsive = _ref3.responsive;\n  if (!buttonProps) {\n    return /*#__PURE__*/React.createElement(StyledDayContainer, {\n      \"aria-selected\": ariaSelected,\n      role: \"gridcell\",\n      sizeProp: size,\n      fillContainer: fill,\n      responsive: responsive\n    }, children);\n  }\n  return /*#__PURE__*/React.createElement(StyledDayContainer, {\n    \"aria-selected\": ariaSelected,\n    role: \"gridcell\",\n    sizeProp: size,\n    fillContainer: fill,\n    responsive: responsive\n  }, /*#__PURE__*/React.createElement(StyledDayButton, _extends({\n    fill: fill,\n    responsive: responsive\n  }, buttonProps), children));\n};\nvar Calendar = /*#__PURE__*/forwardRef(function (_ref4, ref) {\n  var activeDateProp = _ref4.activeDate,\n    _ref4$animate = _ref4.animate,\n    animate = _ref4$animate === void 0 ? true : _ref4$animate,\n    boundsProp = _ref4.bounds,\n    children = _ref4.children,\n    dateProp = _ref4.date,\n    datesProp = _ref4.dates,\n    daysOfWeek = _ref4.daysOfWeek,\n    disabled = _ref4.disabled,\n    initialFocus = _ref4.initialFocus,\n    fill = _ref4.fill,\n    _ref4$firstDayOfWeek = _ref4.firstDayOfWeek,\n    firstDayOfWeek = _ref4$firstDayOfWeek === void 0 ? 0 : _ref4$firstDayOfWeek,\n    header = _ref4.header,\n    level = _ref4.level,\n    _ref4$locale = _ref4.locale,\n    locale = _ref4$locale === void 0 ? 'en-US' : _ref4$locale,\n    messages = _ref4.messages,\n    onReference = _ref4.onReference,\n    onSelect = _ref4.onSelect,\n    range = _ref4.range,\n    referenceProp = _ref4.reference,\n    _ref4$responsive = _ref4.responsive,\n    responsiveProp = _ref4$responsive === void 0 ? true : _ref4$responsive,\n    _ref4$showAdjacentDay = _ref4.showAdjacentDays,\n    showAdjacentDays = _ref4$showAdjacentDay === void 0 ? true : _ref4$showAdjacentDay,\n    _ref4$size = _ref4.size,\n    size = _ref4$size === void 0 ? 'medium' : _ref4$size,\n    timestampProp = _ref4.timestamp,\n    rest = _objectWithoutPropertiesLoose(_ref4, _excluded);\n  var _useThemeValue2 = useThemeValue(),\n    theme = _useThemeValue2.theme,\n    passThemeFlag = _useThemeValue2.passThemeFlag;\n  var announce = useContext(AnnounceContext);\n  var _useContext = useContext(MessageContext),\n    format = _useContext.format;\n\n  // If fill is true the responsive behavior isn't needed.\n  var responsive = responsiveProp && !fill;\n\n  // set activeDate when caller changes it, allows us to change\n  // it internally too\n  var _useState = useState(dateProp && typeof dateProp === 'string' && range ? 'end' : 'start'),\n    activeDate = _useState[0],\n    setActiveDate = _useState[1];\n  useEffect(function () {\n    if (activeDateProp) setActiveDate(activeDateProp);\n  }, [activeDateProp]);\n  var _useState2 = useState(_normalizeInput(dateProp || datesProp)),\n    value = _useState2[0],\n    setValue = _useState2[1];\n  useEffect(function () {\n    var val = dateProp || datesProp;\n    setValue(_normalizeInput(val));\n  }, [dateProp, datesProp]);\n  var _useState3 = useState(getReference(_normalizeInput(referenceProp), value, activeDate)),\n    reference = _useState3[0],\n    setReference = _useState3[1];\n  useEffect(function () {\n    if (value) {\n      setReference(getReference(_normalizeInput(referenceProp), value, activeDate));\n    }\n  }, [referenceProp, value, activeDate]);\n  var _useState4 = useState(_getOutputFormat(dateProp || datesProp)),\n    outputFormat = _useState4[0],\n    setOutputFormat = _useState4[1];\n  useEffect(function () {\n    setOutputFormat(_getOutputFormat(dateProp || datesProp));\n  }, [dateProp, datesProp]);\n\n  // normalize bounds\n  var _useState5 = useState(boundsProp),\n    bounds = _useState5[0],\n    setBounds = _useState5[1];\n  useEffect(function () {\n    if (boundsProp) setBounds(boundsProp);else setBounds(undefined);\n  }, [boundsProp]);\n\n  // calculate the bounds we display based on the reference\n  var _useState6 = useState(buildDisplayBounds(reference, firstDayOfWeek)),\n    displayBounds = _useState6[0],\n    setDisplayBounds = _useState6[1];\n  var _useState7 = useState(),\n    targetDisplayBounds = _useState7[0],\n    setTargetDisplayBounds = _useState7[1];\n  var _useState8 = useState(),\n    slide = _useState8[0],\n    setSlide = _useState8[1];\n  var _useState9 = useState(),\n    animating = _useState9[0],\n    setAnimating = _useState9[1];\n\n  // When the reference changes, we need to update the displayBounds.\n  // This is easy when we aren't animating. If we are animating,\n  // we temporarily increase the displayBounds to be the union of the old\n  // and new ones and set slide to drive the animation. We keep track\n  // of where we are heading via targetDisplayBounds. When the animation\n  // finishes, we prune displayBounds down to where we are headed and\n  // clear the slide and targetDisplayBounds.\n  useEffect(function () {\n    var nextDisplayBounds = buildDisplayBounds(reference, firstDayOfWeek);\n\n    // Checks if the difference between the current and next DisplayBounds is\n    // greater than a year. If that's the case, calendar should update without\n    // animation.\n    if (nextDisplayBounds[0].getTime() !== displayBounds[0].getTime() && nextDisplayBounds[1].getTime() !== displayBounds[1].getTime()) {\n      var diffBoundsAboveYear = false;\n      if (nextDisplayBounds[0].getTime() < displayBounds[0].getTime()) {\n        if (displayBounds[0].getTime() - nextDisplayBounds[0].getTime() > millisecondsPerYear) {\n          diffBoundsAboveYear = true;\n        }\n      } else if (nextDisplayBounds[1].getTime() > displayBounds[1].getTime()) {\n        if (nextDisplayBounds[1].getTime() - displayBounds[1].getTime() > millisecondsPerYear) {\n          diffBoundsAboveYear = true;\n        }\n      }\n      if (!animate || diffBoundsAboveYear) {\n        setDisplayBounds(nextDisplayBounds);\n      } else {\n        setTargetDisplayBounds(nextDisplayBounds);\n      }\n    }\n  }, [animate, firstDayOfWeek, reference, displayBounds]);\n  useEffect(function () {\n    // if the reference timezone has changed (e.g., controlled component),\n    // both ends of the displayBounds should inherit that new timestamp\n    if (targetDisplayBounds) {\n      if (targetDisplayBounds[0].getTime() < displayBounds[0].getTime() || targetDisplayBounds[1].getTime() > displayBounds[1].getTime()) {\n        setDisplayBounds([targetDisplayBounds[0], targetDisplayBounds[1]]);\n      }\n      if (targetDisplayBounds[0].getTime() < displayBounds[0].getTime()) {\n        // only animate if the duration is within a year\n        if (displayBounds[0].getTime() - targetDisplayBounds[0].getTime() < millisecondsPerYear && daysApart(displayBounds[0], targetDisplayBounds[0])) {\n          setSlide({\n            direction: 'down',\n            weeks: daysApart(displayBounds[0], targetDisplayBounds[0]) / 7\n          });\n          setAnimating(true);\n        }\n      } else if (targetDisplayBounds[1].getTime() > displayBounds[1].getTime()) {\n        if (targetDisplayBounds[1].getTime() - displayBounds[1].getTime() < millisecondsPerYear && daysApart(targetDisplayBounds[1], displayBounds[1])) {\n          setSlide({\n            direction: 'up',\n            weeks: daysApart(targetDisplayBounds[1], displayBounds[1]) / 7\n          });\n          setAnimating(true);\n        }\n      }\n      return undefined;\n    }\n    setSlide(undefined);\n    return undefined;\n  }, [animating, displayBounds, targetDisplayBounds]);\n\n  // Last step in updating the displayBounds. Allows for pruning\n  // displayBounds and cleaning up states to occur after animation.\n  useEffect(function () {\n    if (animating && targetDisplayBounds) {\n      // Wait for animation to finish before cleaning up.\n      var timer = setTimeout(function () {\n        setDisplayBounds(targetDisplayBounds);\n        setTargetDisplayBounds(undefined);\n        setSlide(undefined);\n        setAnimating(false);\n      }, 400 // Empirically determined.\n      );\n      return function () {\n        return clearTimeout(timer);\n      };\n    }\n    return undefined;\n  }, [animating, targetDisplayBounds]);\n\n  // We have to deal with reference being the end of a month with more\n  // days than the month we are changing to. So, we always set reference\n  // to the first of the month before changing the month.\n  var previousMonth = useMemo(function () {\n    return endOfMonth(subtractMonths(startOfMonth(reference), 1));\n  }, [reference]);\n  var nextMonth = useMemo(function () {\n    return startOfMonth(addMonths(startOfMonth(reference), 1));\n  }, [reference]);\n  var initialFocusDate = showAdjacentDays ? new Date(displayBounds[0]) : startOfMonth(reference);\n  var _useState0 = useState(),\n    focus = _useState0[0],\n    setFocus = _useState0[1];\n  var _useState1 = useState(initialFocusDate),\n    active = _useState1[0],\n    setActive = _useState1[1];\n  var focusableDateRef = useRef(undefined);\n  useEffect(function () {\n    if (focusableDateRef != null && focusableDateRef.current && initialFocus === 'days') focusableDateRef.current.focus();\n  }, [initialFocus, focusableDateRef]);\n  var handleReference = useCallback(function (nextReference) {\n    setReference(nextReference);\n    if (onReference) onReference(nextReference.toISOString());\n  }, [onReference]);\n  var changeReference = useCallback(function (nextReference) {\n    if (betweenDates(nextReference, bounds)) handleReference(nextReference);\n  }, [handleReference, bounds]);\n  var changeCalendarMonth = function changeCalendarMonth(messageId, newMonth) {\n    handleReference(newMonth);\n    var referenceStartOfMonth = startOfMonth(reference);\n    var firstOfMonth = new Date(newMonth.getFullYear(), newMonth.getMonth(), 1, referenceStartOfMonth.getHours(), referenceStartOfMonth.getMinutes(), referenceStartOfMonth.getSeconds());\n    setActive(firstOfMonth);\n    announce(format({\n      id: messageId,\n      messages: messages,\n      values: {\n        date: newMonth.toLocaleDateString(locale, {\n          month: 'long',\n          year: 'numeric'\n        })\n      }\n    }));\n  };\n  var handleRange = useCallback(function (selectedDate) {\n    var _priorRange$, _priorRange$2;\n    var result;\n    var priorRange = normalizeRange(value, activeDate);\n    // deselect when date clicked was the start/end of the range\n    if (selectedDate.getTime() === (priorRange == null || (_priorRange$ = priorRange[0]) == null || (_priorRange$ = _priorRange$[0]) == null ? void 0 : _priorRange$.getTime())) {\n      result = [[undefined, priorRange[0][1]]];\n      setActiveDate('start');\n    } else if (selectedDate.getTime() === (priorRange == null || (_priorRange$2 = priorRange[0]) == null || (_priorRange$2 = _priorRange$2[1]) == null ? void 0 : _priorRange$2.getTime())) {\n      result = [[priorRange[0][0], undefined]];\n      setActiveDate('end');\n    }\n    // selecting start date\n    else if (activeDate === 'start') {\n      if (!priorRange) {\n        result = [[selectedDate, undefined]];\n      } else if (!priorRange[0][1]) {\n        result = [[selectedDate, priorRange[0][1]]];\n      } else if (selectedDate.getTime() < priorRange[0][1].getTime()) {\n        result = [[selectedDate, priorRange[0][1]]];\n      } else if (selectedDate.getTime() > priorRange[0][1].getTime()) {\n        result = [[selectedDate, undefined]];\n      }\n      setActiveDate('end');\n    }\n    // selecting end date\n    else if (!priorRange) {\n      result = [[undefined, selectedDate]];\n      setActiveDate('start');\n    } else if (selectedDate.getTime() < priorRange[0][0].getTime()) {\n      result = [[selectedDate, undefined]];\n      setActiveDate('end');\n    } else if (selectedDate.getTime() > priorRange[0][0].getTime()) {\n      result = [[priorRange[0][0], selectedDate]];\n      setActiveDate('start');\n    }\n\n    // If no dates selected, always return undefined; else format\n    // result according to specified range value.\n    if (result[0].includes(undefined)) {\n      if (range === 'array') {\n        result = !result[0][0] && !result[0][1] ? undefined : result;\n      } else {\n        result = result[0].find(function (d) {\n          return d !== undefined;\n        });\n      }\n    }\n    setValue(result);\n    return result;\n  }, [activeDate, value, range]);\n  var selectDate = useCallback(function (selectedDate) {\n    var nextValue;\n    if (range || Array.isArray(value == null ? void 0 : value[0])) {\n      nextValue = handleRange(selectedDate);\n    } else {\n      nextValue = selectedDate;\n    }\n    if (onSelect) {\n      nextValue = _normalizeOutput(nextValue, outputFormat);\n      onSelect(nextValue);\n    }\n  }, [handleRange, onSelect, outputFormat, range, value]);\n  var onClick = function onClick(selectedDate) {\n    selectDate(selectedDate);\n    announce(\"Selected \" + getLocaleString(selectedDate, locale), 'assertive');\n    setActive(selectedDate);\n  };\n  var renderCalendarHeader = function renderCalendarHeader() {\n    var _theme$calendar$size;\n    var PreviousIcon = size === 'small' ? theme.calendar.icons.small.previous : theme.calendar.icons.previous;\n    var NextIcon = size === 'small' ? theme.calendar.icons.small.next : theme.calendar.icons.next;\n    var monthAndYear = reference.toLocaleDateString(locale, {\n      month: 'long',\n      year: 'numeric'\n    });\n\n    // theme.calendar.heading.level should be removed in v3 of grommet\n    // theme.calendar[size].title should be used instead\n    var headingLevel;\n    if (level !== undefined) {\n      headingLevel = level;\n    } else if (size === 'small') {\n      headingLevel = theme.calendar.heading && theme.calendar.heading.level || 4;\n    } else {\n      headingLevel = (theme.calendar.heading && theme.calendar.heading.level || 4) - 1;\n    }\n    var _ref5 = ((_theme$calendar$size = theme.calendar[size]) == null ? void 0 : _theme$calendar$size.title) || undefined,\n      containerTheme = _ref5.container,\n      textTheme = _objectWithoutPropertiesLoose(_ref5, _excluded2);\n    return /*#__PURE__*/React.createElement(Box, {\n      direction: \"row\",\n      justify: \"between\",\n      align: \"center\"\n    }, /*#__PURE__*/React.createElement(Header, {\n      flex: true,\n      pad: containerTheme.pad\n    }, Object.keys(textTheme).length !== 0 ? /*#__PURE__*/React.createElement(Text, textTheme, monthAndYear) : /*#__PURE__*/React.createElement(Heading, {\n      level: headingLevel,\n      size: size,\n      margin: \"none\",\n      overflowWrap: \"normal\"\n    }, monthAndYear)), /*#__PURE__*/React.createElement(Box, {\n      flex: false,\n      direction: \"row\",\n      align: \"center\"\n    }, /*#__PURE__*/React.createElement(Button, {\n      a11yTitle: format({\n        id: 'calendar.previous',\n        messages: messages,\n        values: {\n          date: previousMonth.toLocaleDateString(locale, {\n            month: 'long',\n            year: 'numeric'\n          })\n        }\n      }),\n      icon: /*#__PURE__*/React.createElement(PreviousIcon, {\n        size: size !== 'small' ? size : undefined\n      }),\n      disabled: disabledCalendarPreviousMonthButton(previousMonth, reference, bounds),\n      onClick: function onClick() {\n        return changeCalendarMonth('calendar.previousMove', previousMonth);\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      a11yTitle: format({\n        id: 'calendar.next',\n        messages: messages,\n        values: {\n          date: nextMonth.toLocaleDateString(locale, {\n            month: 'long',\n            year: 'numeric'\n          })\n        }\n      }),\n      icon: /*#__PURE__*/React.createElement(NextIcon, {\n        size: size !== 'small' ? size : undefined\n      }),\n      disabled: disabledCalendarNextMonthButton(nextMonth, reference, bounds),\n      onClick: function onClick() {\n        return changeCalendarMonth('calendar.nextMove', nextMonth);\n      }\n    })));\n  };\n  var renderDaysOfWeek = function renderDaysOfWeek() {\n    var day = new Date(displayBounds[0]);\n    var days = [];\n    while (days.length < 7) {\n      days.push(/*#__PURE__*/React.createElement(StyledDayContainer, {\n        role: \"gridcell\",\n        key: days.length,\n        sizeProp: size,\n        fillContainer: fill,\n        responsive: responsive\n      }, /*#__PURE__*/React.createElement(StyledDay, {\n        sizeProp: size,\n        fillContainer: fill,\n        responsive: responsive\n      }, day.toLocaleDateString(locale, {\n        weekday: 'narrow'\n      }))));\n      day = addDays(day, 1);\n    }\n    return /*#__PURE__*/React.createElement(StyledWeek, {\n      role: \"row\"\n    }, days);\n  };\n  var weeks = [];\n  var day = new Date(displayBounds[0]);\n  var days;\n  var firstDayInMonth;\n  var blankWeek = false;\n  var _loop = function _loop() {\n    if (day.getDay() === firstDayOfWeek) {\n      if (days) {\n        weeks.push(/*#__PURE__*/React.createElement(StyledWeek, {\n          role: \"row\",\n          key: day.getTime(),\n          fillContainer: fill\n        }, days));\n      }\n      days = [];\n    }\n    var otherMonth = day.getMonth() !== reference.getMonth();\n    if (!showAdjacentDays && otherMonth) {\n      days.push(/*#__PURE__*/React.createElement(StyledDayContainer, {\n        key: day.getTime(),\n        sizeProp: size,\n        fillContainer: fill,\n        responsive: responsive\n      }, /*#__PURE__*/React.createElement(StyledDay, {\n        sizeProp: size,\n        fillContainer: fill,\n        responsive: responsive\n      })));\n      if (weeks.length === 5 &&\n      /* If the length days array is less than the current getDate()\n      we know that all days in the array are from the next month. */\n      days.length < day.getDate()) {\n        blankWeek = true;\n      }\n    } else if (\n    /* Do not show adjacent days in 6th row if all days\n    fall in the next month */\n    showAdjacentDays === 'trim' && otherMonth && weeks.length === 5 &&\n    /* If the length days array is less than the current getDate()\n    we know that all days in the array are from the next month. */\n    days.length < day.getDate()) {\n      blankWeek = true;\n      days.push(/*#__PURE__*/React.createElement(StyledDayContainer, {\n        key: day.getTime(),\n        sizeProp: size,\n        fillContainer: fill,\n        responsive: responsive\n      }, /*#__PURE__*/React.createElement(StyledDay, {\n        sizeProp: size,\n        fillContainer: fill,\n        responsive: responsive\n      })));\n    } else {\n      var dateObject = day;\n      // this.dayRefs[dateObject] = React.createRef();\n      var selected = false;\n      var inRange = false;\n      var rangePosition;\n      var _withinDates = withinDates(day, range ? normalizeRange(value, activeDate) : value),\n        selectedState = _withinDates[0];\n      if (selectedState === 2) {\n        selected = true;\n        var _withinDates2 = withinDates(day, range ? normalizeRange(value, activeDate) : value);\n        rangePosition = _withinDates2[1];\n      } else if (selectedState === 1) {\n        inRange = true;\n      }\n      var dayDisabled = !!(withinDates(day, _normalizeInput(disabled))[0] || bounds && !betweenDates(day, _normalizeInput(bounds)));\n      if (!firstDayInMonth && !dayDisabled && day.getMonth() === reference.getMonth()) {\n        firstDayInMonth = dateObject;\n      }\n      if (!children) {\n        days.push(/*#__PURE__*/React.createElement(CalendarDay, {\n          activeProp: active,\n          day: day,\n          key: day.getTime(),\n          disabledProp: dayDisabled,\n          buttonProps: {\n            a11yTitle: day.toDateString(),\n            onClick: dayDisabled ? function () {} : function () {\n              return onClick(dateObject);\n            }\n          },\n          isInRange: inRange,\n          isSelected: selected,\n          otherMonth: day.getMonth() !== reference.getMonth(),\n          rangePosition: rangePosition,\n          size: size,\n          fill: fill,\n          ref: focusableDateRef,\n          responsive: responsive\n        }, day.getDate()));\n      } else {\n        days.push(/*#__PURE__*/React.createElement(CalendarCustomDay, {\n          key: day.getTime(),\n          \"aria-selected\": selected,\n          buttonProps: onSelect ? {\n            a11yTitle: day.toDateString(),\n            active: active && active.getTime() === day.getTime(),\n            disabled: dayDisabled,\n            onClick: dayDisabled ? function () {} : function () {\n              return onClick(dateObject);\n            }\n          } : null,\n          size: size,\n          fill: fill,\n          responsive: responsive\n        }, children({\n          date: day,\n          day: day.getDate(),\n          isInRange: inRange,\n          isSelected: selected\n        })));\n      }\n    }\n    day = addDays(day, 1);\n  };\n  while (day.getTime() < displayBounds[1].getTime()) {\n    _loop();\n  }\n  weeks.push(/*#__PURE__*/React.createElement(StyledWeek\n  // if a week contains only blank days, for screen reader accessibility\n  // we don't want to set role=\"row\"\n  , {\n    role: !blankWeek ? 'row' : undefined,\n    key: day.getTime(),\n    fillContainer: fill\n  }, days));\n\n  // track if we need to focus when element becomes available\n  var _useState10 = useState(false),\n    needsFocus = _useState10[0],\n    setNeedsFocus = _useState10[1];\n  // while the calendar contains focus, and is not animating, set\n  // the focus to the active date\n\n  // Focus management effect\n  useEffect(function () {\n    if (!animating && active && focus) {\n      setNeedsFocus(true);\n    }\n  }, [animating, active, focus]);\n  useEffect(function () {\n    if (needsFocus && focusableDateRef != null && focusableDateRef.current) {\n      focusableDateRef.current.focus();\n      setNeedsFocus(false); // Reset flag after focus\n    }\n  }, [active, reference, displayBounds, needsFocus, focusableDateRef]);\n  useEffect(function () {\n    if (bounds && active) {\n      var normalizedBounds = _normalizeInput(bounds);\n      if (!betweenDates(active, normalizedBounds)) {\n        var diff1 = Math.abs(active.getTime() - normalizedBounds[0].getTime());\n        var diff2 = Math.abs(active.getTime() - normalizedBounds[1].getTime());\n        var closerDate = diff1 < diff2 ? 0 : 1;\n        setActive(normalizedBounds[closerDate]);\n      }\n    }\n  }, [active, bounds]);\n  return /*#__PURE__*/React.createElement(StyledCalendar, _extends({\n    ref: ref,\n    sizeProp: size,\n    fillContainer: fill,\n    responsive: responsive\n  }, passThemeFlag, rest), /*#__PURE__*/React.createElement(Box, {\n    fill: fill\n  }, header ? header({\n    date: reference,\n    locale: locale,\n    onPreviousMonth: function onPreviousMonth() {\n      changeReference(previousMonth);\n      setActive(previousMonth);\n      announce(format({\n        id: 'calendar.previous',\n        messages: messages,\n        values: {\n          date: previousMonth.toLocaleDateString(locale, {\n            month: 'long',\n            year: 'numeric'\n          })\n        }\n      }));\n    },\n    onNextMonth: function onNextMonth() {\n      changeReference(nextMonth);\n      setActive(nextMonth);\n      announce(format({\n        id: 'calendar.next',\n        messages: messages,\n        values: {\n          date: nextMonth.toLocaleDateString(locale, {\n            month: 'long',\n            year: 'numeric'\n          })\n        }\n      }));\n    },\n    previousInBound: betweenDates(previousMonth, bounds),\n    nextInBound: betweenDates(nextMonth, bounds)\n  }) : renderCalendarHeader(previousMonth, nextMonth), /*#__PURE__*/React.createElement(Box, {\n    fill: true,\n    role: \"grid\"\n  }, daysOfWeek && renderDaysOfWeek(), /*#__PURE__*/React.createElement(Keyboard, {\n    onUp: function onUp(event) {\n      var nextActive = addDays(active, -7);\n      event.preventDefault();\n      event.stopPropagation(); // so the page doesn't scroll\n      if (!!betweenDates(nextActive, _normalizeInput(bounds)) || !bounds) {\n        setActive(nextActive);\n        if (!betweenDates(nextActive, displayBounds) || !showAdjacentDays && !betweenDates(nextActive, monthBounds(reference))) {\n          changeReference(nextActive);\n        }\n      }\n    },\n    onDown: function onDown(event) {\n      var nextActive = addDays(active, 7);\n      event.preventDefault();\n      event.stopPropagation(); // so the page doesn't scroll\n      if (!!betweenDates(nextActive, _normalizeInput(bounds)) || !bounds) {\n        setActive(nextActive);\n        if (!betweenDates(nextActive, displayBounds) || !showAdjacentDays && !betweenDates(nextActive, monthBounds(reference))) {\n          changeReference(nextActive);\n        }\n      }\n    },\n    onLeft: function onLeft() {\n      var nextActive = addDays(active, -1);\n      if (!!betweenDates(nextActive, _normalizeInput(bounds)) || !bounds) {\n        setActive(nextActive);\n        if (!betweenDates(nextActive, displayBounds) || !showAdjacentDays && !betweenDates(nextActive, monthBounds(reference))) {\n          changeReference(nextActive);\n        }\n      }\n    },\n    onRight: function onRight() {\n      var nextActive = addDays(active, 1);\n      if (!!betweenDates(nextActive, _normalizeInput(bounds)) || !bounds) {\n        setActive(nextActive);\n        if (!betweenDates(nextActive, displayBounds) || !showAdjacentDays && !betweenDates(nextActive, monthBounds(reference))) {\n          changeReference(nextActive);\n        }\n      }\n    }\n  }, /*#__PURE__*/React.createElement(StyledWeeksContainer, _extends({\n    role: \"rowgroup\",\n    \"aria-label\": reference.toLocaleDateString(locale, {\n      month: 'long',\n      year: 'numeric'\n    }) + \"; \" + currentlySelectedString(value, locale),\n    sizeProp: size,\n    fillContainer: fill,\n    responsive: responsive,\n    onFocus: function onFocus() {\n      setFocus(true);\n    },\n    onBlur: function onBlur() {\n      setFocus(false);\n    }\n  }, passThemeFlag), /*#__PURE__*/React.createElement(StyledWeeks, _extends({\n    slide: slide,\n    sizeProp: size,\n    fillContainer: fill\n  }, passThemeFlag), weeks))))));\n});\nCalendar.displayName = 'Calendar';\nCalendar.propTypes = CalendarPropTypes;\nexport { Calendar };","map":{"version":3,"names":["_excluded","_excluded2","_objectWithoutPropertiesLoose","r","e","t","n","hasOwnProperty","call","indexOf","_extends","Object","assign","bind","arguments","length","apply","React","forwardRef","useCallback","useContext","useEffect","useMemo","useRef","useState","AnnounceContext","MessageContext","Box","Button","Header","Heading","Keyboard","Text","CalendarPropTypes","StyledCalendar","StyledDay","StyledDayButton","StyledDayContainer","StyledWeek","StyledWeeks","StyledWeeksContainer","addDays","addMonths","betweenDates","daysApart","endOfMonth","handleOffset","sameDayOrAfter","sameDayOrBefore","startOfMonth","subtractDays","subtractMonths","withinDates","setHoursWithOffset","useThemeValue","getLocaleString","value","locale","toLocaleDateString","month","day","year","currentlySelectedString","selected","Date","map","item","dates","Array","isArray","start","undefined","end","_normalizeInput","normalizeInput","dateValue","result","d","_normalizeOutput","normalizeOutput","outputFormat","normalize","normalizedValue","toISOString","_handleOffset$toISOSt","split","normalizeRange","activeDate","range","getReference","reference","nextReference","setHours","buildDisplayBounds","firstDayOfWeek","setDate","getDay","monthBounds","disabledCalendarPreviousMonthButton","date","bounds","lastBound","disabledCalendarNextMonthButton","firstBound","_getOutputFormat","getOutputFormat","millisecondsPerYear","CalendarDay","_ref","ref","activeProp","children","disabledProp","fill","size","isInRange","isSelected","otherMonth","rangePosition","_ref$buttonProps","buttonProps","responsive","_useThemeValue","passThemeFlag","createElement","role","inRange","sizeProp","fillContainer","plain","tabIndex","getTime","_ref2","hover","CalendarCustomDay","_ref3","ariaSelected","Calendar","_ref4","activeDateProp","_ref4$animate","animate","boundsProp","dateProp","datesProp","daysOfWeek","disabled","initialFocus","_ref4$firstDayOfWeek","header","level","_ref4$locale","messages","onReference","onSelect","referenceProp","_ref4$responsive","responsiveProp","_ref4$showAdjacentDay","showAdjacentDays","_ref4$size","timestampProp","timestamp","rest","_useThemeValue2","theme","announce","_useContext","format","_useState","setActiveDate","_useState2","setValue","val","_useState3","setReference","_useState4","setOutputFormat","_useState5","setBounds","_useState6","displayBounds","setDisplayBounds","_useState7","targetDisplayBounds","setTargetDisplayBounds","_useState8","slide","setSlide","_useState9","animating","setAnimating","nextDisplayBounds","diffBoundsAboveYear","direction","weeks","timer","setTimeout","clearTimeout","previousMonth","nextMonth","initialFocusDate","_useState0","focus","setFocus","_useState1","active","setActive","focusableDateRef","current","handleReference","changeReference","changeCalendarMonth","messageId","newMonth","referenceStartOfMonth","firstOfMonth","getFullYear","getMonth","getHours","getMinutes","getSeconds","id","values","handleRange","selectedDate","_priorRange$","_priorRange$2","priorRange","includes","find","selectDate","nextValue","onClick","renderCalendarHeader","_theme$calendar$size","PreviousIcon","calendar","icons","small","previous","NextIcon","next","monthAndYear","headingLevel","heading","_ref5","title","containerTheme","container","textTheme","justify","align","flex","pad","keys","margin","overflowWrap","a11yTitle","icon","renderDaysOfWeek","days","push","key","weekday","firstDayInMonth","blankWeek","_loop","getDate","dateObject","_withinDates","selectedState","_withinDates2","dayDisabled","toDateString","_useState10","needsFocus","setNeedsFocus","normalizedBounds","diff1","Math","abs","diff2","closerDate","onPreviousMonth","onNextMonth","previousInBound","nextInBound","onUp","event","nextActive","preventDefault","stopPropagation","onDown","onLeft","onRight","onFocus","onBlur","displayName","propTypes"],"sources":["C:/Users/michaejo/Documents/GitRepos/player-api/node_modules/grommet/es6/components/Calendar/Calendar.js"],"sourcesContent":["var _excluded = [\"activeDate\", \"animate\", \"bounds\", \"children\", \"date\", \"dates\", \"daysOfWeek\", \"disabled\", \"initialFocus\", \"fill\", \"firstDayOfWeek\", \"header\", \"level\", \"locale\", \"messages\", \"onReference\", \"onSelect\", \"range\", \"reference\", \"responsive\", \"showAdjacentDays\", \"size\", \"timestamp\"],\n  _excluded2 = [\"container\"];\nfunction _objectWithoutPropertiesLoose(r, e) { if (null == r) return {}; var t = {}; for (var n in r) if ({}.hasOwnProperty.call(r, n)) { if (-1 !== e.indexOf(n)) continue; t[n] = r[n]; } return t; }\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport React, { forwardRef, useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport { AnnounceContext } from '../../contexts/AnnounceContext';\nimport { MessageContext } from '../../contexts/MessageContext';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { Header } from '../Header';\nimport { Heading } from '../Heading';\nimport { Keyboard } from '../Keyboard';\nimport { Text } from '../Text';\nimport { CalendarPropTypes } from './propTypes';\nimport { StyledCalendar, StyledDay, StyledDayButton, StyledDayContainer, StyledWeek, StyledWeeks, StyledWeeksContainer } from './StyledCalendar';\nimport { addDays, addMonths, betweenDates, daysApart, endOfMonth, handleOffset, sameDayOrAfter, sameDayOrBefore, startOfMonth, subtractDays, subtractMonths, withinDates } from './utils';\nimport { setHoursWithOffset } from '../../utils/dates';\nimport { useThemeValue } from '../../utils/useThemeValue';\nvar getLocaleString = function getLocaleString(value, locale) {\n  return value == null ? void 0 : value.toLocaleDateString(locale, {\n    month: 'long',\n    day: 'numeric',\n    year: 'numeric'\n  });\n};\nvar currentlySelectedString = function currentlySelectedString(value, locale) {\n  var selected;\n  if (value instanceof Date) {\n    selected = \"Currently selected \" + getLocaleString(value, locale) + \";\";\n  } else if (value != null && value.length) {\n    selected = \"Currently selected \" + value.map(function (item) {\n      var dates;\n      if (!Array.isArray(item)) {\n        dates = \"\" + getLocaleString(item, locale);\n      } else {\n        var start = item[0] !== undefined ? getLocaleString(item[0], locale) : 'none';\n        var end = item[1] !== undefined ? getLocaleString(item[1], locale) : 'none';\n        dates = start + \" through \" + end;\n      }\n      return dates;\n    });\n  } else {\n    selected = 'No date selected';\n  }\n  return selected;\n};\n\n// calendar value may be a single date, multiple dates, a range of dates\n// supplied as ISOstrings.\nvar _normalizeInput = function normalizeInput(dateValue) {\n  var result;\n  if (dateValue instanceof Date) {\n    result = dateValue;\n  }\n  // date may be an empty string ''\n  else if (typeof dateValue === 'string' && dateValue.length) {\n    result = setHoursWithOffset(dateValue);\n  } else if (Array.isArray(dateValue)) {\n    result = dateValue.map(function (d) {\n      return _normalizeInput(d);\n    });\n  }\n  return result;\n};\nvar _normalizeOutput = function normalizeOutput(dateValue, outputFormat) {\n  var result;\n  var normalize = function normalize(value) {\n    var normalizedValue = value.toISOString();\n    if (normalizedValue && outputFormat === 'no timezone') {\n      var _handleOffset$toISOSt = handleOffset(normalizedValue).toISOString().split('T');\n      normalizedValue = _handleOffset$toISOSt[0];\n    }\n    return normalizedValue;\n  };\n  if (dateValue instanceof Date) {\n    result = normalize(dateValue);\n  } else if (typeof dateValue === 'undefined') {\n    result = undefined;\n  } else {\n    result = dateValue.map(function (d) {\n      return _normalizeOutput(d, outputFormat);\n    });\n  }\n  return result;\n};\n\n// format value to [[]] for internal functions\nvar normalizeRange = function normalizeRange(value, activeDate) {\n  var range = value;\n  if (range instanceof Date) range = activeDate === 'start' ? [[undefined, range]] : [[range, undefined]];else if (Array.isArray(range) && !Array.isArray(range[0])) range = [range];\n  return range;\n};\nvar getReference = function getReference(reference, value, activeDate) {\n  var nextReference;\n  if (value) {\n    if (Array.isArray(value)) {\n      if (value[0] instanceof Date) {\n        // if we just selected an end date, active date will be 'start'\n        // and we should set the reference to the end date\n        if (activeDate === 'start' && value[1] instanceof Date) {\n          nextReference = value[1];\n        } else {\n          nextReference = value[0];\n        }\n      } else if (Array.isArray(value[0])) {\n        // if we just selected an end date, active date will be 'start'\n        // and we should set the reference to the end date\n        if (activeDate === 'start' && value[0][1]) {\n          // eslint-disable-next-line prefer-destructuring\n          nextReference = value[0][1];\n        } else {\n          nextReference = value[0][0] ? value[0][0] : value[0][1];\n        }\n      } else {\n        nextReference = new Date();\n        nextReference.setHours(0, 0, 0, 0);\n      }\n    } else nextReference = value;\n  } else if (reference) {\n    nextReference = reference;\n  } else {\n    nextReference = new Date();\n    nextReference.setHours(0, 0, 0, 0);\n  }\n  return nextReference;\n};\nvar buildDisplayBounds = function buildDisplayBounds(reference, firstDayOfWeek) {\n  var start = new Date(reference);\n  start.setDate(1); // first of month\n\n  // In case Sunday is the first day of the month, and the user asked for Monday\n  // to be the first day of the week, then we need to include Sunday and six\n  // days prior.\n  start = start.getDay() === 0 && firstDayOfWeek === 1 ? start = subtractDays(start, 6) :\n  // beginning of week\n  start = subtractDays(start, start.getDay() - firstDayOfWeek);\n  var end = addDays(start, 7 * 5 + 7); // 5 weeks to end of week\n  return [start, end];\n};\nvar monthBounds = function monthBounds(reference) {\n  var start = new Date(reference);\n  start.setDate(1); // first of month\n  var end = endOfMonth(start);\n  return [start, end];\n};\nvar disabledCalendarPreviousMonthButton = function disabledCalendarPreviousMonthButton(date, reference, bounds) {\n  if (!bounds) return false;\n  var lastBound = new Date(bounds[1]);\n  return !sameDayOrBefore(lastBound, reference) && !betweenDates(date, bounds);\n};\nvar disabledCalendarNextMonthButton = function disabledCalendarNextMonthButton(date, reference, bounds) {\n  if (!bounds) return false;\n  var firstBound = new Date(bounds[0]);\n  return !sameDayOrAfter(firstBound, reference) && !betweenDates(date, bounds);\n};\nvar _getOutputFormat = function getOutputFormat(dates) {\n  if (typeof dates === 'string' && (dates == null ? void 0 : dates.indexOf('T')) === -1) {\n    return 'no timezone';\n  }\n  if (Array.isArray(dates)) {\n    return _getOutputFormat(dates[0]);\n  }\n  return 'date timezone';\n};\nexport { _getOutputFormat as getOutputFormat };\nvar millisecondsPerYear = 31557600000;\nvar CalendarDay = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var activeProp = _ref.activeProp,\n    children = _ref.children,\n    day = _ref.day,\n    disabledProp = _ref.disabledProp,\n    fill = _ref.fill,\n    size = _ref.size,\n    isInRange = _ref.isInRange,\n    isSelected = _ref.isSelected,\n    otherMonth = _ref.otherMonth,\n    rangePosition = _ref.rangePosition,\n    _ref$buttonProps = _ref.buttonProps,\n    buttonProps = _ref$buttonProps === void 0 ? {} : _ref$buttonProps,\n    responsive = _ref.responsive;\n  var _useThemeValue = useThemeValue(),\n    passThemeFlag = _useThemeValue.passThemeFlag;\n  return /*#__PURE__*/React.createElement(StyledDayContainer, {\n    role: \"gridcell\",\n    \"aria-selected\": isSelected,\n    inRange: isInRange,\n    isSelected: isSelected,\n    rangePosition: rangePosition,\n    sizeProp: size,\n    fillContainer: fill,\n    responsive: responsive\n  }, /*#__PURE__*/React.createElement(StyledDayButton, _extends({\n    \"aria-disabled\": disabledProp,\n    disabledProp: disabledProp,\n    fill: fill,\n    plain: true,\n    tabIndex: (activeProp == null ? void 0 : activeProp.getTime()) === (day == null ? void 0 : day.getTime()) ? 0 : -1,\n    responsive: responsive\n  }, buttonProps, {\n    ref: (activeProp == null ? void 0 : activeProp.getTime()) === (day == null ? void 0 : day.getTime()) ? ref : undefined\n  }), function (_ref2) {\n    var hover = _ref2.hover;\n    return /*#__PURE__*/React.createElement(StyledDay, _extends({\n      disabledProp: disabledProp,\n      hover: hover,\n      inRange: isInRange,\n      isSelected: isSelected,\n      otherMonth: otherMonth,\n      sizeProp: size,\n      fillContainer: fill,\n      responsive: responsive\n    }, passThemeFlag), children);\n  }));\n});\nvar CalendarCustomDay = function CalendarCustomDay(_ref3) {\n  var ariaSelected = _ref3['aria-selected'],\n    children = _ref3.children,\n    fill = _ref3.fill,\n    size = _ref3.size,\n    buttonProps = _ref3.buttonProps,\n    responsive = _ref3.responsive;\n  if (!buttonProps) {\n    return /*#__PURE__*/React.createElement(StyledDayContainer, {\n      \"aria-selected\": ariaSelected,\n      role: \"gridcell\",\n      sizeProp: size,\n      fillContainer: fill,\n      responsive: responsive\n    }, children);\n  }\n  return /*#__PURE__*/React.createElement(StyledDayContainer, {\n    \"aria-selected\": ariaSelected,\n    role: \"gridcell\",\n    sizeProp: size,\n    fillContainer: fill,\n    responsive: responsive\n  }, /*#__PURE__*/React.createElement(StyledDayButton, _extends({\n    fill: fill,\n    responsive: responsive\n  }, buttonProps), children));\n};\nvar Calendar = /*#__PURE__*/forwardRef(function (_ref4, ref) {\n  var activeDateProp = _ref4.activeDate,\n    _ref4$animate = _ref4.animate,\n    animate = _ref4$animate === void 0 ? true : _ref4$animate,\n    boundsProp = _ref4.bounds,\n    children = _ref4.children,\n    dateProp = _ref4.date,\n    datesProp = _ref4.dates,\n    daysOfWeek = _ref4.daysOfWeek,\n    disabled = _ref4.disabled,\n    initialFocus = _ref4.initialFocus,\n    fill = _ref4.fill,\n    _ref4$firstDayOfWeek = _ref4.firstDayOfWeek,\n    firstDayOfWeek = _ref4$firstDayOfWeek === void 0 ? 0 : _ref4$firstDayOfWeek,\n    header = _ref4.header,\n    level = _ref4.level,\n    _ref4$locale = _ref4.locale,\n    locale = _ref4$locale === void 0 ? 'en-US' : _ref4$locale,\n    messages = _ref4.messages,\n    onReference = _ref4.onReference,\n    onSelect = _ref4.onSelect,\n    range = _ref4.range,\n    referenceProp = _ref4.reference,\n    _ref4$responsive = _ref4.responsive,\n    responsiveProp = _ref4$responsive === void 0 ? true : _ref4$responsive,\n    _ref4$showAdjacentDay = _ref4.showAdjacentDays,\n    showAdjacentDays = _ref4$showAdjacentDay === void 0 ? true : _ref4$showAdjacentDay,\n    _ref4$size = _ref4.size,\n    size = _ref4$size === void 0 ? 'medium' : _ref4$size,\n    timestampProp = _ref4.timestamp,\n    rest = _objectWithoutPropertiesLoose(_ref4, _excluded);\n  var _useThemeValue2 = useThemeValue(),\n    theme = _useThemeValue2.theme,\n    passThemeFlag = _useThemeValue2.passThemeFlag;\n  var announce = useContext(AnnounceContext);\n  var _useContext = useContext(MessageContext),\n    format = _useContext.format;\n\n  // If fill is true the responsive behavior isn't needed.\n  var responsive = responsiveProp && !fill;\n\n  // set activeDate when caller changes it, allows us to change\n  // it internally too\n  var _useState = useState(dateProp && typeof dateProp === 'string' && range ? 'end' : 'start'),\n    activeDate = _useState[0],\n    setActiveDate = _useState[1];\n  useEffect(function () {\n    if (activeDateProp) setActiveDate(activeDateProp);\n  }, [activeDateProp]);\n  var _useState2 = useState(_normalizeInput(dateProp || datesProp)),\n    value = _useState2[0],\n    setValue = _useState2[1];\n  useEffect(function () {\n    var val = dateProp || datesProp;\n    setValue(_normalizeInput(val));\n  }, [dateProp, datesProp]);\n  var _useState3 = useState(getReference(_normalizeInput(referenceProp), value, activeDate)),\n    reference = _useState3[0],\n    setReference = _useState3[1];\n  useEffect(function () {\n    if (value) {\n      setReference(getReference(_normalizeInput(referenceProp), value, activeDate));\n    }\n  }, [referenceProp, value, activeDate]);\n  var _useState4 = useState(_getOutputFormat(dateProp || datesProp)),\n    outputFormat = _useState4[0],\n    setOutputFormat = _useState4[1];\n  useEffect(function () {\n    setOutputFormat(_getOutputFormat(dateProp || datesProp));\n  }, [dateProp, datesProp]);\n\n  // normalize bounds\n  var _useState5 = useState(boundsProp),\n    bounds = _useState5[0],\n    setBounds = _useState5[1];\n  useEffect(function () {\n    if (boundsProp) setBounds(boundsProp);else setBounds(undefined);\n  }, [boundsProp]);\n\n  // calculate the bounds we display based on the reference\n  var _useState6 = useState(buildDisplayBounds(reference, firstDayOfWeek)),\n    displayBounds = _useState6[0],\n    setDisplayBounds = _useState6[1];\n  var _useState7 = useState(),\n    targetDisplayBounds = _useState7[0],\n    setTargetDisplayBounds = _useState7[1];\n  var _useState8 = useState(),\n    slide = _useState8[0],\n    setSlide = _useState8[1];\n  var _useState9 = useState(),\n    animating = _useState9[0],\n    setAnimating = _useState9[1];\n\n  // When the reference changes, we need to update the displayBounds.\n  // This is easy when we aren't animating. If we are animating,\n  // we temporarily increase the displayBounds to be the union of the old\n  // and new ones and set slide to drive the animation. We keep track\n  // of where we are heading via targetDisplayBounds. When the animation\n  // finishes, we prune displayBounds down to where we are headed and\n  // clear the slide and targetDisplayBounds.\n  useEffect(function () {\n    var nextDisplayBounds = buildDisplayBounds(reference, firstDayOfWeek);\n\n    // Checks if the difference between the current and next DisplayBounds is\n    // greater than a year. If that's the case, calendar should update without\n    // animation.\n    if (nextDisplayBounds[0].getTime() !== displayBounds[0].getTime() && nextDisplayBounds[1].getTime() !== displayBounds[1].getTime()) {\n      var diffBoundsAboveYear = false;\n      if (nextDisplayBounds[0].getTime() < displayBounds[0].getTime()) {\n        if (displayBounds[0].getTime() - nextDisplayBounds[0].getTime() > millisecondsPerYear) {\n          diffBoundsAboveYear = true;\n        }\n      } else if (nextDisplayBounds[1].getTime() > displayBounds[1].getTime()) {\n        if (nextDisplayBounds[1].getTime() - displayBounds[1].getTime() > millisecondsPerYear) {\n          diffBoundsAboveYear = true;\n        }\n      }\n      if (!animate || diffBoundsAboveYear) {\n        setDisplayBounds(nextDisplayBounds);\n      } else {\n        setTargetDisplayBounds(nextDisplayBounds);\n      }\n    }\n  }, [animate, firstDayOfWeek, reference, displayBounds]);\n  useEffect(function () {\n    // if the reference timezone has changed (e.g., controlled component),\n    // both ends of the displayBounds should inherit that new timestamp\n    if (targetDisplayBounds) {\n      if (targetDisplayBounds[0].getTime() < displayBounds[0].getTime() || targetDisplayBounds[1].getTime() > displayBounds[1].getTime()) {\n        setDisplayBounds([targetDisplayBounds[0], targetDisplayBounds[1]]);\n      }\n      if (targetDisplayBounds[0].getTime() < displayBounds[0].getTime()) {\n        // only animate if the duration is within a year\n        if (displayBounds[0].getTime() - targetDisplayBounds[0].getTime() < millisecondsPerYear && daysApart(displayBounds[0], targetDisplayBounds[0])) {\n          setSlide({\n            direction: 'down',\n            weeks: daysApart(displayBounds[0], targetDisplayBounds[0]) / 7\n          });\n          setAnimating(true);\n        }\n      } else if (targetDisplayBounds[1].getTime() > displayBounds[1].getTime()) {\n        if (targetDisplayBounds[1].getTime() - displayBounds[1].getTime() < millisecondsPerYear && daysApart(targetDisplayBounds[1], displayBounds[1])) {\n          setSlide({\n            direction: 'up',\n            weeks: daysApart(targetDisplayBounds[1], displayBounds[1]) / 7\n          });\n          setAnimating(true);\n        }\n      }\n      return undefined;\n    }\n    setSlide(undefined);\n    return undefined;\n  }, [animating, displayBounds, targetDisplayBounds]);\n\n  // Last step in updating the displayBounds. Allows for pruning\n  // displayBounds and cleaning up states to occur after animation.\n  useEffect(function () {\n    if (animating && targetDisplayBounds) {\n      // Wait for animation to finish before cleaning up.\n      var timer = setTimeout(function () {\n        setDisplayBounds(targetDisplayBounds);\n        setTargetDisplayBounds(undefined);\n        setSlide(undefined);\n        setAnimating(false);\n      }, 400 // Empirically determined.\n      );\n      return function () {\n        return clearTimeout(timer);\n      };\n    }\n    return undefined;\n  }, [animating, targetDisplayBounds]);\n\n  // We have to deal with reference being the end of a month with more\n  // days than the month we are changing to. So, we always set reference\n  // to the first of the month before changing the month.\n  var previousMonth = useMemo(function () {\n    return endOfMonth(subtractMonths(startOfMonth(reference), 1));\n  }, [reference]);\n  var nextMonth = useMemo(function () {\n    return startOfMonth(addMonths(startOfMonth(reference), 1));\n  }, [reference]);\n  var initialFocusDate = showAdjacentDays ? new Date(displayBounds[0]) : startOfMonth(reference);\n  var _useState0 = useState(),\n    focus = _useState0[0],\n    setFocus = _useState0[1];\n  var _useState1 = useState(initialFocusDate),\n    active = _useState1[0],\n    setActive = _useState1[1];\n  var focusableDateRef = useRef(undefined);\n  useEffect(function () {\n    if (focusableDateRef != null && focusableDateRef.current && initialFocus === 'days') focusableDateRef.current.focus();\n  }, [initialFocus, focusableDateRef]);\n  var handleReference = useCallback(function (nextReference) {\n    setReference(nextReference);\n    if (onReference) onReference(nextReference.toISOString());\n  }, [onReference]);\n  var changeReference = useCallback(function (nextReference) {\n    if (betweenDates(nextReference, bounds)) handleReference(nextReference);\n  }, [handleReference, bounds]);\n  var changeCalendarMonth = function changeCalendarMonth(messageId, newMonth) {\n    handleReference(newMonth);\n    var referenceStartOfMonth = startOfMonth(reference);\n    var firstOfMonth = new Date(newMonth.getFullYear(), newMonth.getMonth(), 1, referenceStartOfMonth.getHours(), referenceStartOfMonth.getMinutes(), referenceStartOfMonth.getSeconds());\n    setActive(firstOfMonth);\n    announce(format({\n      id: messageId,\n      messages: messages,\n      values: {\n        date: newMonth.toLocaleDateString(locale, {\n          month: 'long',\n          year: 'numeric'\n        })\n      }\n    }));\n  };\n  var handleRange = useCallback(function (selectedDate) {\n    var _priorRange$, _priorRange$2;\n    var result;\n    var priorRange = normalizeRange(value, activeDate);\n    // deselect when date clicked was the start/end of the range\n    if (selectedDate.getTime() === (priorRange == null || (_priorRange$ = priorRange[0]) == null || (_priorRange$ = _priorRange$[0]) == null ? void 0 : _priorRange$.getTime())) {\n      result = [[undefined, priorRange[0][1]]];\n      setActiveDate('start');\n    } else if (selectedDate.getTime() === (priorRange == null || (_priorRange$2 = priorRange[0]) == null || (_priorRange$2 = _priorRange$2[1]) == null ? void 0 : _priorRange$2.getTime())) {\n      result = [[priorRange[0][0], undefined]];\n      setActiveDate('end');\n    }\n    // selecting start date\n    else if (activeDate === 'start') {\n      if (!priorRange) {\n        result = [[selectedDate, undefined]];\n      } else if (!priorRange[0][1]) {\n        result = [[selectedDate, priorRange[0][1]]];\n      } else if (selectedDate.getTime() < priorRange[0][1].getTime()) {\n        result = [[selectedDate, priorRange[0][1]]];\n      } else if (selectedDate.getTime() > priorRange[0][1].getTime()) {\n        result = [[selectedDate, undefined]];\n      }\n      setActiveDate('end');\n    }\n    // selecting end date\n    else if (!priorRange) {\n      result = [[undefined, selectedDate]];\n      setActiveDate('start');\n    } else if (selectedDate.getTime() < priorRange[0][0].getTime()) {\n      result = [[selectedDate, undefined]];\n      setActiveDate('end');\n    } else if (selectedDate.getTime() > priorRange[0][0].getTime()) {\n      result = [[priorRange[0][0], selectedDate]];\n      setActiveDate('start');\n    }\n\n    // If no dates selected, always return undefined; else format\n    // result according to specified range value.\n    if (result[0].includes(undefined)) {\n      if (range === 'array') {\n        result = !result[0][0] && !result[0][1] ? undefined : result;\n      } else {\n        result = result[0].find(function (d) {\n          return d !== undefined;\n        });\n      }\n    }\n    setValue(result);\n    return result;\n  }, [activeDate, value, range]);\n  var selectDate = useCallback(function (selectedDate) {\n    var nextValue;\n    if (range || Array.isArray(value == null ? void 0 : value[0])) {\n      nextValue = handleRange(selectedDate);\n    } else {\n      nextValue = selectedDate;\n    }\n    if (onSelect) {\n      nextValue = _normalizeOutput(nextValue, outputFormat);\n      onSelect(nextValue);\n    }\n  }, [handleRange, onSelect, outputFormat, range, value]);\n  var onClick = function onClick(selectedDate) {\n    selectDate(selectedDate);\n    announce(\"Selected \" + getLocaleString(selectedDate, locale), 'assertive');\n    setActive(selectedDate);\n  };\n  var renderCalendarHeader = function renderCalendarHeader() {\n    var _theme$calendar$size;\n    var PreviousIcon = size === 'small' ? theme.calendar.icons.small.previous : theme.calendar.icons.previous;\n    var NextIcon = size === 'small' ? theme.calendar.icons.small.next : theme.calendar.icons.next;\n    var monthAndYear = reference.toLocaleDateString(locale, {\n      month: 'long',\n      year: 'numeric'\n    });\n\n    // theme.calendar.heading.level should be removed in v3 of grommet\n    // theme.calendar[size].title should be used instead\n    var headingLevel;\n    if (level !== undefined) {\n      headingLevel = level;\n    } else if (size === 'small') {\n      headingLevel = theme.calendar.heading && theme.calendar.heading.level || 4;\n    } else {\n      headingLevel = (theme.calendar.heading && theme.calendar.heading.level || 4) - 1;\n    }\n    var _ref5 = ((_theme$calendar$size = theme.calendar[size]) == null ? void 0 : _theme$calendar$size.title) || undefined,\n      containerTheme = _ref5.container,\n      textTheme = _objectWithoutPropertiesLoose(_ref5, _excluded2);\n    return /*#__PURE__*/React.createElement(Box, {\n      direction: \"row\",\n      justify: \"between\",\n      align: \"center\"\n    }, /*#__PURE__*/React.createElement(Header, {\n      flex: true,\n      pad: containerTheme.pad\n    }, Object.keys(textTheme).length !== 0 ? /*#__PURE__*/React.createElement(Text, textTheme, monthAndYear) : /*#__PURE__*/React.createElement(Heading, {\n      level: headingLevel,\n      size: size,\n      margin: \"none\",\n      overflowWrap: \"normal\"\n    }, monthAndYear)), /*#__PURE__*/React.createElement(Box, {\n      flex: false,\n      direction: \"row\",\n      align: \"center\"\n    }, /*#__PURE__*/React.createElement(Button, {\n      a11yTitle: format({\n        id: 'calendar.previous',\n        messages: messages,\n        values: {\n          date: previousMonth.toLocaleDateString(locale, {\n            month: 'long',\n            year: 'numeric'\n          })\n        }\n      }),\n      icon: /*#__PURE__*/React.createElement(PreviousIcon, {\n        size: size !== 'small' ? size : undefined\n      }),\n      disabled: disabledCalendarPreviousMonthButton(previousMonth, reference, bounds),\n      onClick: function onClick() {\n        return changeCalendarMonth('calendar.previousMove', previousMonth);\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      a11yTitle: format({\n        id: 'calendar.next',\n        messages: messages,\n        values: {\n          date: nextMonth.toLocaleDateString(locale, {\n            month: 'long',\n            year: 'numeric'\n          })\n        }\n      }),\n      icon: /*#__PURE__*/React.createElement(NextIcon, {\n        size: size !== 'small' ? size : undefined\n      }),\n      disabled: disabledCalendarNextMonthButton(nextMonth, reference, bounds),\n      onClick: function onClick() {\n        return changeCalendarMonth('calendar.nextMove', nextMonth);\n      }\n    })));\n  };\n  var renderDaysOfWeek = function renderDaysOfWeek() {\n    var day = new Date(displayBounds[0]);\n    var days = [];\n    while (days.length < 7) {\n      days.push(/*#__PURE__*/React.createElement(StyledDayContainer, {\n        role: \"gridcell\",\n        key: days.length,\n        sizeProp: size,\n        fillContainer: fill,\n        responsive: responsive\n      }, /*#__PURE__*/React.createElement(StyledDay, {\n        sizeProp: size,\n        fillContainer: fill,\n        responsive: responsive\n      }, day.toLocaleDateString(locale, {\n        weekday: 'narrow'\n      }))));\n      day = addDays(day, 1);\n    }\n    return /*#__PURE__*/React.createElement(StyledWeek, {\n      role: \"row\"\n    }, days);\n  };\n  var weeks = [];\n  var day = new Date(displayBounds[0]);\n  var days;\n  var firstDayInMonth;\n  var blankWeek = false;\n  var _loop = function _loop() {\n    if (day.getDay() === firstDayOfWeek) {\n      if (days) {\n        weeks.push(/*#__PURE__*/React.createElement(StyledWeek, {\n          role: \"row\",\n          key: day.getTime(),\n          fillContainer: fill\n        }, days));\n      }\n      days = [];\n    }\n    var otherMonth = day.getMonth() !== reference.getMonth();\n    if (!showAdjacentDays && otherMonth) {\n      days.push(/*#__PURE__*/React.createElement(StyledDayContainer, {\n        key: day.getTime(),\n        sizeProp: size,\n        fillContainer: fill,\n        responsive: responsive\n      }, /*#__PURE__*/React.createElement(StyledDay, {\n        sizeProp: size,\n        fillContainer: fill,\n        responsive: responsive\n      })));\n      if (weeks.length === 5 &&\n      /* If the length days array is less than the current getDate()\n      we know that all days in the array are from the next month. */\n      days.length < day.getDate()) {\n        blankWeek = true;\n      }\n    } else if (\n    /* Do not show adjacent days in 6th row if all days\n    fall in the next month */\n    showAdjacentDays === 'trim' && otherMonth && weeks.length === 5 &&\n    /* If the length days array is less than the current getDate()\n    we know that all days in the array are from the next month. */\n    days.length < day.getDate()) {\n      blankWeek = true;\n      days.push(/*#__PURE__*/React.createElement(StyledDayContainer, {\n        key: day.getTime(),\n        sizeProp: size,\n        fillContainer: fill,\n        responsive: responsive\n      }, /*#__PURE__*/React.createElement(StyledDay, {\n        sizeProp: size,\n        fillContainer: fill,\n        responsive: responsive\n      })));\n    } else {\n      var dateObject = day;\n      // this.dayRefs[dateObject] = React.createRef();\n      var selected = false;\n      var inRange = false;\n      var rangePosition;\n      var _withinDates = withinDates(day, range ? normalizeRange(value, activeDate) : value),\n        selectedState = _withinDates[0];\n      if (selectedState === 2) {\n        selected = true;\n        var _withinDates2 = withinDates(day, range ? normalizeRange(value, activeDate) : value);\n        rangePosition = _withinDates2[1];\n      } else if (selectedState === 1) {\n        inRange = true;\n      }\n      var dayDisabled = !!(withinDates(day, _normalizeInput(disabled))[0] || bounds && !betweenDates(day, _normalizeInput(bounds)));\n      if (!firstDayInMonth && !dayDisabled && day.getMonth() === reference.getMonth()) {\n        firstDayInMonth = dateObject;\n      }\n      if (!children) {\n        days.push(/*#__PURE__*/React.createElement(CalendarDay, {\n          activeProp: active,\n          day: day,\n          key: day.getTime(),\n          disabledProp: dayDisabled,\n          buttonProps: {\n            a11yTitle: day.toDateString(),\n            onClick: dayDisabled ? function () {} : function () {\n              return onClick(dateObject);\n            }\n          },\n          isInRange: inRange,\n          isSelected: selected,\n          otherMonth: day.getMonth() !== reference.getMonth(),\n          rangePosition: rangePosition,\n          size: size,\n          fill: fill,\n          ref: focusableDateRef,\n          responsive: responsive\n        }, day.getDate()));\n      } else {\n        days.push(/*#__PURE__*/React.createElement(CalendarCustomDay, {\n          key: day.getTime(),\n          \"aria-selected\": selected,\n          buttonProps: onSelect ? {\n            a11yTitle: day.toDateString(),\n            active: active && active.getTime() === day.getTime(),\n            disabled: dayDisabled,\n            onClick: dayDisabled ? function () {} : function () {\n              return onClick(dateObject);\n            }\n          } : null,\n          size: size,\n          fill: fill,\n          responsive: responsive\n        }, children({\n          date: day,\n          day: day.getDate(),\n          isInRange: inRange,\n          isSelected: selected\n        })));\n      }\n    }\n    day = addDays(day, 1);\n  };\n  while (day.getTime() < displayBounds[1].getTime()) {\n    _loop();\n  }\n  weeks.push(/*#__PURE__*/React.createElement(StyledWeek\n  // if a week contains only blank days, for screen reader accessibility\n  // we don't want to set role=\"row\"\n  , {\n    role: !blankWeek ? 'row' : undefined,\n    key: day.getTime(),\n    fillContainer: fill\n  }, days));\n\n  // track if we need to focus when element becomes available\n  var _useState10 = useState(false),\n    needsFocus = _useState10[0],\n    setNeedsFocus = _useState10[1];\n  // while the calendar contains focus, and is not animating, set\n  // the focus to the active date\n\n  // Focus management effect\n  useEffect(function () {\n    if (!animating && active && focus) {\n      setNeedsFocus(true);\n    }\n  }, [animating, active, focus]);\n  useEffect(function () {\n    if (needsFocus && focusableDateRef != null && focusableDateRef.current) {\n      focusableDateRef.current.focus();\n      setNeedsFocus(false); // Reset flag after focus\n    }\n  }, [active, reference, displayBounds, needsFocus, focusableDateRef]);\n  useEffect(function () {\n    if (bounds && active) {\n      var normalizedBounds = _normalizeInput(bounds);\n      if (!betweenDates(active, normalizedBounds)) {\n        var diff1 = Math.abs(active.getTime() - normalizedBounds[0].getTime());\n        var diff2 = Math.abs(active.getTime() - normalizedBounds[1].getTime());\n        var closerDate = diff1 < diff2 ? 0 : 1;\n        setActive(normalizedBounds[closerDate]);\n      }\n    }\n  }, [active, bounds]);\n  return /*#__PURE__*/React.createElement(StyledCalendar, _extends({\n    ref: ref,\n    sizeProp: size,\n    fillContainer: fill,\n    responsive: responsive\n  }, passThemeFlag, rest), /*#__PURE__*/React.createElement(Box, {\n    fill: fill\n  }, header ? header({\n    date: reference,\n    locale: locale,\n    onPreviousMonth: function onPreviousMonth() {\n      changeReference(previousMonth);\n      setActive(previousMonth);\n      announce(format({\n        id: 'calendar.previous',\n        messages: messages,\n        values: {\n          date: previousMonth.toLocaleDateString(locale, {\n            month: 'long',\n            year: 'numeric'\n          })\n        }\n      }));\n    },\n    onNextMonth: function onNextMonth() {\n      changeReference(nextMonth);\n      setActive(nextMonth);\n      announce(format({\n        id: 'calendar.next',\n        messages: messages,\n        values: {\n          date: nextMonth.toLocaleDateString(locale, {\n            month: 'long',\n            year: 'numeric'\n          })\n        }\n      }));\n    },\n    previousInBound: betweenDates(previousMonth, bounds),\n    nextInBound: betweenDates(nextMonth, bounds)\n  }) : renderCalendarHeader(previousMonth, nextMonth), /*#__PURE__*/React.createElement(Box, {\n    fill: true,\n    role: \"grid\"\n  }, daysOfWeek && renderDaysOfWeek(), /*#__PURE__*/React.createElement(Keyboard, {\n    onUp: function onUp(event) {\n      var nextActive = addDays(active, -7);\n      event.preventDefault();\n      event.stopPropagation(); // so the page doesn't scroll\n      if (!!betweenDates(nextActive, _normalizeInput(bounds)) || !bounds) {\n        setActive(nextActive);\n        if (!betweenDates(nextActive, displayBounds) || !showAdjacentDays && !betweenDates(nextActive, monthBounds(reference))) {\n          changeReference(nextActive);\n        }\n      }\n    },\n    onDown: function onDown(event) {\n      var nextActive = addDays(active, 7);\n      event.preventDefault();\n      event.stopPropagation(); // so the page doesn't scroll\n      if (!!betweenDates(nextActive, _normalizeInput(bounds)) || !bounds) {\n        setActive(nextActive);\n        if (!betweenDates(nextActive, displayBounds) || !showAdjacentDays && !betweenDates(nextActive, monthBounds(reference))) {\n          changeReference(nextActive);\n        }\n      }\n    },\n    onLeft: function onLeft() {\n      var nextActive = addDays(active, -1);\n      if (!!betweenDates(nextActive, _normalizeInput(bounds)) || !bounds) {\n        setActive(nextActive);\n        if (!betweenDates(nextActive, displayBounds) || !showAdjacentDays && !betweenDates(nextActive, monthBounds(reference))) {\n          changeReference(nextActive);\n        }\n      }\n    },\n    onRight: function onRight() {\n      var nextActive = addDays(active, 1);\n      if (!!betweenDates(nextActive, _normalizeInput(bounds)) || !bounds) {\n        setActive(nextActive);\n        if (!betweenDates(nextActive, displayBounds) || !showAdjacentDays && !betweenDates(nextActive, monthBounds(reference))) {\n          changeReference(nextActive);\n        }\n      }\n    }\n  }, /*#__PURE__*/React.createElement(StyledWeeksContainer, _extends({\n    role: \"rowgroup\",\n    \"aria-label\": reference.toLocaleDateString(locale, {\n      month: 'long',\n      year: 'numeric'\n    }) + \"; \" + currentlySelectedString(value, locale),\n    sizeProp: size,\n    fillContainer: fill,\n    responsive: responsive,\n    onFocus: function onFocus() {\n      setFocus(true);\n    },\n    onBlur: function onBlur() {\n      setFocus(false);\n    }\n  }, passThemeFlag), /*#__PURE__*/React.createElement(StyledWeeks, _extends({\n    slide: slide,\n    sizeProp: size,\n    fillContainer: fill\n  }, passThemeFlag), weeks))))));\n});\nCalendar.displayName = 'Calendar';\nCalendar.propTypes = CalendarPropTypes;\nexport { Calendar };"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}