{"ast":null,"code":"var _excluded = [\"a11yTitle\", \"aria-label\", \"align\", \"background\", \"onAlign\", \"children\", \"dropTarget\", \"elevation\", \"onClickOutside\", \"onEsc\", \"onKeyDown\", \"overflow\", \"plain\", \"responsive\", \"restrictFocus\", \"stretch\", \"trapFocus\"];\nfunction _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nfunction _objectWithoutPropertiesLoose(r, e) {\n  if (null == r) return {};\n  var t = {};\n  for (var n in r) if ({}.hasOwnProperty.call(r, n)) {\n    if (-1 !== e.indexOf(n)) continue;\n    t[n] = r[n];\n  }\n  return t;\n}\nimport React, { forwardRef, useContext, useEffect, useMemo } from 'react';\nimport { ThemeContext } from 'styled-components';\nimport { ContainerTargetContext } from '../../contexts/ContainerTargetContext';\nimport { FocusedContainer } from '../FocusedContainer';\nimport { backgroundIsDark, findScrollParents, parseMetricToNum, PortalContext, useForwardedRef } from '../../utils';\nimport { Keyboard } from '../Keyboard';\nimport { StyledDrop } from './StyledDrop';\nimport { OptionsContext } from '../../contexts/OptionsContext';\nimport { useThemeValue } from '../../utils/useThemeValue';\n\n// using react synthetic event to be able to stop propagation that\n// would otherwise close the layer on ESC.\nvar preventLayerClose = function preventLayerClose(event) {\n  var key = event.keyCode ? event.keyCode : event.which;\n  if (key === 27) {\n    event.stopPropagation();\n  }\n};\n\n// Gets the closest ancestor positioned element\nvar getParentNode = function getParentNode(element) {\n  var _element$offsetParent;\n  return (_element$offsetParent = element.offsetParent) != null ? _element$offsetParent : element.parentNode;\n};\n\n// return the containing block\nvar getContainingBlock = function getContainingBlock(element) {\n  var currentNode = getParentNode(element);\n  while (currentNode instanceof window.HTMLElement && !['html', 'body'].includes(currentNode.nodeName.toLowerCase())) {\n    var _currentNode;\n    var css = window.getComputedStyle(currentNode);\n    // This is non-exhaustive but covers the most common CSS properties that\n    // create a containing block.\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n    if ((css.transform ? css.transform !== 'none' : false) || (css.perspective ? css.perspective !== 'none' : false) || (css.backdropFilter ? css.backdropFilter !== 'none' : false) || css.contain === 'paint' || ['transform', 'perspective'].includes(css.willChange) || css.willChange === 'filter' || (css.filter ? css.filter !== 'none' : false)) {\n      return currentNode;\n    }\n    currentNode = (_currentNode = currentNode) == null ? void 0 : _currentNode.parentNode;\n  }\n  return null;\n};\nvar defaultAlign = {\n  top: 'top',\n  left: 'left'\n};\nvar DropContainer = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var a11yTitle = _ref.a11yTitle,\n    ariaLabel = _ref['aria-label'],\n    _ref$align = _ref.align,\n    align = _ref$align === void 0 ? defaultAlign : _ref$align,\n    background = _ref.background,\n    onAlign = _ref.onAlign,\n    children = _ref.children,\n    dropTarget = _ref.dropTarget,\n    elevation = _ref.elevation,\n    onClickOutside = _ref.onClickOutside,\n    onEsc = _ref.onEsc,\n    onKeyDown = _ref.onKeyDown,\n    _ref$overflow = _ref.overflow,\n    overflow = _ref$overflow === void 0 ? 'auto' : _ref$overflow,\n    plain = _ref.plain,\n    _ref$responsive = _ref.responsive,\n    responsive = _ref$responsive === void 0 ? true : _ref$responsive,\n    restrictFocus = _ref.restrictFocus,\n    _ref$stretch = _ref.stretch,\n    stretch = _ref$stretch === void 0 ? 'width' : _ref$stretch,\n    trapFocus = _ref.trapFocus,\n    rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n  var containerTarget = useContext(ContainerTargetContext);\n  var _useThemeValue = useThemeValue(),\n    theme = _useThemeValue.theme,\n    passThemeFlag = _useThemeValue.passThemeFlag;\n  // dropOptions was created to preserve backwards compatibility\n  var _useContext = useContext(OptionsContext),\n    dropOptions = _useContext.drop;\n  var portalContext = useContext(PortalContext);\n  var portalId = useMemo(function () {\n    return portalContext.length;\n  }, [portalContext]);\n  var nextPortalContext = useMemo(function () {\n    return [].concat(portalContext, [portalId]);\n  }, [portalContext, portalId]);\n  var dropRef = useForwardedRef(ref);\n  useEffect(function () {\n    var onClickDocument = function onClickDocument(event) {\n      // determine which portal id the target is in, if any\n      var clickedPortalId = null;\n      var node = event.composed && event.composedPath()[0] || event.target;\n      while (clickedPortalId === null && node && node !== document && !(node instanceof ShadowRoot)) {\n        var attr = node.getAttribute('data-g-portal-id');\n        if (attr !== null) clickedPortalId = parseInt(attr, 10);\n        node = node.parentNode;\n      }\n      // Check if the click happened within the dropTarget\n      var clickInsideDropTarget = (dropTarget == null ? void 0 : dropTarget.current) && dropTarget.current.contains(event.target) || dropTarget && typeof dropTarget.contains === 'function' && dropTarget.contains(event.target);\n      if (!clickInsideDropTarget && clickedPortalId === null || portalContext.indexOf(clickedPortalId) !== -1) {\n        onClickOutside(event);\n      }\n    };\n    if (onClickOutside) {\n      document.addEventListener('mousedown', onClickDocument);\n    }\n    return function () {\n      if (onClickOutside) {\n        document.removeEventListener('mousedown', onClickDocument);\n      }\n    };\n  }, [onClickOutside, containerTarget, portalContext, dropTarget]);\n  useEffect(function () {\n    var target = (dropTarget == null ? void 0 : dropTarget.current) || dropTarget;\n    var notifyAlign = function notifyAlign() {\n      var _dropRef$current;\n      var styleCurrent = dropRef == null || (_dropRef$current = dropRef.current) == null ? void 0 : _dropRef$current.style;\n      var alignControl = (styleCurrent == null ? void 0 : styleCurrent.top) !== '' ? 'top' : 'bottom';\n      onAlign(alignControl);\n    };\n\n    // We try to preserve the maxHeight as changing it causes any scroll\n    // position to be lost. We set the maxHeight on mount and if the window\n    // is resized.\n    var place = function place(preserveHeight) {\n      var windowWidth = window.innerWidth;\n      var windowHeight = window.innerHeight;\n      var container = dropRef.current;\n      if (container && target) {\n        var _containingBlockRect$, _containingBlockRect, _containingBlockRect$2, _containingBlockRect2, _containingBlockRect$3, _containingBlockRect3, _containingBlock$scro, _containingBlock2, _containingBlock$scro2, _containingBlock3;\n        // clear prior styling\n        container.style.left = '';\n        container.style.top = '';\n        container.style.bottom = '';\n        container.style.width = '';\n        if (!preserveHeight) {\n          container.style.maxHeight = '';\n        }\n        // get bounds\n        var targetRect = target.getBoundingClientRect();\n        var containerRect = container.getBoundingClientRect();\n        // determine width\n        var width;\n        if (stretch) {\n          width = Math.min(stretch === 'align' ? Math.min(targetRect.width, containerRect.width) : Math.max(targetRect.width, containerRect.width), windowWidth);\n        } else {\n          width = Math.min(containerRect.width, windowWidth);\n        }\n        // set left position\n        var left;\n        if (align.left) {\n          if (align.left === 'left') {\n            left = targetRect.left;\n          } else if (align.left === 'right') {\n            left = targetRect.left + targetRect.width;\n          }\n        } else if (align.right) {\n          if (align.right === 'left') {\n            left = targetRect.left - width;\n          } else if (align.right === 'right') {\n            left = targetRect.left + targetRect.width - width;\n          }\n        } else {\n          left = targetRect.left + targetRect.width / 2 - width / 2;\n        }\n        if (left + width > windowWidth) {\n          left -= left + width - windowWidth;\n        } else if (left < 0) {\n          left = 0;\n        }\n        // set top or bottom position\n        var top;\n        var bottom;\n        var maxHeight = containerRect.height;\n\n        /* If responsive is true and the Drop doesn't have enough room\n          to be fully visible and there is more room in the other\n          direction, change the Drop to display above/below. If there is\n          less room in the other direction leave the Drop in its current\n          position. */\n        if (responsive &&\n        // drop is above target\n        align.bottom === 'top' &&\n        // drop is overflowing above window\n        targetRect.top - containerRect.height <= 0 &&\n        // there is room to display the drop below the target\n        targetRect.bottom + containerRect.height < windowHeight) {\n          // top of drop is aligned to bottom of target\n          top = targetRect.bottom;\n          maxHeight = top;\n        } else if (responsive &&\n        // top of drop is aligned to top of target\n        align.top === 'top' &&\n        // drop is overflowing below window\n        targetRect.top + containerRect.height >= windowHeight &&\n        // height of the drop is larger than the target.\n        targetRect.top + containerRect.height > targetRect.bottom &&\n        // there is room to display the drop above the target\n        targetRect.bottom - containerRect.height > 0) {\n          // bottom of drop is aligned to bottom of target\n          bottom = targetRect.bottom;\n          maxHeight = top;\n        } else if (responsive &&\n        // top of drop is aligned to bottom of target\n        align.top === 'bottom' &&\n        // drop is overflowing below window\n        targetRect.bottom + containerRect.height >= windowHeight &&\n        // there is room to display the drop above the target\n        targetRect.top - containerRect.height > 0) {\n          // bottom of drop is aligned to top of target\n          bottom = targetRect.top;\n          maxHeight = bottom;\n        } else if (responsive &&\n        // bottom of drop is aligned to bottom of target\n        align.bottom === 'bottom' &&\n        // drop is overflowing above window\n        targetRect.bottom - containerRect.height <= 0 &&\n        // height of the drop is larger than the target.\n        targetRect.bottom - containerRect.height > targetRect.top &&\n        // there is room to display the drop below the target\n        targetRect.top + containerRect.height > 0) {\n          // top of drop is aligned to top of target\n          top = targetRect.top;\n          maxHeight = bottom;\n        } else if (align.top === 'top') {\n          top = targetRect.top;\n          maxHeight = windowHeight - top;\n        } else if (align.top === 'bottom') {\n          top = targetRect.bottom;\n          maxHeight = windowHeight - top;\n        } else if (align.bottom === 'top') {\n          bottom = targetRect.top;\n          maxHeight = bottom;\n        } else if (align.bottom === 'bottom') {\n          bottom = targetRect.bottom;\n          maxHeight = bottom;\n        } else {\n          top = targetRect.top + targetRect.height / 2 - containerRect.height / 2;\n        }\n        var containingBlock;\n        var containingBlockRect;\n        // dropOptions was created to preserve backwards compatibility\n        if (dropOptions != null && dropOptions.checkContainingBlock) {\n          var _containingBlock;\n          // return the containing block for absolute elements or `null`\n          // for fixed elements\n          containingBlock = getContainingBlock(container);\n          containingBlockRect = (_containingBlock = containingBlock) == null ? void 0 : _containingBlock.getBoundingClientRect();\n        }\n\n        // compute viewport offsets\n        var viewportOffsetLeft = (_containingBlockRect$ = (_containingBlockRect = containingBlockRect) == null ? void 0 : _containingBlockRect.left) != null ? _containingBlockRect$ : 0;\n        var viewportOffsetTop = (_containingBlockRect$2 = (_containingBlockRect2 = containingBlockRect) == null ? void 0 : _containingBlockRect2.top) != null ? _containingBlockRect$2 : 0;\n        var viewportOffsetBottom = (_containingBlockRect$3 = (_containingBlockRect3 = containingBlockRect) == null ? void 0 : _containingBlockRect3.bottom) != null ? _containingBlockRect$3 : windowHeight;\n        var containerOffsetLeft = (_containingBlock$scro = (_containingBlock2 = containingBlock) == null ? void 0 : _containingBlock2.scrollLeft) != null ? _containingBlock$scro : 0;\n        var containerOffsetTop = (_containingBlock$scro2 = (_containingBlock3 = containingBlock) == null ? void 0 : _containingBlock3.scrollTop) != null ? _containingBlock$scro2 : 0;\n        container.style.left = left - viewportOffsetLeft + containerOffsetLeft + \"px\";\n        if (stretch) {\n          // offset width by 0.1 to avoid a bug in ie11 that\n          // unnecessarily wraps the text if width is the same\n          // NOTE: turned off for now\n          container.style.width = width + 0.1 + \"px\";\n        }\n        // the (position:absolute + scrollTop)\n        // is presenting issues with desktop scroll flickering\n        if (top !== '') {\n          container.style.top = top - viewportOffsetTop + containerOffsetTop + \"px\";\n        }\n        if (bottom !== '') {\n          container.style.bottom = viewportOffsetBottom - bottom - containerOffsetTop + \"px\";\n        }\n        if (!preserveHeight) {\n          if (theme.drop && theme.drop.maxHeight) {\n            maxHeight = Math.min(maxHeight, parseMetricToNum(theme.drop.maxHeight));\n          }\n          container.style.maxHeight = maxHeight + \"px\";\n        }\n      }\n      if (onAlign) notifyAlign();\n    };\n    var scrollParents;\n    var addScrollListeners = function addScrollListeners() {\n      scrollParents = findScrollParents(target);\n      scrollParents.forEach(function (scrollParent) {\n        return scrollParent.addEventListener('scroll', place);\n      });\n    };\n    var removeScrollListeners = function removeScrollListeners() {\n      scrollParents.forEach(function (scrollParent) {\n        return scrollParent.removeEventListener('scroll', place);\n      });\n      scrollParents = [];\n    };\n    var onResize = function onResize() {\n      removeScrollListeners();\n      addScrollListeners();\n      place(false);\n    };\n    addScrollListeners();\n    window.addEventListener('resize', onResize);\n    place(false);\n    return function () {\n      removeScrollListeners();\n      window.removeEventListener('resize', onResize);\n    };\n  }, [align, containerTarget, onAlign, dropTarget, portalContext, portalId, responsive, restrictFocus, stretch, theme.drop, dropRef, dropOptions]);\n\n  // Once drop is open the focus will be put on the drop container\n  // if restrictFocus is true. If the caller put focus\n  // on an element already, we honor that. Otherwise, we put\n  // the focus on the drop container.\n  useEffect(function () {\n    if (restrictFocus) {\n      var dropContainer = dropRef.current;\n      if (dropContainer) {\n        if (!dropContainer.contains(document.activeElement)) {\n          dropContainer.focus();\n        }\n      }\n    }\n  }, [dropRef, restrictFocus]);\n  var content = /*#__PURE__*/React.createElement(StyledDrop, _extends({\n    \"aria-label\": a11yTitle || ariaLabel,\n    ref: dropRef,\n    background: background,\n    plain: plain,\n    elevation: !plain ? elevation || theme.global.drop.elevation || theme.global.drop.shadowSize ||\n    // backward compatibility\n    'small' : undefined,\n    tabIndex: \"-1\",\n    alignProp: align,\n    overflow: overflow,\n    \"data-g-portal-id\": portalId\n  }, passThemeFlag, rest), children);\n  var themeContextValue = useMemo(function () {\n    var dark;\n    if (background || theme.global.drop.background) {\n      dark = backgroundIsDark(background || theme.global.drop.background, theme);\n    }\n    return _extends({}, theme, {\n      dark: dark\n    });\n  }, [background, theme]);\n  var dark = themeContextValue.dark;\n  if (dark !== undefined && dark !== theme.dark) {\n    content = /*#__PURE__*/React.createElement(ThemeContext.Provider, {\n      value: themeContextValue\n    }, content);\n  }\n  return /*#__PURE__*/React.createElement(PortalContext.Provider, {\n    value: nextPortalContext\n  }, /*#__PURE__*/React.createElement(FocusedContainer, {\n    onKeyDown: onEsc && preventLayerClose,\n    trapFocus: trapFocus\n  }, /*#__PURE__*/React.createElement(Keyboard\n  // should capture keyboard event before other elements,\n  // such as Layer\n  // https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\n  , {\n    capture: true,\n    onEsc: onEsc ? function (event) {\n      event.stopPropagation();\n      onEsc(event);\n    } : undefined,\n    onKeyDown: onKeyDown,\n    target: \"document\"\n  }, content)));\n});\nexport { DropContainer };","map":{"version":3,"names":["_excluded","_extends","Object","assign","bind","n","e","arguments","length","t","r","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","indexOf","React","forwardRef","useContext","useEffect","useMemo","ThemeContext","ContainerTargetContext","FocusedContainer","backgroundIsDark","findScrollParents","parseMetricToNum","PortalContext","useForwardedRef","Keyboard","StyledDrop","OptionsContext","useThemeValue","preventLayerClose","event","key","keyCode","which","stopPropagation","getParentNode","element","_element$offsetParent","offsetParent","parentNode","getContainingBlock","currentNode","window","HTMLElement","includes","nodeName","toLowerCase","_currentNode","css","getComputedStyle","transform","perspective","backdropFilter","contain","willChange","filter","defaultAlign","top","left","DropContainer","_ref","ref","a11yTitle","ariaLabel","_ref$align","align","background","onAlign","children","dropTarget","elevation","onClickOutside","onEsc","onKeyDown","_ref$overflow","overflow","plain","_ref$responsive","responsive","restrictFocus","_ref$stretch","stretch","trapFocus","rest","containerTarget","_useThemeValue","theme","passThemeFlag","_useContext","dropOptions","drop","portalContext","portalId","nextPortalContext","concat","dropRef","onClickDocument","clickedPortalId","node","composed","composedPath","target","document","ShadowRoot","attr","getAttribute","parseInt","clickInsideDropTarget","current","contains","addEventListener","removeEventListener","notifyAlign","_dropRef$current","styleCurrent","style","alignControl","place","preserveHeight","windowWidth","innerWidth","windowHeight","innerHeight","container","_containingBlockRect$","_containingBlockRect","_containingBlockRect$2","_containingBlockRect2","_containingBlockRect$3","_containingBlockRect3","_containingBlock$scro","_containingBlock2","_containingBlock$scro2","_containingBlock3","bottom","width","maxHeight","targetRect","getBoundingClientRect","containerRect","Math","min","max","right","height","containingBlock","containingBlockRect","checkContainingBlock","_containingBlock","viewportOffsetLeft","viewportOffsetTop","viewportOffsetBottom","containerOffsetLeft","scrollLeft","containerOffsetTop","scrollTop","scrollParents","addScrollListeners","forEach","scrollParent","removeScrollListeners","onResize","dropContainer","activeElement","focus","content","createElement","global","shadowSize","undefined","tabIndex","alignProp","themeContextValue","dark","Provider","value","capture"],"sources":["C:/Users/michaejo/Documents/GitRepos/player-api/node_modules/grommet/es6/components/Drop/DropContainer.js"],"sourcesContent":["var _excluded = [\"a11yTitle\", \"aria-label\", \"align\", \"background\", \"onAlign\", \"children\", \"dropTarget\", \"elevation\", \"onClickOutside\", \"onEsc\", \"onKeyDown\", \"overflow\", \"plain\", \"responsive\", \"restrictFocus\", \"stretch\", \"trapFocus\"];\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nfunction _objectWithoutPropertiesLoose(r, e) { if (null == r) return {}; var t = {}; for (var n in r) if ({}.hasOwnProperty.call(r, n)) { if (-1 !== e.indexOf(n)) continue; t[n] = r[n]; } return t; }\nimport React, { forwardRef, useContext, useEffect, useMemo } from 'react';\nimport { ThemeContext } from 'styled-components';\nimport { ContainerTargetContext } from '../../contexts/ContainerTargetContext';\nimport { FocusedContainer } from '../FocusedContainer';\nimport { backgroundIsDark, findScrollParents, parseMetricToNum, PortalContext, useForwardedRef } from '../../utils';\nimport { Keyboard } from '../Keyboard';\nimport { StyledDrop } from './StyledDrop';\nimport { OptionsContext } from '../../contexts/OptionsContext';\nimport { useThemeValue } from '../../utils/useThemeValue';\n\n// using react synthetic event to be able to stop propagation that\n// would otherwise close the layer on ESC.\nvar preventLayerClose = function preventLayerClose(event) {\n  var key = event.keyCode ? event.keyCode : event.which;\n  if (key === 27) {\n    event.stopPropagation();\n  }\n};\n\n// Gets the closest ancestor positioned element\nvar getParentNode = function getParentNode(element) {\n  var _element$offsetParent;\n  return (_element$offsetParent = element.offsetParent) != null ? _element$offsetParent : element.parentNode;\n};\n\n// return the containing block\nvar getContainingBlock = function getContainingBlock(element) {\n  var currentNode = getParentNode(element);\n  while (currentNode instanceof window.HTMLElement && !['html', 'body'].includes(currentNode.nodeName.toLowerCase())) {\n    var _currentNode;\n    var css = window.getComputedStyle(currentNode);\n    // This is non-exhaustive but covers the most common CSS properties that\n    // create a containing block.\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n    if ((css.transform ? css.transform !== 'none' : false) || (css.perspective ? css.perspective !== 'none' : false) || (css.backdropFilter ? css.backdropFilter !== 'none' : false) || css.contain === 'paint' || ['transform', 'perspective'].includes(css.willChange) || css.willChange === 'filter' || (css.filter ? css.filter !== 'none' : false)) {\n      return currentNode;\n    }\n    currentNode = (_currentNode = currentNode) == null ? void 0 : _currentNode.parentNode;\n  }\n  return null;\n};\nvar defaultAlign = {\n  top: 'top',\n  left: 'left'\n};\nvar DropContainer = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var a11yTitle = _ref.a11yTitle,\n    ariaLabel = _ref['aria-label'],\n    _ref$align = _ref.align,\n    align = _ref$align === void 0 ? defaultAlign : _ref$align,\n    background = _ref.background,\n    onAlign = _ref.onAlign,\n    children = _ref.children,\n    dropTarget = _ref.dropTarget,\n    elevation = _ref.elevation,\n    onClickOutside = _ref.onClickOutside,\n    onEsc = _ref.onEsc,\n    onKeyDown = _ref.onKeyDown,\n    _ref$overflow = _ref.overflow,\n    overflow = _ref$overflow === void 0 ? 'auto' : _ref$overflow,\n    plain = _ref.plain,\n    _ref$responsive = _ref.responsive,\n    responsive = _ref$responsive === void 0 ? true : _ref$responsive,\n    restrictFocus = _ref.restrictFocus,\n    _ref$stretch = _ref.stretch,\n    stretch = _ref$stretch === void 0 ? 'width' : _ref$stretch,\n    trapFocus = _ref.trapFocus,\n    rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n  var containerTarget = useContext(ContainerTargetContext);\n  var _useThemeValue = useThemeValue(),\n    theme = _useThemeValue.theme,\n    passThemeFlag = _useThemeValue.passThemeFlag;\n  // dropOptions was created to preserve backwards compatibility\n  var _useContext = useContext(OptionsContext),\n    dropOptions = _useContext.drop;\n  var portalContext = useContext(PortalContext);\n  var portalId = useMemo(function () {\n    return portalContext.length;\n  }, [portalContext]);\n  var nextPortalContext = useMemo(function () {\n    return [].concat(portalContext, [portalId]);\n  }, [portalContext, portalId]);\n  var dropRef = useForwardedRef(ref);\n  useEffect(function () {\n    var onClickDocument = function onClickDocument(event) {\n      // determine which portal id the target is in, if any\n      var clickedPortalId = null;\n      var node = event.composed && event.composedPath()[0] || event.target;\n      while (clickedPortalId === null && node && node !== document && !(node instanceof ShadowRoot)) {\n        var attr = node.getAttribute('data-g-portal-id');\n        if (attr !== null) clickedPortalId = parseInt(attr, 10);\n        node = node.parentNode;\n      }\n      // Check if the click happened within the dropTarget\n      var clickInsideDropTarget = (dropTarget == null ? void 0 : dropTarget.current) && dropTarget.current.contains(event.target) || dropTarget && typeof dropTarget.contains === 'function' && dropTarget.contains(event.target);\n      if (!clickInsideDropTarget && clickedPortalId === null || portalContext.indexOf(clickedPortalId) !== -1) {\n        onClickOutside(event);\n      }\n    };\n    if (onClickOutside) {\n      document.addEventListener('mousedown', onClickDocument);\n    }\n    return function () {\n      if (onClickOutside) {\n        document.removeEventListener('mousedown', onClickDocument);\n      }\n    };\n  }, [onClickOutside, containerTarget, portalContext, dropTarget]);\n  useEffect(function () {\n    var target = (dropTarget == null ? void 0 : dropTarget.current) || dropTarget;\n    var notifyAlign = function notifyAlign() {\n      var _dropRef$current;\n      var styleCurrent = dropRef == null || (_dropRef$current = dropRef.current) == null ? void 0 : _dropRef$current.style;\n      var alignControl = (styleCurrent == null ? void 0 : styleCurrent.top) !== '' ? 'top' : 'bottom';\n      onAlign(alignControl);\n    };\n\n    // We try to preserve the maxHeight as changing it causes any scroll\n    // position to be lost. We set the maxHeight on mount and if the window\n    // is resized.\n    var place = function place(preserveHeight) {\n      var windowWidth = window.innerWidth;\n      var windowHeight = window.innerHeight;\n      var container = dropRef.current;\n      if (container && target) {\n        var _containingBlockRect$, _containingBlockRect, _containingBlockRect$2, _containingBlockRect2, _containingBlockRect$3, _containingBlockRect3, _containingBlock$scro, _containingBlock2, _containingBlock$scro2, _containingBlock3;\n        // clear prior styling\n        container.style.left = '';\n        container.style.top = '';\n        container.style.bottom = '';\n        container.style.width = '';\n        if (!preserveHeight) {\n          container.style.maxHeight = '';\n        }\n        // get bounds\n        var targetRect = target.getBoundingClientRect();\n        var containerRect = container.getBoundingClientRect();\n        // determine width\n        var width;\n        if (stretch) {\n          width = Math.min(stretch === 'align' ? Math.min(targetRect.width, containerRect.width) : Math.max(targetRect.width, containerRect.width), windowWidth);\n        } else {\n          width = Math.min(containerRect.width, windowWidth);\n        }\n        // set left position\n        var left;\n        if (align.left) {\n          if (align.left === 'left') {\n            left = targetRect.left;\n          } else if (align.left === 'right') {\n            left = targetRect.left + targetRect.width;\n          }\n        } else if (align.right) {\n          if (align.right === 'left') {\n            left = targetRect.left - width;\n          } else if (align.right === 'right') {\n            left = targetRect.left + targetRect.width - width;\n          }\n        } else {\n          left = targetRect.left + targetRect.width / 2 - width / 2;\n        }\n        if (left + width > windowWidth) {\n          left -= left + width - windowWidth;\n        } else if (left < 0) {\n          left = 0;\n        }\n        // set top or bottom position\n        var top;\n        var bottom;\n        var maxHeight = containerRect.height;\n\n        /* If responsive is true and the Drop doesn't have enough room\n          to be fully visible and there is more room in the other\n          direction, change the Drop to display above/below. If there is\n          less room in the other direction leave the Drop in its current\n          position. */\n        if (responsive &&\n        // drop is above target\n        align.bottom === 'top' &&\n        // drop is overflowing above window\n        targetRect.top - containerRect.height <= 0 &&\n        // there is room to display the drop below the target\n        targetRect.bottom + containerRect.height < windowHeight) {\n          // top of drop is aligned to bottom of target\n          top = targetRect.bottom;\n          maxHeight = top;\n        } else if (responsive &&\n        // top of drop is aligned to top of target\n        align.top === 'top' &&\n        // drop is overflowing below window\n        targetRect.top + containerRect.height >= windowHeight &&\n        // height of the drop is larger than the target.\n        targetRect.top + containerRect.height > targetRect.bottom &&\n        // there is room to display the drop above the target\n        targetRect.bottom - containerRect.height > 0) {\n          // bottom of drop is aligned to bottom of target\n          bottom = targetRect.bottom;\n          maxHeight = top;\n        } else if (responsive &&\n        // top of drop is aligned to bottom of target\n        align.top === 'bottom' &&\n        // drop is overflowing below window\n        targetRect.bottom + containerRect.height >= windowHeight &&\n        // there is room to display the drop above the target\n        targetRect.top - containerRect.height > 0) {\n          // bottom of drop is aligned to top of target\n          bottom = targetRect.top;\n          maxHeight = bottom;\n        } else if (responsive &&\n        // bottom of drop is aligned to bottom of target\n        align.bottom === 'bottom' &&\n        // drop is overflowing above window\n        targetRect.bottom - containerRect.height <= 0 &&\n        // height of the drop is larger than the target.\n        targetRect.bottom - containerRect.height > targetRect.top &&\n        // there is room to display the drop below the target\n        targetRect.top + containerRect.height > 0) {\n          // top of drop is aligned to top of target\n          top = targetRect.top;\n          maxHeight = bottom;\n        } else if (align.top === 'top') {\n          top = targetRect.top;\n          maxHeight = windowHeight - top;\n        } else if (align.top === 'bottom') {\n          top = targetRect.bottom;\n          maxHeight = windowHeight - top;\n        } else if (align.bottom === 'top') {\n          bottom = targetRect.top;\n          maxHeight = bottom;\n        } else if (align.bottom === 'bottom') {\n          bottom = targetRect.bottom;\n          maxHeight = bottom;\n        } else {\n          top = targetRect.top + targetRect.height / 2 - containerRect.height / 2;\n        }\n        var containingBlock;\n        var containingBlockRect;\n        // dropOptions was created to preserve backwards compatibility\n        if (dropOptions != null && dropOptions.checkContainingBlock) {\n          var _containingBlock;\n          // return the containing block for absolute elements or `null`\n          // for fixed elements\n          containingBlock = getContainingBlock(container);\n          containingBlockRect = (_containingBlock = containingBlock) == null ? void 0 : _containingBlock.getBoundingClientRect();\n        }\n\n        // compute viewport offsets\n        var viewportOffsetLeft = (_containingBlockRect$ = (_containingBlockRect = containingBlockRect) == null ? void 0 : _containingBlockRect.left) != null ? _containingBlockRect$ : 0;\n        var viewportOffsetTop = (_containingBlockRect$2 = (_containingBlockRect2 = containingBlockRect) == null ? void 0 : _containingBlockRect2.top) != null ? _containingBlockRect$2 : 0;\n        var viewportOffsetBottom = (_containingBlockRect$3 = (_containingBlockRect3 = containingBlockRect) == null ? void 0 : _containingBlockRect3.bottom) != null ? _containingBlockRect$3 : windowHeight;\n        var containerOffsetLeft = (_containingBlock$scro = (_containingBlock2 = containingBlock) == null ? void 0 : _containingBlock2.scrollLeft) != null ? _containingBlock$scro : 0;\n        var containerOffsetTop = (_containingBlock$scro2 = (_containingBlock3 = containingBlock) == null ? void 0 : _containingBlock3.scrollTop) != null ? _containingBlock$scro2 : 0;\n        container.style.left = left - viewportOffsetLeft + containerOffsetLeft + \"px\";\n        if (stretch) {\n          // offset width by 0.1 to avoid a bug in ie11 that\n          // unnecessarily wraps the text if width is the same\n          // NOTE: turned off for now\n          container.style.width = width + 0.1 + \"px\";\n        }\n        // the (position:absolute + scrollTop)\n        // is presenting issues with desktop scroll flickering\n        if (top !== '') {\n          container.style.top = top - viewportOffsetTop + containerOffsetTop + \"px\";\n        }\n        if (bottom !== '') {\n          container.style.bottom = viewportOffsetBottom - bottom - containerOffsetTop + \"px\";\n        }\n        if (!preserveHeight) {\n          if (theme.drop && theme.drop.maxHeight) {\n            maxHeight = Math.min(maxHeight, parseMetricToNum(theme.drop.maxHeight));\n          }\n          container.style.maxHeight = maxHeight + \"px\";\n        }\n      }\n      if (onAlign) notifyAlign();\n    };\n    var scrollParents;\n    var addScrollListeners = function addScrollListeners() {\n      scrollParents = findScrollParents(target);\n      scrollParents.forEach(function (scrollParent) {\n        return scrollParent.addEventListener('scroll', place);\n      });\n    };\n    var removeScrollListeners = function removeScrollListeners() {\n      scrollParents.forEach(function (scrollParent) {\n        return scrollParent.removeEventListener('scroll', place);\n      });\n      scrollParents = [];\n    };\n    var onResize = function onResize() {\n      removeScrollListeners();\n      addScrollListeners();\n      place(false);\n    };\n    addScrollListeners();\n    window.addEventListener('resize', onResize);\n    place(false);\n    return function () {\n      removeScrollListeners();\n      window.removeEventListener('resize', onResize);\n    };\n  }, [align, containerTarget, onAlign, dropTarget, portalContext, portalId, responsive, restrictFocus, stretch, theme.drop, dropRef, dropOptions]);\n\n  // Once drop is open the focus will be put on the drop container\n  // if restrictFocus is true. If the caller put focus\n  // on an element already, we honor that. Otherwise, we put\n  // the focus on the drop container.\n  useEffect(function () {\n    if (restrictFocus) {\n      var dropContainer = dropRef.current;\n      if (dropContainer) {\n        if (!dropContainer.contains(document.activeElement)) {\n          dropContainer.focus();\n        }\n      }\n    }\n  }, [dropRef, restrictFocus]);\n  var content = /*#__PURE__*/React.createElement(StyledDrop, _extends({\n    \"aria-label\": a11yTitle || ariaLabel,\n    ref: dropRef,\n    background: background,\n    plain: plain,\n    elevation: !plain ? elevation || theme.global.drop.elevation || theme.global.drop.shadowSize ||\n    // backward compatibility\n    'small' : undefined,\n    tabIndex: \"-1\",\n    alignProp: align,\n    overflow: overflow,\n    \"data-g-portal-id\": portalId\n  }, passThemeFlag, rest), children);\n  var themeContextValue = useMemo(function () {\n    var dark;\n    if (background || theme.global.drop.background) {\n      dark = backgroundIsDark(background || theme.global.drop.background, theme);\n    }\n    return _extends({}, theme, {\n      dark: dark\n    });\n  }, [background, theme]);\n  var dark = themeContextValue.dark;\n  if (dark !== undefined && dark !== theme.dark) {\n    content = /*#__PURE__*/React.createElement(ThemeContext.Provider, {\n      value: themeContextValue\n    }, content);\n  }\n  return /*#__PURE__*/React.createElement(PortalContext.Provider, {\n    value: nextPortalContext\n  }, /*#__PURE__*/React.createElement(FocusedContainer, {\n    onKeyDown: onEsc && preventLayerClose,\n    trapFocus: trapFocus\n  }, /*#__PURE__*/React.createElement(Keyboard\n  // should capture keyboard event before other elements,\n  // such as Layer\n  // https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\n  , {\n    capture: true,\n    onEsc: onEsc ? function (event) {\n      event.stopPropagation();\n      onEsc(event);\n    } : undefined,\n    onKeyDown: onKeyDown,\n    target: \"document\"\n  }, content)));\n});\nexport { DropContainer };"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}