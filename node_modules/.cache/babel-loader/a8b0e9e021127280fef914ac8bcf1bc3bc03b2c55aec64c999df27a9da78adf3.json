{"ast":null,"code":"function _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nimport React, { forwardRef, useContext, useEffect, useRef, useState } from 'react';\nimport { createPortal } from 'react-dom';\nimport { useLayoutEffect } from '../../utils/use-isomorphic-layout-effect';\nimport { getNewContainer } from '../../utils';\nimport { LayerContainer } from './LayerContainer';\nimport { animationDuration } from './StyledLayer';\nimport { ContainerTargetContext } from '../../contexts/ContainerTargetContext';\nimport { LayerPropTypes } from './propTypes';\nvar Layer = /*#__PURE__*/forwardRef(function (props, ref) {\n  var animate = props.animate,\n    animation = props.animation,\n    _props$modal = props.modal,\n    modal = _props$modal === void 0 ? true : _props$modal,\n    targetChildPosition = props.targetChildPosition;\n  var _useState = useState(),\n    layerContainer = _useState[0],\n    setLayerContainer = _useState[1];\n  var containerTarget = useContext(ContainerTargetContext);\n  var originalFocusedElementRef = useRef(null);\n  var focusWithinLayerRef = useRef(false);\n  useEffect(function () {\n    originalFocusedElementRef.current = document.activeElement;\n  }, []);\n  useEffect(function () {\n    var handleFocusIn = function handleFocusIn(event) {\n      if (layerContainer != null && layerContainer.contains != null && layerContainer.contains(event.target)) {\n        focusWithinLayerRef.current = true;\n      }\n    };\n    var handleFocusOut = function handleFocusOut(event) {\n      if (layerContainer != null && layerContainer.contains != null && layerContainer.contains(event.target) && !layerContainer.contains(event.relatedTarget)) {\n        focusWithinLayerRef.current = false;\n      }\n    };\n    document.addEventListener('focusin', handleFocusIn);\n    document.addEventListener('focusout', handleFocusOut);\n    return function () {\n      document.removeEventListener('focusin', handleFocusIn);\n      document.removeEventListener('focusout', handleFocusOut);\n    };\n  }, [layerContainer]);\n  useEffect(function () {\n    return setLayerContainer(getNewContainer(containerTarget, targetChildPosition));\n  }, [containerTarget, targetChildPosition]);\n  // just a few things to clean up when the Layer is unmounted\n  useLayoutEffect(function () {\n    return function () {\n      var originalFocusedElement = originalFocusedElementRef.current;\n      if (originalFocusedElement) {\n        // Restore focus if:\n        // - modal layer (always restore), or\n        // - non-modal layer that had focus when it closed\n        var shouldRestoreFocus = modal || !modal && focusWithinLayerRef.current;\n        if (shouldRestoreFocus && originalFocusedElement.focus) {\n          // wait for the fixed positioning to come back to normal\n          // see layer styling for reference\n          setTimeout(function () {\n            return originalFocusedElement.focus();\n          }, 0);\n        } else if (originalFocusedElement.parentNode && originalFocusedElement.parentNode.focus) {\n          // required for IE11 and Edge\n          originalFocusedElement.parentNode.focus();\n        }\n      }\n      if (layerContainer) {\n        var activeAnimation = animation !== undefined ? animation : animate;\n        if (activeAnimation !== false) {\n          // undefined uses 'slide' as the default\n          // animate out and remove later\n          var layerClone = layerContainer.cloneNode(true);\n          layerClone.id = 'layerClone';\n          containerTarget.appendChild(layerClone);\n          var clonedContainer = layerClone.querySelector('[class*=\"StyledLayer__StyledContainer\"]');\n          if (clonedContainer && clonedContainer.style) {\n            clonedContainer.style.animationDirection = 'reverse';\n          }\n          setTimeout(function () {\n            // we add the id and query here so the unit tests work\n            var rootNode = containerTarget.getRootNode();\n            // Not all root nodes (ShadowRoot, DocumentFragment)\n            //  have getElementById.\n            if (rootNode && typeof rootNode.getElementById === 'function') {\n              var clone = rootNode.getElementById('layerClone');\n              if (clone) {\n                if (containerTarget.contains(clone)) {\n                  containerTarget.removeChild(clone);\n                }\n                layerContainer.remove();\n              }\n            }\n          }, animationDuration);\n        } else if (containerTarget.contains(layerContainer)) {\n          containerTarget.removeChild(layerContainer);\n        }\n      }\n    };\n  }, [animate, animation, containerTarget, layerContainer, modal]);\n  return layerContainer ? /*#__PURE__*/createPortal(/*#__PURE__*/React.createElement(LayerContainer, _extends({\n    ref: ref\n  }, props, {\n    modal: modal\n  })), layerContainer) : null;\n});\nLayer.displayName = 'Layer';\nLayer.propTypes = LayerPropTypes;\nexport { Layer };","map":{"version":3,"names":["_extends","Object","assign","bind","n","e","arguments","length","t","r","hasOwnProperty","call","apply","React","forwardRef","useContext","useEffect","useRef","useState","createPortal","useLayoutEffect","getNewContainer","LayerContainer","animationDuration","ContainerTargetContext","LayerPropTypes","Layer","props","ref","animate","animation","_props$modal","modal","targetChildPosition","_useState","layerContainer","setLayerContainer","containerTarget","originalFocusedElementRef","focusWithinLayerRef","current","document","activeElement","handleFocusIn","event","contains","target","handleFocusOut","relatedTarget","addEventListener","removeEventListener","originalFocusedElement","shouldRestoreFocus","focus","setTimeout","parentNode","activeAnimation","undefined","layerClone","cloneNode","id","appendChild","clonedContainer","querySelector","style","animationDirection","rootNode","getRootNode","getElementById","clone","removeChild","remove","createElement","displayName","propTypes"],"sources":["C:/Users/michaejo/Documents/GitRepos/player-api/node_modules/grommet/es6/components/Layer/Layer.js"],"sourcesContent":["function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport React, { forwardRef, useContext, useEffect, useRef, useState } from 'react';\nimport { createPortal } from 'react-dom';\nimport { useLayoutEffect } from '../../utils/use-isomorphic-layout-effect';\nimport { getNewContainer } from '../../utils';\nimport { LayerContainer } from './LayerContainer';\nimport { animationDuration } from './StyledLayer';\nimport { ContainerTargetContext } from '../../contexts/ContainerTargetContext';\nimport { LayerPropTypes } from './propTypes';\nvar Layer = /*#__PURE__*/forwardRef(function (props, ref) {\n  var animate = props.animate,\n    animation = props.animation,\n    _props$modal = props.modal,\n    modal = _props$modal === void 0 ? true : _props$modal,\n    targetChildPosition = props.targetChildPosition;\n  var _useState = useState(),\n    layerContainer = _useState[0],\n    setLayerContainer = _useState[1];\n  var containerTarget = useContext(ContainerTargetContext);\n  var originalFocusedElementRef = useRef(null);\n  var focusWithinLayerRef = useRef(false);\n  useEffect(function () {\n    originalFocusedElementRef.current = document.activeElement;\n  }, []);\n  useEffect(function () {\n    var handleFocusIn = function handleFocusIn(event) {\n      if (layerContainer != null && layerContainer.contains != null && layerContainer.contains(event.target)) {\n        focusWithinLayerRef.current = true;\n      }\n    };\n    var handleFocusOut = function handleFocusOut(event) {\n      if (layerContainer != null && layerContainer.contains != null && layerContainer.contains(event.target) && !layerContainer.contains(event.relatedTarget)) {\n        focusWithinLayerRef.current = false;\n      }\n    };\n    document.addEventListener('focusin', handleFocusIn);\n    document.addEventListener('focusout', handleFocusOut);\n    return function () {\n      document.removeEventListener('focusin', handleFocusIn);\n      document.removeEventListener('focusout', handleFocusOut);\n    };\n  }, [layerContainer]);\n  useEffect(function () {\n    return setLayerContainer(getNewContainer(containerTarget, targetChildPosition));\n  }, [containerTarget, targetChildPosition]);\n  // just a few things to clean up when the Layer is unmounted\n  useLayoutEffect(function () {\n    return function () {\n      var originalFocusedElement = originalFocusedElementRef.current;\n      if (originalFocusedElement) {\n        // Restore focus if:\n        // - modal layer (always restore), or\n        // - non-modal layer that had focus when it closed\n        var shouldRestoreFocus = modal || !modal && focusWithinLayerRef.current;\n        if (shouldRestoreFocus && originalFocusedElement.focus) {\n          // wait for the fixed positioning to come back to normal\n          // see layer styling for reference\n          setTimeout(function () {\n            return originalFocusedElement.focus();\n          }, 0);\n        } else if (originalFocusedElement.parentNode && originalFocusedElement.parentNode.focus) {\n          // required for IE11 and Edge\n          originalFocusedElement.parentNode.focus();\n        }\n      }\n      if (layerContainer) {\n        var activeAnimation = animation !== undefined ? animation : animate;\n        if (activeAnimation !== false) {\n          // undefined uses 'slide' as the default\n          // animate out and remove later\n          var layerClone = layerContainer.cloneNode(true);\n          layerClone.id = 'layerClone';\n          containerTarget.appendChild(layerClone);\n          var clonedContainer = layerClone.querySelector('[class*=\"StyledLayer__StyledContainer\"]');\n          if (clonedContainer && clonedContainer.style) {\n            clonedContainer.style.animationDirection = 'reverse';\n          }\n          setTimeout(function () {\n            // we add the id and query here so the unit tests work\n            var rootNode = containerTarget.getRootNode();\n            // Not all root nodes (ShadowRoot, DocumentFragment)\n            //  have getElementById.\n            if (rootNode && typeof rootNode.getElementById === 'function') {\n              var clone = rootNode.getElementById('layerClone');\n              if (clone) {\n                if (containerTarget.contains(clone)) {\n                  containerTarget.removeChild(clone);\n                }\n                layerContainer.remove();\n              }\n            }\n          }, animationDuration);\n        } else if (containerTarget.contains(layerContainer)) {\n          containerTarget.removeChild(layerContainer);\n        }\n      }\n    };\n  }, [animate, animation, containerTarget, layerContainer, modal]);\n  return layerContainer ? /*#__PURE__*/createPortal(/*#__PURE__*/React.createElement(LayerContainer, _extends({\n    ref: ref\n  }, props, {\n    modal: modal\n  })), layerContainer) : null;\n});\nLayer.displayName = 'Layer';\nLayer.propTypes = LayerPropTypes;\nexport { Layer };"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}