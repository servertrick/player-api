{"ast":null,"code":"var _excluded = [\"clear\", \"onClear\", \"name\", \"theme\"];\nfunction _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nfunction _objectWithoutPropertiesLoose(r, e) {\n  if (null == r) return {};\n  var t = {};\n  for (var n in r) if ({}.hasOwnProperty.call(r, n)) {\n    if (-1 !== e.indexOf(n)) continue;\n    t[n] = r[n];\n  }\n  return t;\n}\nimport React, { forwardRef, useCallback, useEffect, useRef, useState } from 'react';\nimport styled from 'styled-components';\nimport { setFocusWithoutScroll, getHoverIndicatorStyle, containsFocus } from '../../utils';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { InfiniteScroll } from '../InfiniteScroll';\nimport { Keyboard } from '../Keyboard';\nimport { Text } from '../Text';\nimport { TextInput } from '../TextInput';\nimport { StyledContainer, OptionsContainer, SelectOption } from './StyledSelect';\nimport { applyKey, useDisabled, getOptionLabel, getOptionValue } from './utils';\nimport { EmptySearchOption } from './EmptySearchOption';\nimport { useThemeValue } from '../../utils/useThemeValue';\n\n// ensure ClearButton receives visual indication of keyboard\nvar StyledButton = styled(Button).withConfig({\n  displayName: \"SelectContainer__StyledButton\",\n  componentId: \"sc-1wi0ul8-0\"\n})([\"&:focus{\", \"}\"], function (props) {\n  return getHoverIndicatorStyle('background', props.theme);\n});\nvar ClearButton = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var _theme$select$clear, _theme$select$clear2, _theme$select$clear3;\n  var clear = _ref.clear,\n    onClear = _ref.onClear,\n    name = _ref.name,\n    theme = _ref.theme,\n    rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n  var label = clear.label,\n    position = clear.position;\n  var align = position !== 'bottom' ? 'start' : 'center';\n  var buttonLabel = label || \"Clear \" + (name || 'selection');\n  var _useThemeValue = useThemeValue(),\n    passThemeFlag = _useThemeValue.passThemeFlag;\n  var buttonKind = (_theme$select$clear = theme.select.clear) == null ? void 0 : _theme$select$clear.button;\n  var containerProps = ((_theme$select$clear2 = theme.select.clear) == null ? void 0 : _theme$select$clear2.container) || {};\n  var textProps = ((_theme$select$clear3 = theme.select.clear) == null ? void 0 : _theme$select$clear3.text) || {};\n  var buttonProps = _extends({\n    a11yTitle: buttonLabel + \". Or, press \" + (position === 'bottom' ? 'shift tab' : 'down arrow') + \" to move to select options\",\n    align: align,\n    fill: 'horizontal',\n    onClick: onClear,\n    ref: ref\n  }, passThemeFlag, rest);\n  if (buttonKind) {\n    // new structure when `theme.select.clear.button` is defined\n\n    return /*#__PURE__*/React.createElement(Box, _extends({\n      flex: \"grow\"\n    }, containerProps), /*#__PURE__*/React.createElement(Button, _extends({\n      kind: buttonKind,\n      label: textProps ? /*#__PURE__*/React.createElement(Text, textProps, buttonLabel) : buttonLabel\n    }, buttonProps)));\n  }\n\n  // default structure when `theme.select.clear.button` is not defined\n  return /*#__PURE__*/React.createElement(StyledButton, _extends({\n    focusIndicator: false,\n    plain: true\n  }, buttonProps), function (_ref2) {\n    var _theme$select$clear4;\n    var hover = _ref2.hover;\n    var boxProps = _extends({}, theme.select.clear.container);\n    delete boxProps.hover; // avoid passing hover object to Box\n    return /*#__PURE__*/React.createElement(Box, _extends({}, boxProps, hover ? (_theme$select$clear4 = theme.select.clear) == null || (_theme$select$clear4 = _theme$select$clear4.container) == null ? void 0 : _theme$select$clear4.hover : {}, {\n      align: align\n    }), /*#__PURE__*/React.createElement(Text, theme.select.clear.text, buttonLabel));\n  });\n});\nvar SelectContainer = /*#__PURE__*/forwardRef(function (_ref3, ref) {\n  var _theme$select;\n  var clear = _ref3.clear,\n    _ref3$children = _ref3.children,\n    children = _ref3$children === void 0 ? null : _ref3$children,\n    disabled = _ref3.disabled,\n    disabledKey = _ref3.disabledKey,\n    dropHeight = _ref3.dropHeight,\n    _ref3$emptySearchMess = _ref3.emptySearchMessage,\n    emptySearchMessage = _ref3$emptySearchMess === void 0 ? 'No matches found' : _ref3$emptySearchMess,\n    id = _ref3.id,\n    labelKey = _ref3.labelKey,\n    multiple = _ref3.multiple,\n    name = _ref3.name,\n    onChange = _ref3.onChange,\n    onKeyDown = _ref3.onKeyDown,\n    onMore = _ref3.onMore,\n    onSearch = _ref3.onSearch,\n    optionIndexesInValue = _ref3.optionIndexesInValue,\n    options = _ref3.options,\n    allOptions = _ref3.allOptions,\n    searchPlaceholder = _ref3.searchPlaceholder,\n    search = _ref3.search,\n    setSearch = _ref3.setSearch,\n    selected = _ref3.selected,\n    usingKeyboard = _ref3.usingKeyboard,\n    _ref3$value = _ref3.value,\n    value = _ref3$value === void 0 ? '' : _ref3$value,\n    valueKey = _ref3.valueKey,\n    _ref3$replace = _ref3.replace,\n    replace = _ref3$replace === void 0 ? true : _ref3$replace;\n  var _useThemeValue2 = useThemeValue(),\n    theme = _useThemeValue2.theme,\n    passThemeFlag = _useThemeValue2.passThemeFlag;\n  var shouldShowClearButton = useCallback(function (position) {\n    var hasValue = Boolean(multiple && value ? value.length : value);\n    var showAtPosition = position === 'bottom' ? (clear == null ? void 0 : clear.position) === 'bottom' : (clear == null ? void 0 : clear.position) !== 'bottom';\n    return clear && hasValue && showAtPosition;\n  }, [clear, multiple, value]);\n  var isDisabled = useDisabled(disabled, disabledKey, options, valueKey || labelKey);\n  var _useState = useState(usingKeyboard && !shouldShowClearButton('top') && !onSearch ? 0 : -1),\n    activeIndex = _useState[0],\n    setActiveIndex = _useState[1];\n  var _useState2 = useState(usingKeyboard),\n    keyboardNavigation = _useState2[0],\n    setKeyboardNavigation = _useState2[1];\n  var searchRef = useRef();\n  var optionsRef = useRef();\n  var clearRef = useRef();\n  var activeRef = useRef();\n\n  // for keyboard/screenreader, keep the active option in focus\n  useEffect(function () {\n    var _activeRef$current;\n    if (activeIndex >= 0) (_activeRef$current = activeRef.current) == null || _activeRef$current.focus();\n  }, [activeIndex]);\n\n  // set initial focus\n  useEffect(function () {\n    // need to wait for Drop to be ready\n    var timer = setTimeout(function () {\n      var optionsNode = optionsRef.current;\n      var clearButton = clearRef.current;\n      if (onSearch) {\n        var searchInput = searchRef.current;\n        if (searchInput && searchInput.focus && !activeRef.current) {\n          setFocusWithoutScroll(searchInput);\n        }\n      } else if (clear && clearButton && clearButton.focus && clear.position !== 'bottom') {\n        setFocusWithoutScroll(clearButton);\n      } else if (usingKeyboard && activeRef.current) {\n        setFocusWithoutScroll(activeRef.current);\n      } else if (optionsNode) {\n        setFocusWithoutScroll(optionsNode);\n      }\n    }, 100);\n    return function () {\n      return clearTimeout(timer);\n    };\n  }, [onSearch, usingKeyboard, clear]);\n  var isSelected = useCallback(function (index) {\n    var result;\n    if (selected) {\n      // deprecated in favor of value\n      result = selected.indexOf(index) !== -1;\n    } else {\n      var optionVal = getOptionValue(index, options, valueKey);\n      if (Array.isArray(value)) {\n        if (value.length === 0) {\n          result = false;\n        } else if (typeof value[0] !== 'object') {\n          result = value.indexOf(optionVal) !== -1;\n        } else if (valueKey) {\n          result = value.some(function (valueItem) {\n            var valueValue = typeof valueKey === 'function' ? valueKey(valueItem) : valueItem[valueKey] || valueItem[valueKey.key];\n            return valueValue === optionVal;\n          });\n        }\n      } else if (valueKey && value !== null && typeof value === 'object') {\n        var valueValue = typeof valueKey === 'function' ? valueKey(value) : value[valueKey];\n        result = valueValue === optionVal;\n      } else {\n        result = value === optionVal;\n      }\n    }\n    return result;\n  }, [selected, value, valueKey, options]);\n  var selectOption = useCallback(function (index) {\n    return function (event) {\n      if (onChange) {\n        var nextValue;\n        var nextSelected;\n        if (multiple) {\n          var nextOptionIndexesInValue = optionIndexesInValue.slice(0);\n          var allOptionsIndex = allOptions.indexOf(options[index]);\n          var valueIndex = optionIndexesInValue.indexOf(allOptionsIndex);\n          if (valueIndex === -1) {\n            nextOptionIndexesInValue.push(allOptionsIndex);\n          } else {\n            nextOptionIndexesInValue.splice(valueIndex, 1);\n          }\n          nextValue = nextOptionIndexesInValue.map(function (i) {\n            return valueKey && valueKey.reduce ? applyKey(allOptions[i], valueKey) : allOptions[i];\n          });\n          nextSelected = nextOptionIndexesInValue;\n        } else {\n          nextValue = valueKey && valueKey.reduce ? applyKey(options[index], valueKey) : options[index];\n          nextSelected = index;\n        }\n        onChange(event, {\n          option: options[index],\n          value: nextValue,\n          selected: nextSelected\n        });\n      }\n    };\n  }, [multiple, onChange, optionIndexesInValue, options, allOptions, valueKey]);\n  var onClear = useCallback(function (event) {\n    onChange(event, {\n      option: undefined,\n      value: '',\n      selected: ''\n    });\n  }, [onChange]);\n  var onNextOption = useCallback(function (event) {\n    event.preventDefault();\n    var nextActiveIndex = activeIndex + 1;\n    while (nextActiveIndex < options.length && isDisabled(nextActiveIndex)) {\n      nextActiveIndex += 1;\n    }\n    if (nextActiveIndex !== options.length) {\n      setActiveIndex(nextActiveIndex);\n      setKeyboardNavigation(true);\n    }\n  }, [activeIndex, options, isDisabled]);\n  var onPreviousOption = useCallback(function (event) {\n    event.preventDefault();\n    var nextActiveIndex = activeIndex - 1;\n    if (nextActiveIndex === -1) {\n      var searchInput = searchRef.current;\n      var clearButton = clearRef.current;\n      if (clearButton && clearButton.focus && shouldShowClearButton('top')) {\n        setActiveIndex(nextActiveIndex);\n        setFocusWithoutScroll(clearButton);\n      } else if (searchInput && searchInput.focus) {\n        setActiveIndex(nextActiveIndex);\n        setFocusWithoutScroll(searchInput);\n      }\n    }\n    while (nextActiveIndex >= 0 && isDisabled(nextActiveIndex)) {\n      nextActiveIndex -= 1;\n    }\n    if (nextActiveIndex >= 0) {\n      setActiveIndex(nextActiveIndex);\n      setKeyboardNavigation(true);\n    }\n  }, [activeIndex, isDisabled, shouldShowClearButton]);\n  var onKeyDownOption = useCallback(function (event) {\n    if (!onSearch) {\n      var nextActiveIndex = options.findIndex(function (e, index) {\n        var label;\n        if (typeof e === 'object') {\n          label = e.label || applyKey(e, labelKey);\n        } else {\n          label = e;\n        }\n        return typeof label === 'string' && label.charAt(0).toLowerCase() === event.key.toLowerCase() && !isDisabled(index);\n      });\n      if (nextActiveIndex >= 0) {\n        event.preventDefault();\n        setActiveIndex(nextActiveIndex);\n        setKeyboardNavigation(true);\n      }\n    }\n    if (onKeyDown) {\n      onKeyDown(event);\n    }\n  }, [isDisabled, labelKey, onKeyDown, options, onSearch]);\n  var onActiveOption = useCallback(function (index) {\n    return function () {\n      if (!keyboardNavigation) setActiveIndex(index);\n    };\n  }, [keyboardNavigation]);\n  var onSelectOption = useCallback(function (event) {\n    if ((shouldShowClearButton('bottom') || shouldShowClearButton('top')) && containsFocus(clearRef.current)) {\n      onChange(event, {\n        option: undefined,\n        value: '',\n        selected: ''\n      });\n    } else if (activeIndex >= 0 && activeIndex < options.length) {\n      event.preventDefault(); // prevent submitting forms\n      selectOption(activeIndex)(event);\n    }\n  }, [activeIndex, selectOption, options, onChange, shouldShowClearButton]);\n  var customSearchInput = theme.select.searchInput;\n  var SelectTextInput = customSearchInput || TextInput;\n  var selectOptionsStyle = theme.select.options ? _extends({}, theme.select.options.box, theme.select.options.container) : {};\n  return /*#__PURE__*/React.createElement(Keyboard, {\n    onEnter: onSelectOption,\n    onSpace: onSelectOption,\n    onUp: onPreviousOption,\n    onDown: onNextOption,\n    onKeyDown: onKeyDownOption\n  }, /*#__PURE__*/React.createElement(StyledContainer, _extends({\n    ref: ref,\n    id: id ? id + \"__select-drop\" : undefined,\n    dropHeight: dropHeight\n  }, passThemeFlag), onSearch && /*#__PURE__*/React.createElement(Box, {\n    pad: !customSearchInput ? (_theme$select = theme.select) == null || (_theme$select = _theme$select.search) == null ? void 0 : _theme$select.pad : undefined,\n    flex: false\n  }, /*#__PURE__*/React.createElement(SelectTextInput, {\n    focusIndicator: !customSearchInput,\n    size: \"small\",\n    ref: searchRef,\n    type: \"search\",\n    value: search || '',\n    placeholder: searchPlaceholder,\n    onChange: function onChange(event) {\n      var nextSearch = event.target.value;\n      setSearch(nextSearch);\n      setActiveIndex(-1);\n      onSearch(nextSearch);\n    },\n    onFocus: function onFocus() {\n      return setActiveIndex(-1);\n    }\n  })), shouldShowClearButton('top') && /*#__PURE__*/React.createElement(ClearButton, {\n    ref: clearRef,\n    clear: clear,\n    name: name,\n    onClear: onClear,\n    onFocus: function onFocus() {\n      return setActiveIndex(-1);\n    },\n    onMouseOver: function onMouseOver() {\n      return setActiveIndex(-1);\n    },\n    theme: theme\n  }), options.length > 0 ? /*#__PURE__*/React.createElement(OptionsContainer, {\n    role: \"listbox\",\n    tabIndex: \"-1\",\n    ref: optionsRef,\n    \"aria-multiselectable\": multiple,\n    onMouseMove: function onMouseMove() {\n      return setKeyboardNavigation(false);\n    }\n  }, /*#__PURE__*/React.createElement(InfiniteScroll, {\n    items: options,\n    step: theme.select.step,\n    onMore: onMore,\n    replace: replace,\n    show: activeIndex !== -1 ? activeIndex : undefined\n  }, function (option, index, optionRef) {\n    var optionDisabled = isDisabled(index);\n    var optionSelected = isSelected(index);\n    var optionActive = activeIndex === index;\n    // Determine whether the label is done as a child or\n    // as an option Button kind property.\n    var child;\n    var textComponent = false;\n    if (children) {\n      child = children(option, index, options, {\n        active: optionActive,\n        disabled: optionDisabled,\n        selected: optionSelected\n      });\n      if (typeof child === 'string' || child.props && child.props.children && typeof child.props.children === 'string') textComponent = true;\n    } else if (theme.select.options) {\n      child = /*#__PURE__*/React.createElement(Box, selectOptionsStyle, /*#__PURE__*/React.createElement(Text, theme.select.options.text, getOptionLabel(index, options, labelKey)));\n      textComponent = true;\n    }\n\n    // if we have a child, turn on plain, and hoverIndicator\n    return /*#__PURE__*/React.createElement(SelectOption\n    // lint isn't flagging this but we shouldn't use index\n    // as a key see no-array-index-key lint rule\n    , _extends({\n      key: index\n      // merge optionRef and activeRef\n      ,\n\n      ref: function ref(node) {\n        // eslint-disable-next-line no-param-reassign\n        if (optionRef) optionRef.current = node;\n        if (optionActive) activeRef.current = node;\n      },\n      tabIndex: optionSelected || activeIndex === index ||\n      // when nothing is selected and entering listbox\n      // first option should be focused\n      (!value || Array.isArray(value) && value.length === 0) && activeIndex === -1 && index === 0 ? '0' : '-1',\n      role: \"option\",\n      \"aria-setsize\": options.length,\n      \"aria-posinset\": index + 1,\n      \"aria-selected\": optionSelected,\n      \"aria-disabled\": optionDisabled || undefined,\n      plain: !child ? undefined : true,\n      align: \"start\",\n      kind: !child ? 'option' : undefined,\n      label: !child ? getOptionLabel(index, options, labelKey || valueKey) : undefined,\n      disabled: optionDisabled || undefined,\n      active: optionActive,\n      selected: optionSelected\n      // allow keyboard navigation to start from\n      // selected option after tabbing to it\n      ,\n\n      onFocus: function onFocus() {\n        return setActiveIndex(index);\n      },\n      onMouseOver: !optionDisabled ? onActiveOption(index) : undefined,\n      onMouseOut: !optionDisabled ? onActiveOption(-1) : undefined,\n      onClick: !optionDisabled ? selectOption(index) : undefined,\n      textComponent: textComponent\n    }, passThemeFlag), child);\n  })) : /*#__PURE__*/React.createElement(EmptySearchOption, {\n    emptySearchMessage: emptySearchMessage,\n    selectOptionsStyle: selectOptionsStyle,\n    theme: theme\n  }), shouldShowClearButton('bottom') && /*#__PURE__*/React.createElement(ClearButton, {\n    ref: clearRef,\n    clear: clear,\n    name: name,\n    onClear: onClear,\n    onFocus: function onFocus() {\n      return setActiveIndex(-1);\n    },\n    onMouseOver: function onMouseOver() {\n      return setActiveIndex(-1);\n    },\n    theme: theme\n  })));\n});\nexport { SelectContainer };","map":{"version":3,"names":["_excluded","_extends","Object","assign","bind","n","e","arguments","length","t","r","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","indexOf","React","forwardRef","useCallback","useEffect","useRef","useState","styled","setFocusWithoutScroll","getHoverIndicatorStyle","containsFocus","Box","Button","InfiniteScroll","Keyboard","Text","TextInput","StyledContainer","OptionsContainer","SelectOption","applyKey","useDisabled","getOptionLabel","getOptionValue","EmptySearchOption","useThemeValue","StyledButton","withConfig","displayName","componentId","props","theme","ClearButton","_ref","ref","_theme$select$clear","_theme$select$clear2","_theme$select$clear3","clear","onClear","name","rest","label","position","align","buttonLabel","_useThemeValue","passThemeFlag","buttonKind","select","button","containerProps","container","textProps","text","buttonProps","a11yTitle","fill","onClick","createElement","flex","kind","focusIndicator","plain","_ref2","_theme$select$clear4","hover","boxProps","SelectContainer","_ref3","_theme$select","_ref3$children","children","disabled","disabledKey","dropHeight","_ref3$emptySearchMess","emptySearchMessage","id","labelKey","multiple","onChange","onKeyDown","onMore","onSearch","optionIndexesInValue","options","allOptions","searchPlaceholder","search","setSearch","selected","usingKeyboard","_ref3$value","value","valueKey","_ref3$replace","replace","_useThemeValue2","shouldShowClearButton","hasValue","Boolean","showAtPosition","isDisabled","_useState","activeIndex","setActiveIndex","_useState2","keyboardNavigation","setKeyboardNavigation","searchRef","optionsRef","clearRef","activeRef","_activeRef$current","current","focus","timer","setTimeout","optionsNode","clearButton","searchInput","clearTimeout","isSelected","index","result","optionVal","Array","isArray","some","valueItem","valueValue","key","selectOption","event","nextValue","nextSelected","nextOptionIndexesInValue","slice","allOptionsIndex","valueIndex","push","splice","map","i","reduce","option","undefined","onNextOption","preventDefault","nextActiveIndex","onPreviousOption","onKeyDownOption","findIndex","charAt","toLowerCase","onActiveOption","onSelectOption","customSearchInput","SelectTextInput","selectOptionsStyle","box","onEnter","onSpace","onUp","onDown","pad","size","type","placeholder","nextSearch","target","onFocus","onMouseOver","role","tabIndex","onMouseMove","items","step","show","optionRef","optionDisabled","optionSelected","optionActive","child","textComponent","active","node","onMouseOut"],"sources":["C:/Users/michaejo/Documents/GitRepos/player-api/node_modules/grommet/es6/components/Select/SelectContainer.js"],"sourcesContent":["var _excluded = [\"clear\", \"onClear\", \"name\", \"theme\"];\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nfunction _objectWithoutPropertiesLoose(r, e) { if (null == r) return {}; var t = {}; for (var n in r) if ({}.hasOwnProperty.call(r, n)) { if (-1 !== e.indexOf(n)) continue; t[n] = r[n]; } return t; }\nimport React, { forwardRef, useCallback, useEffect, useRef, useState } from 'react';\nimport styled from 'styled-components';\nimport { setFocusWithoutScroll, getHoverIndicatorStyle, containsFocus } from '../../utils';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { InfiniteScroll } from '../InfiniteScroll';\nimport { Keyboard } from '../Keyboard';\nimport { Text } from '../Text';\nimport { TextInput } from '../TextInput';\nimport { StyledContainer, OptionsContainer, SelectOption } from './StyledSelect';\nimport { applyKey, useDisabled, getOptionLabel, getOptionValue } from './utils';\nimport { EmptySearchOption } from './EmptySearchOption';\nimport { useThemeValue } from '../../utils/useThemeValue';\n\n// ensure ClearButton receives visual indication of keyboard\nvar StyledButton = styled(Button).withConfig({\n  displayName: \"SelectContainer__StyledButton\",\n  componentId: \"sc-1wi0ul8-0\"\n})([\"&:focus{\", \"}\"], function (props) {\n  return getHoverIndicatorStyle('background', props.theme);\n});\nvar ClearButton = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var _theme$select$clear, _theme$select$clear2, _theme$select$clear3;\n  var clear = _ref.clear,\n    onClear = _ref.onClear,\n    name = _ref.name,\n    theme = _ref.theme,\n    rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n  var label = clear.label,\n    position = clear.position;\n  var align = position !== 'bottom' ? 'start' : 'center';\n  var buttonLabel = label || \"Clear \" + (name || 'selection');\n  var _useThemeValue = useThemeValue(),\n    passThemeFlag = _useThemeValue.passThemeFlag;\n  var buttonKind = (_theme$select$clear = theme.select.clear) == null ? void 0 : _theme$select$clear.button;\n  var containerProps = ((_theme$select$clear2 = theme.select.clear) == null ? void 0 : _theme$select$clear2.container) || {};\n  var textProps = ((_theme$select$clear3 = theme.select.clear) == null ? void 0 : _theme$select$clear3.text) || {};\n  var buttonProps = _extends({\n    a11yTitle: buttonLabel + \". Or, press \" + (position === 'bottom' ? 'shift tab' : 'down arrow') + \" to move to select options\",\n    align: align,\n    fill: 'horizontal',\n    onClick: onClear,\n    ref: ref\n  }, passThemeFlag, rest);\n  if (buttonKind) {\n    // new structure when `theme.select.clear.button` is defined\n\n    return /*#__PURE__*/React.createElement(Box, _extends({\n      flex: \"grow\"\n    }, containerProps), /*#__PURE__*/React.createElement(Button, _extends({\n      kind: buttonKind,\n      label: textProps ? /*#__PURE__*/React.createElement(Text, textProps, buttonLabel) : buttonLabel\n    }, buttonProps)));\n  }\n\n  // default structure when `theme.select.clear.button` is not defined\n  return /*#__PURE__*/React.createElement(StyledButton, _extends({\n    focusIndicator: false,\n    plain: true\n  }, buttonProps), function (_ref2) {\n    var _theme$select$clear4;\n    var hover = _ref2.hover;\n    var boxProps = _extends({}, theme.select.clear.container);\n    delete boxProps.hover; // avoid passing hover object to Box\n    return /*#__PURE__*/React.createElement(Box, _extends({}, boxProps, hover ? (_theme$select$clear4 = theme.select.clear) == null || (_theme$select$clear4 = _theme$select$clear4.container) == null ? void 0 : _theme$select$clear4.hover : {}, {\n      align: align\n    }), /*#__PURE__*/React.createElement(Text, theme.select.clear.text, buttonLabel));\n  });\n});\nvar SelectContainer = /*#__PURE__*/forwardRef(function (_ref3, ref) {\n  var _theme$select;\n  var clear = _ref3.clear,\n    _ref3$children = _ref3.children,\n    children = _ref3$children === void 0 ? null : _ref3$children,\n    disabled = _ref3.disabled,\n    disabledKey = _ref3.disabledKey,\n    dropHeight = _ref3.dropHeight,\n    _ref3$emptySearchMess = _ref3.emptySearchMessage,\n    emptySearchMessage = _ref3$emptySearchMess === void 0 ? 'No matches found' : _ref3$emptySearchMess,\n    id = _ref3.id,\n    labelKey = _ref3.labelKey,\n    multiple = _ref3.multiple,\n    name = _ref3.name,\n    onChange = _ref3.onChange,\n    onKeyDown = _ref3.onKeyDown,\n    onMore = _ref3.onMore,\n    onSearch = _ref3.onSearch,\n    optionIndexesInValue = _ref3.optionIndexesInValue,\n    options = _ref3.options,\n    allOptions = _ref3.allOptions,\n    searchPlaceholder = _ref3.searchPlaceholder,\n    search = _ref3.search,\n    setSearch = _ref3.setSearch,\n    selected = _ref3.selected,\n    usingKeyboard = _ref3.usingKeyboard,\n    _ref3$value = _ref3.value,\n    value = _ref3$value === void 0 ? '' : _ref3$value,\n    valueKey = _ref3.valueKey,\n    _ref3$replace = _ref3.replace,\n    replace = _ref3$replace === void 0 ? true : _ref3$replace;\n  var _useThemeValue2 = useThemeValue(),\n    theme = _useThemeValue2.theme,\n    passThemeFlag = _useThemeValue2.passThemeFlag;\n  var shouldShowClearButton = useCallback(function (position) {\n    var hasValue = Boolean(multiple && value ? value.length : value);\n    var showAtPosition = position === 'bottom' ? (clear == null ? void 0 : clear.position) === 'bottom' : (clear == null ? void 0 : clear.position) !== 'bottom';\n    return clear && hasValue && showAtPosition;\n  }, [clear, multiple, value]);\n  var isDisabled = useDisabled(disabled, disabledKey, options, valueKey || labelKey);\n  var _useState = useState(usingKeyboard && !shouldShowClearButton('top') && !onSearch ? 0 : -1),\n    activeIndex = _useState[0],\n    setActiveIndex = _useState[1];\n  var _useState2 = useState(usingKeyboard),\n    keyboardNavigation = _useState2[0],\n    setKeyboardNavigation = _useState2[1];\n  var searchRef = useRef();\n  var optionsRef = useRef();\n  var clearRef = useRef();\n  var activeRef = useRef();\n\n  // for keyboard/screenreader, keep the active option in focus\n  useEffect(function () {\n    var _activeRef$current;\n    if (activeIndex >= 0) (_activeRef$current = activeRef.current) == null || _activeRef$current.focus();\n  }, [activeIndex]);\n\n  // set initial focus\n  useEffect(function () {\n    // need to wait for Drop to be ready\n    var timer = setTimeout(function () {\n      var optionsNode = optionsRef.current;\n      var clearButton = clearRef.current;\n      if (onSearch) {\n        var searchInput = searchRef.current;\n        if (searchInput && searchInput.focus && !activeRef.current) {\n          setFocusWithoutScroll(searchInput);\n        }\n      } else if (clear && clearButton && clearButton.focus && clear.position !== 'bottom') {\n        setFocusWithoutScroll(clearButton);\n      } else if (usingKeyboard && activeRef.current) {\n        setFocusWithoutScroll(activeRef.current);\n      } else if (optionsNode) {\n        setFocusWithoutScroll(optionsNode);\n      }\n    }, 100);\n    return function () {\n      return clearTimeout(timer);\n    };\n  }, [onSearch, usingKeyboard, clear]);\n  var isSelected = useCallback(function (index) {\n    var result;\n    if (selected) {\n      // deprecated in favor of value\n      result = selected.indexOf(index) !== -1;\n    } else {\n      var optionVal = getOptionValue(index, options, valueKey);\n      if (Array.isArray(value)) {\n        if (value.length === 0) {\n          result = false;\n        } else if (typeof value[0] !== 'object') {\n          result = value.indexOf(optionVal) !== -1;\n        } else if (valueKey) {\n          result = value.some(function (valueItem) {\n            var valueValue = typeof valueKey === 'function' ? valueKey(valueItem) : valueItem[valueKey] || valueItem[valueKey.key];\n            return valueValue === optionVal;\n          });\n        }\n      } else if (valueKey && value !== null && typeof value === 'object') {\n        var valueValue = typeof valueKey === 'function' ? valueKey(value) : value[valueKey];\n        result = valueValue === optionVal;\n      } else {\n        result = value === optionVal;\n      }\n    }\n    return result;\n  }, [selected, value, valueKey, options]);\n  var selectOption = useCallback(function (index) {\n    return function (event) {\n      if (onChange) {\n        var nextValue;\n        var nextSelected;\n        if (multiple) {\n          var nextOptionIndexesInValue = optionIndexesInValue.slice(0);\n          var allOptionsIndex = allOptions.indexOf(options[index]);\n          var valueIndex = optionIndexesInValue.indexOf(allOptionsIndex);\n          if (valueIndex === -1) {\n            nextOptionIndexesInValue.push(allOptionsIndex);\n          } else {\n            nextOptionIndexesInValue.splice(valueIndex, 1);\n          }\n          nextValue = nextOptionIndexesInValue.map(function (i) {\n            return valueKey && valueKey.reduce ? applyKey(allOptions[i], valueKey) : allOptions[i];\n          });\n          nextSelected = nextOptionIndexesInValue;\n        } else {\n          nextValue = valueKey && valueKey.reduce ? applyKey(options[index], valueKey) : options[index];\n          nextSelected = index;\n        }\n        onChange(event, {\n          option: options[index],\n          value: nextValue,\n          selected: nextSelected\n        });\n      }\n    };\n  }, [multiple, onChange, optionIndexesInValue, options, allOptions, valueKey]);\n  var onClear = useCallback(function (event) {\n    onChange(event, {\n      option: undefined,\n      value: '',\n      selected: ''\n    });\n  }, [onChange]);\n  var onNextOption = useCallback(function (event) {\n    event.preventDefault();\n    var nextActiveIndex = activeIndex + 1;\n    while (nextActiveIndex < options.length && isDisabled(nextActiveIndex)) {\n      nextActiveIndex += 1;\n    }\n    if (nextActiveIndex !== options.length) {\n      setActiveIndex(nextActiveIndex);\n      setKeyboardNavigation(true);\n    }\n  }, [activeIndex, options, isDisabled]);\n  var onPreviousOption = useCallback(function (event) {\n    event.preventDefault();\n    var nextActiveIndex = activeIndex - 1;\n    if (nextActiveIndex === -1) {\n      var searchInput = searchRef.current;\n      var clearButton = clearRef.current;\n      if (clearButton && clearButton.focus && shouldShowClearButton('top')) {\n        setActiveIndex(nextActiveIndex);\n        setFocusWithoutScroll(clearButton);\n      } else if (searchInput && searchInput.focus) {\n        setActiveIndex(nextActiveIndex);\n        setFocusWithoutScroll(searchInput);\n      }\n    }\n    while (nextActiveIndex >= 0 && isDisabled(nextActiveIndex)) {\n      nextActiveIndex -= 1;\n    }\n    if (nextActiveIndex >= 0) {\n      setActiveIndex(nextActiveIndex);\n      setKeyboardNavigation(true);\n    }\n  }, [activeIndex, isDisabled, shouldShowClearButton]);\n  var onKeyDownOption = useCallback(function (event) {\n    if (!onSearch) {\n      var nextActiveIndex = options.findIndex(function (e, index) {\n        var label;\n        if (typeof e === 'object') {\n          label = e.label || applyKey(e, labelKey);\n        } else {\n          label = e;\n        }\n        return typeof label === 'string' && label.charAt(0).toLowerCase() === event.key.toLowerCase() && !isDisabled(index);\n      });\n      if (nextActiveIndex >= 0) {\n        event.preventDefault();\n        setActiveIndex(nextActiveIndex);\n        setKeyboardNavigation(true);\n      }\n    }\n    if (onKeyDown) {\n      onKeyDown(event);\n    }\n  }, [isDisabled, labelKey, onKeyDown, options, onSearch]);\n  var onActiveOption = useCallback(function (index) {\n    return function () {\n      if (!keyboardNavigation) setActiveIndex(index);\n    };\n  }, [keyboardNavigation]);\n  var onSelectOption = useCallback(function (event) {\n    if ((shouldShowClearButton('bottom') || shouldShowClearButton('top')) && containsFocus(clearRef.current)) {\n      onChange(event, {\n        option: undefined,\n        value: '',\n        selected: ''\n      });\n    } else if (activeIndex >= 0 && activeIndex < options.length) {\n      event.preventDefault(); // prevent submitting forms\n      selectOption(activeIndex)(event);\n    }\n  }, [activeIndex, selectOption, options, onChange, shouldShowClearButton]);\n  var customSearchInput = theme.select.searchInput;\n  var SelectTextInput = customSearchInput || TextInput;\n  var selectOptionsStyle = theme.select.options ? _extends({}, theme.select.options.box, theme.select.options.container) : {};\n  return /*#__PURE__*/React.createElement(Keyboard, {\n    onEnter: onSelectOption,\n    onSpace: onSelectOption,\n    onUp: onPreviousOption,\n    onDown: onNextOption,\n    onKeyDown: onKeyDownOption\n  }, /*#__PURE__*/React.createElement(StyledContainer, _extends({\n    ref: ref,\n    id: id ? id + \"__select-drop\" : undefined,\n    dropHeight: dropHeight\n  }, passThemeFlag), onSearch && /*#__PURE__*/React.createElement(Box, {\n    pad: !customSearchInput ? (_theme$select = theme.select) == null || (_theme$select = _theme$select.search) == null ? void 0 : _theme$select.pad : undefined,\n    flex: false\n  }, /*#__PURE__*/React.createElement(SelectTextInput, {\n    focusIndicator: !customSearchInput,\n    size: \"small\",\n    ref: searchRef,\n    type: \"search\",\n    value: search || '',\n    placeholder: searchPlaceholder,\n    onChange: function onChange(event) {\n      var nextSearch = event.target.value;\n      setSearch(nextSearch);\n      setActiveIndex(-1);\n      onSearch(nextSearch);\n    },\n    onFocus: function onFocus() {\n      return setActiveIndex(-1);\n    }\n  })), shouldShowClearButton('top') && /*#__PURE__*/React.createElement(ClearButton, {\n    ref: clearRef,\n    clear: clear,\n    name: name,\n    onClear: onClear,\n    onFocus: function onFocus() {\n      return setActiveIndex(-1);\n    },\n    onMouseOver: function onMouseOver() {\n      return setActiveIndex(-1);\n    },\n    theme: theme\n  }), options.length > 0 ? /*#__PURE__*/React.createElement(OptionsContainer, {\n    role: \"listbox\",\n    tabIndex: \"-1\",\n    ref: optionsRef,\n    \"aria-multiselectable\": multiple,\n    onMouseMove: function onMouseMove() {\n      return setKeyboardNavigation(false);\n    }\n  }, /*#__PURE__*/React.createElement(InfiniteScroll, {\n    items: options,\n    step: theme.select.step,\n    onMore: onMore,\n    replace: replace,\n    show: activeIndex !== -1 ? activeIndex : undefined\n  }, function (option, index, optionRef) {\n    var optionDisabled = isDisabled(index);\n    var optionSelected = isSelected(index);\n    var optionActive = activeIndex === index;\n    // Determine whether the label is done as a child or\n    // as an option Button kind property.\n    var child;\n    var textComponent = false;\n    if (children) {\n      child = children(option, index, options, {\n        active: optionActive,\n        disabled: optionDisabled,\n        selected: optionSelected\n      });\n      if (typeof child === 'string' || child.props && child.props.children && typeof child.props.children === 'string') textComponent = true;\n    } else if (theme.select.options) {\n      child = /*#__PURE__*/React.createElement(Box, selectOptionsStyle, /*#__PURE__*/React.createElement(Text, theme.select.options.text, getOptionLabel(index, options, labelKey)));\n      textComponent = true;\n    }\n\n    // if we have a child, turn on plain, and hoverIndicator\n    return /*#__PURE__*/React.createElement(SelectOption\n    // lint isn't flagging this but we shouldn't use index\n    // as a key see no-array-index-key lint rule\n    , _extends({\n      key: index\n      // merge optionRef and activeRef\n      ,\n      ref: function ref(node) {\n        // eslint-disable-next-line no-param-reassign\n        if (optionRef) optionRef.current = node;\n        if (optionActive) activeRef.current = node;\n      },\n      tabIndex: optionSelected || activeIndex === index ||\n      // when nothing is selected and entering listbox\n      // first option should be focused\n      (!value || Array.isArray(value) && value.length === 0) && activeIndex === -1 && index === 0 ? '0' : '-1',\n      role: \"option\",\n      \"aria-setsize\": options.length,\n      \"aria-posinset\": index + 1,\n      \"aria-selected\": optionSelected,\n      \"aria-disabled\": optionDisabled || undefined,\n      plain: !child ? undefined : true,\n      align: \"start\",\n      kind: !child ? 'option' : undefined,\n      label: !child ? getOptionLabel(index, options, labelKey || valueKey) : undefined,\n      disabled: optionDisabled || undefined,\n      active: optionActive,\n      selected: optionSelected\n      // allow keyboard navigation to start from\n      // selected option after tabbing to it\n      ,\n      onFocus: function onFocus() {\n        return setActiveIndex(index);\n      },\n      onMouseOver: !optionDisabled ? onActiveOption(index) : undefined,\n      onMouseOut: !optionDisabled ? onActiveOption(-1) : undefined,\n      onClick: !optionDisabled ? selectOption(index) : undefined,\n      textComponent: textComponent\n    }, passThemeFlag), child);\n  })) : /*#__PURE__*/React.createElement(EmptySearchOption, {\n    emptySearchMessage: emptySearchMessage,\n    selectOptionsStyle: selectOptionsStyle,\n    theme: theme\n  }), shouldShowClearButton('bottom') && /*#__PURE__*/React.createElement(ClearButton, {\n    ref: clearRef,\n    clear: clear,\n    name: name,\n    onClear: onClear,\n    onFocus: function onFocus() {\n      return setActiveIndex(-1);\n    },\n    onMouseOver: function onMouseOver() {\n      return setActiveIndex(-1);\n    },\n    theme: theme\n  })));\n});\nexport { SelectContainer };"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}